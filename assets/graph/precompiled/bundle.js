var lv=Object.create;var Zi=Object.defineProperty;var uv=Object.getOwnPropertyDescriptor;var fv=Object.getOwnPropertyNames;var vv=Object.getPrototypeOf,hv=Object.prototype.hasOwnProperty;var ua=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var xe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var cv=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of fv(e))!hv.call(t,n)&&n!==r&&Zi(t,n,{get:()=>e[n],enumerable:!(a=uv(e,n))||a.enumerable});return t};var Un=(t,e,r)=>(r=t!=null?lv(vv(t)):{},cv(e||!t||!t.__esModule?Zi(r,"default",{value:t,enumerable:!0}):r,t));var Pr=xe((U0,Qi)=>{function dv(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}Qi.exports=dv});var _i=xe((Y0,Ji)=>{var gv=typeof global=="object"&&global&&global.Object===Object&&global;Ji.exports=gv});var fa=xe((q0,ji)=>{var pv=_i(),yv=typeof self=="object"&&self&&self.Object===Object&&self,mv=pv||yv||Function("return this")();ji.exports=mv});var to=xe((W0,eo)=>{var Ev=fa(),bv=function(){return Ev.Date.now()};eo.exports=bv});var ao=xe((X0,ro)=>{var wv=/\s/;function xv(t){for(var e=t.length;e--&&wv.test(t.charAt(e)););return e}ro.exports=xv});var io=xe(($0,no)=>{var Cv=ao(),Tv=/^\s+/;function Dv(t){return t&&t.slice(0,Cv(t)+1).replace(Tv,"")}no.exports=Dv});var Za=xe((K0,oo)=>{var Sv=fa(),Lv=Sv.Symbol;oo.exports=Lv});var fo=xe((Z0,uo)=>{var so=Za(),lo=Object.prototype,Nv=lo.hasOwnProperty,Mv=lo.toString,va=so?so.toStringTag:void 0;function Av(t){var e=Nv.call(t,va),r=t[va];try{t[va]=void 0;var a=!0}catch{}var n=Mv.call(t);return a&&(e?t[va]=r:delete t[va]),n}uo.exports=Av});var ho=xe((Q0,vo)=>{var Ov=Object.prototype,Rv=Ov.toString;function Pv(t){return Rv.call(t)}vo.exports=Pv});var Yn=xe((J0,po)=>{var co=Za(),Iv=fo(),Fv=ho(),Bv="[object Null]",kv="[object Undefined]",go=co?co.toStringTag:void 0;function zv(t){return t==null?t===void 0?kv:Bv:go&&go in Object(t)?Iv(t):Fv(t)}po.exports=zv});var mo=xe((_0,yo)=>{function Gv(t){return t!=null&&typeof t=="object"}yo.exports=Gv});var Ir=xe((j0,Eo)=>{var Vv=Yn(),Hv=mo(),Uv="[object Symbol]";function Yv(t){return typeof t=="symbol"||Hv(t)&&Vv(t)==Uv}Eo.exports=Yv});var Co=xe((eE,xo)=>{var qv=io(),bo=Pr(),Wv=Ir(),wo=0/0,Xv=/^[-+]0x[0-9a-f]+$/i,$v=/^0b[01]+$/i,Kv=/^0o[0-7]+$/i,Zv=parseInt;function Qv(t){if(typeof t=="number")return t;if(Wv(t))return wo;if(bo(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=bo(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=qv(t);var r=$v.test(t);return r||Kv.test(t)?Zv(t.slice(2),r?2:8):Xv.test(t)?wo:+t}xo.exports=Qv});var So=xe((tE,Do)=>{var Jv=Pr(),qn=to(),To=Co(),_v="Expected a function",jv=Math.max,eh=Math.min;function th(t,e,r){var a,n,o,i,l,u,s=0,f=!1,v=!1,h=!0;if(typeof t!="function")throw new TypeError(_v);e=To(e)||0,Jv(r)&&(f=!!r.leading,v="maxWait"in r,o=v?jv(To(r.maxWait)||0,e):o,h="trailing"in r?!!r.trailing:h);function c(x){var D=a,L=n;return a=n=void 0,s=x,i=t.apply(L,D),i}function g(x){return s=x,l=setTimeout(p,e),f?c(x):i}function d(x){var D=x-u,L=x-s,N=e-D;return v?eh(N,o-L):N}function m(x){var D=x-u,L=x-s;return u===void 0||D>=e||D<0||v&&L>=o}function p(){var x=qn();if(m(x))return y(x);l=setTimeout(p,d(x))}function y(x){return l=void 0,h&&a?c(x):(a=n=void 0,i)}function E(){l!==void 0&&clearTimeout(l),s=0,a=u=n=l=void 0}function T(){return l===void 0?i:y(qn())}function w(){var x=qn(),D=m(x);if(a=arguments,n=this,u=x,D){if(l===void 0)return g(u);if(v)return clearTimeout(l),l=setTimeout(p,e),c(u)}return l===void 0&&(l=setTimeout(p,e)),i}return w.cancel=E,w.flush=T,w}Do.exports=th});var No=xe((Wn,Lo)=>{(function(){var t,e,r,a,n,o,i,l,u,s,f,v,h,c,g;r=Math.floor,s=Math.min,e=function(d,m){return d<m?-1:d>m?1:0},u=function(d,m,p,y,E){var T;if(p==null&&(p=0),E==null&&(E=e),p<0)throw new Error("lo must be non-negative");for(y==null&&(y=d.length);p<y;)T=r((p+y)/2),E(m,d[T])<0?y=T:p=T+1;return[].splice.apply(d,[p,p-p].concat(m)),m},o=function(d,m,p){return p==null&&(p=e),d.push(m),c(d,0,d.length-1,p)},n=function(d,m){var p,y;return m==null&&(m=e),p=d.pop(),d.length?(y=d[0],d[0]=p,g(d,0,m)):y=p,y},l=function(d,m,p){var y;return p==null&&(p=e),y=d[0],d[0]=m,g(d,0,p),y},i=function(d,m,p){var y;return p==null&&(p=e),d.length&&p(d[0],m)<0&&(y=[d[0],m],m=y[0],d[0]=y[1],g(d,0,p)),m},a=function(d,m){var p,y,E,T,w,x,D,L;for(m==null&&(m=e),x=function(){L=[];for(var N=0,A=r(d.length/2);0<=A?N<A:N>A;0<=A?N++:N--)L.push(N);return L}.apply(this).reverse(),D=[],y=0,T=x.length;y<T;y++)p=x[y],D.push(g(d,p,m));return D},h=function(d,m,p){var y;if(p==null&&(p=e),y=d.indexOf(m),y!==-1)return c(d,0,y,p),g(d,y,p)},f=function(d,m,p){var y,E,T,w,x;if(p==null&&(p=e),E=d.slice(0,m),!E.length)return E;for(a(E,p),x=d.slice(m),T=0,w=x.length;T<w;T++)y=x[T],i(E,y,p);return E.sort(p).reverse()},v=function(d,m,p){var y,E,T,w,x,D,L,N,A,P;if(p==null&&(p=e),m*10<=d.length){if(w=d.slice(0,m).sort(p),!w.length)return w;for(T=w[w.length-1],N=d.slice(m),x=0,L=N.length;x<L;x++)y=N[x],p(y,T)<0&&(u(w,y,0,null,p),w.pop(),T=w[w.length-1]);return w}for(a(d,p),P=[],E=D=0,A=s(m,d.length);0<=A?D<A:D>A;E=0<=A?++D:--D)P.push(n(d,p));return P},c=function(d,m,p,y){var E,T,w;for(y==null&&(y=e),E=d[p];p>m;){if(w=p-1>>1,T=d[w],y(E,T)<0){d[p]=T,p=w;continue}break}return d[p]=E},g=function(d,m,p){var y,E,T,w,x;for(p==null&&(p=e),E=d.length,x=m,T=d[m],y=2*m+1;y<E;)w=y+1,w<E&&!(p(d[y],d[w])<0)&&(y=w),d[m]=d[y],m=y,y=2*m+1;return d[m]=T,c(d,x,m,p)},t=function(){d.push=o,d.pop=n,d.replace=l,d.pushpop=i,d.heapify=a,d.updateItem=h,d.nlargest=f,d.nsmallest=v;function d(m){this.cmp=m??e,this.nodes=[]}return d.prototype.push=function(m){return o(this.nodes,m,this.cmp)},d.prototype.pop=function(){return n(this.nodes,this.cmp)},d.prototype.peek=function(){return this.nodes[0]},d.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},d.prototype.replace=function(m){return l(this.nodes,m,this.cmp)},d.prototype.pushpop=function(m){return i(this.nodes,m,this.cmp)},d.prototype.heapify=function(){return a(this.nodes,this.cmp)},d.prototype.updateItem=function(m){return h(this.nodes,m,this.cmp)},d.prototype.clear=function(){return this.nodes=[]},d.prototype.empty=function(){return this.nodes.length===0},d.prototype.size=function(){return this.nodes.length},d.prototype.clone=function(){var m;return m=new d,m.nodes=this.nodes.slice(0),m},d.prototype.toArray=function(){return this.nodes.slice(0)},d.prototype.insert=d.prototype.push,d.prototype.top=d.prototype.peek,d.prototype.front=d.prototype.peek,d.prototype.has=d.prototype.contains,d.prototype.copy=d.prototype.clone,d}(),function(d,m){return typeof define=="function"&&define.amd?define([],m):typeof Wn=="object"?Lo.exports=m():d.Heap=m()}(this,function(){return t})}).call(Wn)});var Ao=xe((rE,Mo)=>{Mo.exports=No()});var ha=xe((aE,Oo)=>{var rh=Array.isArray;Oo.exports=rh});var Po=xe((nE,Ro)=>{var ah=ha(),nh=Ir(),ih=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oh=/^\w*$/;function sh(t,e){if(ah(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||nh(t)?!0:oh.test(t)||!ih.test(t)||e!=null&&t in Object(e)}Ro.exports=sh});var Fo=xe((iE,Io)=>{var lh=Yn(),uh=Pr(),fh="[object AsyncFunction]",vh="[object Function]",hh="[object GeneratorFunction]",ch="[object Proxy]";function dh(t){if(!uh(t))return!1;var e=lh(t);return e==vh||e==hh||e==fh||e==ch}Io.exports=dh});var ko=xe((oE,Bo)=>{var gh=fa(),ph=gh["__core-js_shared__"];Bo.exports=ph});var Vo=xe((sE,Go)=>{var Xn=ko(),zo=function(){var t=/[^.]+$/.exec(Xn&&Xn.keys&&Xn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yh(t){return!!zo&&zo in t}Go.exports=yh});var Uo=xe((lE,Ho)=>{var mh=Function.prototype,Eh=mh.toString;function bh(t){if(t!=null){try{return Eh.call(t)}catch{}try{return t+""}catch{}}return""}Ho.exports=bh});var qo=xe((uE,Yo)=>{var wh=Fo(),xh=Vo(),Ch=Pr(),Th=Uo(),Dh=/[\\^$.*+?()[\]{}|]/g,Sh=/^\[object .+?Constructor\]$/,Lh=Function.prototype,Nh=Object.prototype,Mh=Lh.toString,Ah=Nh.hasOwnProperty,Oh=RegExp("^"+Mh.call(Ah).replace(Dh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rh(t){if(!Ch(t)||xh(t))return!1;var e=wh(t)?Oh:Sh;return e.test(Th(t))}Yo.exports=Rh});var Xo=xe((fE,Wo)=>{function Ph(t,e){return t?.[e]}Wo.exports=Ph});var Qa=xe((vE,$o)=>{var Ih=qo(),Fh=Xo();function Bh(t,e){var r=Fh(t,e);return Ih(r)?r:void 0}$o.exports=Bh});var ca=xe((hE,Ko)=>{var kh=Qa(),zh=kh(Object,"create");Ko.exports=zh});var Jo=xe((cE,Qo)=>{var Zo=ca();function Gh(){this.__data__=Zo?Zo(null):{},this.size=0}Qo.exports=Gh});var jo=xe((dE,_o)=>{function Vh(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}_o.exports=Vh});var ts=xe((gE,es)=>{var Hh=ca(),Uh="__lodash_hash_undefined__",Yh=Object.prototype,qh=Yh.hasOwnProperty;function Wh(t){var e=this.__data__;if(Hh){var r=e[t];return r===Uh?void 0:r}return qh.call(e,t)?e[t]:void 0}es.exports=Wh});var as=xe((pE,rs)=>{var Xh=ca(),$h=Object.prototype,Kh=$h.hasOwnProperty;function Zh(t){var e=this.__data__;return Xh?e[t]!==void 0:Kh.call(e,t)}rs.exports=Zh});var is=xe((yE,ns)=>{var Qh=ca(),Jh="__lodash_hash_undefined__";function _h(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Qh&&e===void 0?Jh:e,this}ns.exports=_h});var ss=xe((mE,os)=>{var jh=Jo(),ec=jo(),tc=ts(),rc=as(),ac=is();function Fr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}Fr.prototype.clear=jh;Fr.prototype.delete=ec;Fr.prototype.get=tc;Fr.prototype.has=rc;Fr.prototype.set=ac;os.exports=Fr});var us=xe((EE,ls)=>{function nc(){this.__data__=[],this.size=0}ls.exports=nc});var $n=xe((bE,fs)=>{function ic(t,e){return t===e||t!==t&&e!==e}fs.exports=ic});var da=xe((wE,vs)=>{var oc=$n();function sc(t,e){for(var r=t.length;r--;)if(oc(t[r][0],e))return r;return-1}vs.exports=sc});var cs=xe((xE,hs)=>{var lc=da(),uc=Array.prototype,fc=uc.splice;function vc(t){var e=this.__data__,r=lc(e,t);if(r<0)return!1;var a=e.length-1;return r==a?e.pop():fc.call(e,r,1),--this.size,!0}hs.exports=vc});var gs=xe((CE,ds)=>{var hc=da();function cc(t){var e=this.__data__,r=hc(e,t);return r<0?void 0:e[r][1]}ds.exports=cc});var ys=xe((TE,ps)=>{var dc=da();function gc(t){return dc(this.__data__,t)>-1}ps.exports=gc});var Es=xe((DE,ms)=>{var pc=da();function yc(t,e){var r=this.__data__,a=pc(r,t);return a<0?(++this.size,r.push([t,e])):r[a][1]=e,this}ms.exports=yc});var ws=xe((SE,bs)=>{var mc=us(),Ec=cs(),bc=gs(),wc=ys(),xc=Es();function Br(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}Br.prototype.clear=mc;Br.prototype.delete=Ec;Br.prototype.get=bc;Br.prototype.has=wc;Br.prototype.set=xc;bs.exports=Br});var Cs=xe((LE,xs)=>{var Cc=Qa(),Tc=fa(),Dc=Cc(Tc,"Map");xs.exports=Dc});var Ss=xe((NE,Ds)=>{var Ts=ss(),Sc=ws(),Lc=Cs();function Nc(){this.size=0,this.__data__={hash:new Ts,map:new(Lc||Sc),string:new Ts}}Ds.exports=Nc});var Ns=xe((ME,Ls)=>{function Mc(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}Ls.exports=Mc});var ga=xe((AE,Ms)=>{var Ac=Ns();function Oc(t,e){var r=t.__data__;return Ac(e)?r[typeof e=="string"?"string":"hash"]:r.map}Ms.exports=Oc});var Os=xe((OE,As)=>{var Rc=ga();function Pc(t){var e=Rc(this,t).delete(t);return this.size-=e?1:0,e}As.exports=Pc});var Ps=xe((RE,Rs)=>{var Ic=ga();function Fc(t){return Ic(this,t).get(t)}Rs.exports=Fc});var Fs=xe((PE,Is)=>{var Bc=ga();function kc(t){return Bc(this,t).has(t)}Is.exports=kc});var ks=xe((IE,Bs)=>{var zc=ga();function Gc(t,e){var r=zc(this,t),a=r.size;return r.set(t,e),this.size+=r.size==a?0:1,this}Bs.exports=Gc});var Gs=xe((FE,zs)=>{var Vc=Ss(),Hc=Os(),Uc=Ps(),Yc=Fs(),qc=ks();function kr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}kr.prototype.clear=Vc;kr.prototype.delete=Hc;kr.prototype.get=Uc;kr.prototype.has=Yc;kr.prototype.set=qc;zs.exports=kr});var Us=xe((BE,Hs)=>{var Vs=Gs(),Wc="Expected a function";function Kn(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Wc);var r=function(){var a=arguments,n=e?e.apply(this,a):a[0],o=r.cache;if(o.has(n))return o.get(n);var i=t.apply(this,a);return r.cache=o.set(n,i)||o,i};return r.cache=new(Kn.Cache||Vs),r}Kn.Cache=Vs;Hs.exports=Kn});var qs=xe((kE,Ys)=>{var Xc=Us(),$c=500;function Kc(t){var e=Xc(t,function(a){return r.size===$c&&r.clear(),a}),r=e.cache;return e}Ys.exports=Kc});var Zn=xe((zE,Ws)=>{var Zc=qs(),Qc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jc=/\\(\\)?/g,_c=Zc(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Qc,function(r,a,n,o){e.push(n?o.replace(Jc,"$1"):a||r)}),e});Ws.exports=_c});var Qn=xe((GE,Xs)=>{function jc(t,e){for(var r=-1,a=t==null?0:t.length,n=Array(a);++r<a;)n[r]=e(t[r],r,t);return n}Xs.exports=jc});var _s=xe((VE,Js)=>{var $s=Za(),ed=Qn(),td=ha(),rd=Ir(),ad=1/0,Ks=$s?$s.prototype:void 0,Zs=Ks?Ks.toString:void 0;function Qs(t){if(typeof t=="string")return t;if(td(t))return ed(t,Qs)+"";if(rd(t))return Zs?Zs.call(t):"";var e=t+"";return e=="0"&&1/t==-ad?"-0":e}Js.exports=Qs});var Jn=xe((HE,js)=>{var nd=_s();function id(t){return t==null?"":nd(t)}js.exports=id});var _n=xe((UE,el)=>{var od=ha(),sd=Po(),ld=Zn(),ud=Jn();function fd(t,e){return od(t)?t:sd(t,e)?[t]:ld(ud(t))}el.exports=fd});var Ja=xe((YE,tl)=>{var vd=Ir(),hd=1/0;function cd(t){if(typeof t=="string"||vd(t))return t;var e=t+"";return e=="0"&&1/t==-hd?"-0":e}tl.exports=cd});var al=xe((qE,rl)=>{var dd=_n(),gd=Ja();function pd(t,e){e=dd(e,t);for(var r=0,a=e.length;t!=null&&r<a;)t=t[gd(e[r++])];return r&&r==a?t:void 0}rl.exports=pd});var il=xe((WE,nl)=>{var yd=al();function md(t,e,r){var a=t==null?void 0:yd(t,e);return a===void 0?r:a}nl.exports=md});var sl=xe((XE,ol)=>{var Ed=Qa(),bd=function(){try{var t=Ed(Object,"defineProperty");return t({},"",{}),t}catch{}}();ol.exports=bd});var fl=xe(($E,ul)=>{var ll=sl();function wd(t,e,r){e=="__proto__"&&ll?ll(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}ul.exports=wd});var hl=xe((KE,vl)=>{var xd=fl(),Cd=$n(),Td=Object.prototype,Dd=Td.hasOwnProperty;function Sd(t,e,r){var a=t[e];(!(Dd.call(t,e)&&Cd(a,r))||r===void 0&&!(e in t))&&xd(t,e,r)}vl.exports=Sd});var dl=xe((ZE,cl)=>{var Ld=9007199254740991,Nd=/^(?:0|[1-9]\d*)$/;function Md(t,e){var r=typeof t;return e=e??Ld,!!e&&(r=="number"||r!="symbol"&&Nd.test(t))&&t>-1&&t%1==0&&t<e}cl.exports=Md});var yl=xe((QE,pl)=>{var Ad=hl(),Od=_n(),Rd=dl(),gl=Pr(),Pd=Ja();function Id(t,e,r,a){if(!gl(t))return t;e=Od(e,t);for(var n=-1,o=e.length,i=o-1,l=t;l!=null&&++n<o;){var u=Pd(e[n]),s=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(n!=i){var f=l[u];s=a?a(f,u,l):void 0,s===void 0&&(s=gl(f)?f:Rd(e[n+1])?[]:{})}Ad(l,u,s),l=l[u]}return t}pl.exports=Id});var El=xe((JE,ml)=>{var Fd=yl();function Bd(t,e,r){return t==null?t:Fd(t,e,r)}ml.exports=Bd});var wl=xe((_E,bl)=>{function kd(t,e){var r=-1,a=t.length;for(e||(e=Array(a));++r<a;)e[r]=t[r];return e}bl.exports=kd});var Cl=xe((jE,xl)=>{var zd=Qn(),Gd=wl(),Vd=ha(),Hd=Ir(),Ud=Zn(),Yd=Ja(),qd=Jn();function Wd(t){return Vd(t)?zd(t,Yd):Hd(t)?[t]:Gd(Ud(qd(t)))}xl.exports=Wd});var ev=xe((e1,jf)=>{"use strict";var Xd=So(),$d=Ao(),Kd=il(),Zd=El(),Qd=Cl();function Ba(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Sn=Ba(Xd),ka=Ba($d),Jd=Ba(Kd),_d=Ba(Zd),jd=Ba(Qd);function ut(t){return ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(t)}function xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tl(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Ci(t,e,r){return e&&Tl(t.prototype,e),r&&Tl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Su(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wt(t,e){return eg(t)||tg(t,e)||rg(t,e)||ag()}function eg(t){if(Array.isArray(t))return t}function tg(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a=[],n=!0,o=!1,i,l;try{for(r=r.call(t);!(n=(i=r.next()).done)&&(a.push(i.value),!(e&&a.length===e));n=!0);}catch(u){o=!0,l=u}finally{try{!n&&r.return!=null&&r.return()}finally{if(o)throw l}}return a}}function rg(t,e){if(t){if(typeof t=="string")return Dl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dl(t,e)}}function Dl(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function ag(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rt=typeof window>"u"?null:window,Sl=rt?rt.navigator:null;rt&&rt.document;var ng=ut(""),Lu=ut({}),ig=ut(function(){}),og=typeof HTMLElement>"u"?"undefined":ut(HTMLElement),za=function(e){return e&&e.instanceString&&at(e.instanceString)?e.instanceString():null},Re=function(e){return e!=null&&ut(e)==ng},at=function(e){return e!=null&&ut(e)===ig},Je=function(e){return!Nt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ve=function(e){return e!=null&&ut(e)===Lu&&!Je(e)&&e.constructor===Object},sg=function(e){return e!=null&&ut(e)===Lu},ye=function(e){return e!=null&&ut(e)===ut(1)&&!isNaN(e)},lg=function(e){return ye(e)&&Math.floor(e)===e},yn=function(e){if(og!=="undefined")return e!=null&&e instanceof HTMLElement},Nt=function(e){return Ga(e)||Nu(e)},Ga=function(e){return za(e)==="collection"&&e._private.single},Nu=function(e){return za(e)==="collection"&&!e._private.single},Ti=function(e){return za(e)==="core"},Mu=function(e){return za(e)==="stylesheet"},ug=function(e){return za(e)==="event"},lr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},fg=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},vg=function(e){return Ve(e)&&ye(e.x1)&&ye(e.x2)&&ye(e.y1)&&ye(e.y2)},hg=function(e){return sg(e)&&at(e.then)},cg=function(){return Sl&&Sl.userAgent.match(/msie|trident|edge/i)},Sa=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);return o.join("$")});var a=function n(){var o=this,i=arguments,l,u=r.apply(o,i),s=n.cache;return(l=s[u])||(l=s[u]=e.apply(o,i)),l};return a.cache={},a},Di=Sa(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Ln=Sa(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Au=Sa(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Ll=function(e){return lr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},lt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",dg="rgb[a]?\\(("+lt+"[%]?)\\s*,\\s*("+lt+"[%]?)\\s*,\\s*("+lt+"[%]?)(?:\\s*,\\s*("+lt+"))?\\)",gg="rgb[a]?\\((?:"+lt+"[%]?)\\s*,\\s*(?:"+lt+"[%]?)\\s*,\\s*(?:"+lt+"[%]?)(?:\\s*,\\s*(?:"+lt+"))?\\)",pg="hsl[a]?\\(("+lt+")\\s*,\\s*("+lt+"[%])\\s*,\\s*("+lt+"[%])(?:\\s*,\\s*("+lt+"))?\\)",yg="hsl[a]?\\((?:"+lt+")\\s*,\\s*(?:"+lt+"[%])\\s*,\\s*(?:"+lt+"[%])(?:\\s*,\\s*(?:"+lt+"))?\\)",mg="\\#[0-9a-fA-F]{3}",Eg="\\#[0-9a-fA-F]{6}",Ou=function(e,r){return e<r?-1:e>r?1:0},bg=function(e,r){return-1*Ou(e,r)},Ie=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var a=e[r];if(a!=null)for(var n=Object.keys(a),o=0;o<n.length;o++){var i=n[o];t[i]=a[i]}}return t},wg=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,a,n,o,i=16;return r?(a=parseInt(e[1]+e[1],i),n=parseInt(e[2]+e[2],i),o=parseInt(e[3]+e[3],i)):(a=parseInt(e[1]+e[2],i),n=parseInt(e[3]+e[4],i),o=parseInt(e[5]+e[6],i)),[a,n,o]}},xg=function(e){var r,a,n,o,i,l,u,s;function f(g,d,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?g+(d-g)*6*m:m<1/2?d:m<2/3?g+(d-g)*(2/3-m)*6:g}var v=new RegExp("^"+pg+"$").exec(e);if(v){if(a=parseInt(v[1]),a<0?a=(360- -1*a%360)%360:a>360&&(a=a%360),a/=360,n=parseFloat(v[2]),n<0||n>100||(n=n/100,o=parseFloat(v[3]),o<0||o>100)||(o=o/100,i=v[4],i!==void 0&&(i=parseFloat(i),i<0||i>1)))return;if(n===0)l=u=s=Math.round(o*255);else{var h=o<.5?o*(1+n):o+n-o*n,c=2*o-h;l=Math.round(255*f(c,h,a+1/3)),u=Math.round(255*f(c,h,a)),s=Math.round(255*f(c,h,a-1/3))}r=[l,u,s,i]}return r},Cg=function(e){var r,a=new RegExp("^"+dg+"$").exec(e);if(a){r=[];for(var n=[],o=1;o<=3;o++){var i=a[o];if(i[i.length-1]==="%"&&(n[o]=!0),i=parseFloat(i),n[o]&&(i=i/100*255),i<0||i>255)return;r.push(Math.floor(i))}var l=n[1]||n[2]||n[3],u=n[1]&&n[2]&&n[3];if(l&&!u)return;var s=a[4];if(s!==void 0){if(s=parseFloat(s),s<0||s>1)return;r.push(s)}}return r},Tg=function(e){return Sg[e.toLowerCase()]},Dg=function(e){return(Je(e)?e:null)||Tg(e)||wg(e)||Cg(e)||xg(e)},Sg={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ru=function(e){for(var r=e.map,a=e.keys,n=a.length,o=0;o<n;o++){var i=a[o];if(Ve(i))throw Error("Tried to set map with object key");o<a.length-1?(r[i]==null&&(r[i]={}),r=r[i]):r[i]=e.value}},Pu=function(e){for(var r=e.map,a=e.keys,n=a.length,o=0;o<n;o++){var i=a[o];if(Ve(i))throw Error("Tried to get map with object key");if(r=r[i],r==null)return r}return r},jn=rt?rt.performance:null,Iu=jn&&jn.now?function(){return jn.now()}:function(){return Date.now()},Lg=function(){if(rt){if(rt.requestAnimationFrame)return function(t){rt.requestAnimationFrame(t)};if(rt.mozRequestAnimationFrame)return function(t){rt.mozRequestAnimationFrame(t)};if(rt.webkitRequestAnimationFrame)return function(t){rt.webkitRequestAnimationFrame(t)};if(rt.msRequestAnimationFrame)return function(t){rt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Iu())},1e3/60)}}(),mn=function(e){return Lg(e)},Xt=Iu,Ur=9261,Fu=65599,ba=5381,Bu=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ur,a=r,n;n=e.next(),!n.done;)a=a*Fu+n.value|0;return a},La=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ur;return r*Fu+e|0},Na=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ba;return(r<<5)+r+e|0},Ng=function(e,r){return e*2097152+r},rr=function(e){return e[0]*2097152+e[1]},_a=function(e,r){return[La(e[0],r[0]),Na(e[1],r[1])]},Mg=function(e,r){var a={value:0,done:!1},n=0,o=e.length,i={next:function(){return n<o?a.value=e[n++]:a.done=!0,a}};return Bu(i,r)},br=function(e,r){var a={value:0,done:!1},n=0,o=e.length,i={next:function(){return n<o?a.value=e.charCodeAt(n++):a.done=!0,a}};return Bu(i,r)},ku=function(){return Ag(arguments)},Ag=function(e){for(var r,a=0;a<e.length;a++){var n=e[a];a===0?r=br(n):r=br(n,r)}return r},Nl=!0,Og=console.warn!=null,Rg=console.trace!=null,Si=Number.MAX_SAFE_INTEGER||9007199254740991,zu=function(){return!0},En=function(){return!1},Ml=function(){return 0},Li=function(){},nt=function(e){throw new Error(e)},Gu=function(e){if(e!==void 0)Nl=!!e;else return Nl},We=function(e){Gu()&&(Og?console.warn(e):(console.log(e),Rg&&console.trace()))},Pg=function(e){return Ie({},e)},kt=function(e){return e==null?e:Je(e)?e.slice():Ve(e)?Pg(e):e},Ig=function(e){return e.slice()},Vu=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},Fg={},Hu=function(){return Fg},gt=function(e){var r=Object.keys(e);return function(a){for(var n={},o=0;o<r.length;o++){var i=r[o],l=a?.[i];n[i]=l===void 0?e[i]:l}return n}},ur=function(e,r,a){for(var n=e.length-1;n>=0&&!(e[n]===r&&(e.splice(n,1),a));n--);},Ni=function(e){e.splice(0,e.length)},Bg=function(e,r){for(var a=0;a<r.length;a++){var n=r[a];e.push(n)}},Ft=function(e,r,a){return a&&(r=Au(a,r)),e[r]},nr=function(e,r,a,n){a&&(r=Au(a,r)),e[r]=n},kg=function(){function t(){xi(this,t),this._obj={}}return Ci(t,[{key:"set",value:function(r,a){return this._obj[r]=a,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),zt=typeof Map<"u"?Map:kg,zg="undefined",Gg=function(){function t(e){if(xi(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var a=0;a<r.length;a++)this.add(r[a])}}return Ci(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var a=this._obj;a[r]!==1&&(a[r]=1,this.size++)}},{key:"delete",value:function(r){var a=this._obj;a[r]===1&&(a[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(a){return r.has(a)})}},{key:"forEach",value:function(r,a){return this.toArray().forEach(r,a)}}]),t}(),_r=(typeof Set>"u"?"undefined":ut(Set))!==zg?Set:Gg,Nn=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Ti(e)){nt("An element must have a core reference and parameters set");return}var n=r.group;if(n==null&&(r.data&&r.data.source!=null&&r.data.target!=null?n="edges":n="nodes"),n!=="nodes"&&n!=="edges"){nt("An element must be of type `nodes` or `edges`; you specified `"+n+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?n==="edges":!!r.pannable,active:!1,classes:new _r,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),r.renderedPosition){var i=r.renderedPosition,l=e.pan(),u=e.zoom();o.position={x:(i.x-l.x)/u,y:(i.y-l.y)/u}}var s=[];Je(r.classes)?s=r.classes:Re(r.classes)&&(s=r.classes.split(/\s+/));for(var f=0,v=s.length;f<v;f++){var h=s[f];!h||h===""||o.classes.add(h)}this.createEmitter();var c=r.style||r.css;c&&(We("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(c)),(a===void 0||a)&&this.restore()},Al=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(a,n,o){var i;Ve(a)&&!Nt(a)&&(i=a,a=i.roots||i.root,n=i.visit,o=i.directed),o=arguments.length===2&&!at(n)?n:o,n=at(n)?n:function(){};for(var l=this._private.cy,u=a=Re(a)?this.filter(a):a,s=[],f=[],v={},h={},c={},g=0,d,m=this.byGroup(),p=m.nodes,y=m.edges,E=0;E<u.length;E++){var T=u[E],w=T.id();T.isNode()&&(s.unshift(T),e.bfs&&(c[w]=!0,f.push(T)),h[w]=0)}for(var x=function(){var M=e.bfs?s.shift():s.pop(),C=M.id();if(e.dfs){if(c[C])return"continue";c[C]=!0,f.push(M)}var O=h[C],S=v[C],R=S!=null?S.source():null,B=S!=null?S.target():null,z=S==null?void 0:M.same(R)?B[0]:R[0],G=void 0;if(G=n(M,S,z,g++,O),G===!0)return d=M,"break";if(G===!1)return"break";for(var k=M.connectedEdges().filter(function(U){return(!o||U.source().same(M))&&y.has(U)}),H=0;H<k.length;H++){var $=k[H],V=$.connectedNodes().filter(function(U){return!U.same(M)&&p.has(U)}),X=V.id();V.length!==0&&!c[X]&&(V=V[0],s.push(V),e.bfs&&(c[X]=!0,f.push(V)),v[X]=$,h[X]=h[C]+1)}};s.length!==0;){var D=x();if(D!=="continue"&&D==="break")break}for(var L=l.collection(),N=0;N<f.length;N++){var A=f[N],P=v[A.id()];P!=null&&L.push(P),L.push(A)}return{path:l.collection(L),found:l.collection(d)}}},Ma={breadthFirstSearch:Al({bfs:!0}),depthFirstSearch:Al({dfs:!0})};Ma.bfs=Ma.breadthFirstSearch;Ma.dfs=Ma.depthFirstSearch;var Vg=gt({root:null,weight:function(e){return 1},directed:!1}),Hg={dijkstra:function(e){if(!Ve(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var a=Vg(e),n=a.root,o=a.weight,i=a.directed,l=this,u=o,s=Re(n)?this.filter(n)[0]:n[0],f={},v={},h={},c=this.byGroup(),g=c.nodes,d=c.edges;d.unmergeBy(function(O){return O.isLoop()});for(var m=function(S){return f[S.id()]},p=function(S,R){f[S.id()]=R,y.updateItem(S)},y=new ka.default(function(O,S){return m(O)-m(S)}),E=0;E<g.length;E++){var T=g[E];f[T.id()]=T.same(s)?0:1/0,y.push(T)}for(var w=function(S,R){for(var B=(i?S.edgesTo(R):S.edgesWith(R)).intersect(d),z=1/0,G,k=0;k<B.length;k++){var H=B[k],$=u(H);($<z||!G)&&(z=$,G=H)}return{edge:G,dist:z}};y.size()>0;){var x=y.pop(),D=m(x),L=x.id();if(h[L]=D,D!==1/0)for(var N=x.neighborhood().intersect(g),A=0;A<N.length;A++){var P=N[A],b=P.id(),M=w(x,P),C=D+M.dist;C<m(P)&&(p(P,C),v[b]={node:x,edge:M.edge})}}return{distanceTo:function(S){var R=Re(S)?g.filter(S)[0]:S[0];return h[R.id()]},pathTo:function(S){var R=Re(S)?g.filter(S)[0]:S[0],B=[],z=R,G=z.id();if(R.length>0)for(B.unshift(R);v[G];){var k=v[G];B.unshift(k.edge),B.unshift(k.node),z=k.node,G=z.id()}return l.spawn(B)}}}},Ug={kruskal:function(e){e=e||function(E){return 1};for(var r=this.byGroup(),a=r.nodes,n=r.edges,o=a.length,i=new Array(o),l=a,u=function(T){for(var w=0;w<i.length;w++){var x=i[w];if(x.has(T))return w}},s=0;s<o;s++)i[s]=this.spawn(a[s]);for(var f=n.sort(function(E,T){return e(E)-e(T)}),v=0;v<f.length;v++){var h=f[v],c=h.source()[0],g=h.target()[0],d=u(c),m=u(g),p=i[d],y=i[m];d!==m&&(l.merge(h),p.merge(y),i.splice(m,1))}return l}},Yg=gt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),qg={aStar:function(e){var r=this.cy(),a=Yg(e),n=a.root,o=a.goal,i=a.heuristic,l=a.directed,u=a.weight;n=r.collection(n)[0],o=r.collection(o)[0];var s=n.id(),f=o.id(),v={},h={},c={},g=new ka.default(function(G,k){return h[G.id()]-h[k.id()]}),d=new _r,m={},p={},y=function(k,H){g.push(k),d.add(H)},E,T,w=function(){E=g.pop(),T=E.id(),d.delete(T)},x=function(k){return d.has(k)};y(n,s),v[s]=0,h[s]=i(n);for(var D=0;g.size()>0;){if(w(),D++,T===f){for(var L=[],N=o,A=f,P=p[A];L.unshift(N),P!=null&&L.unshift(P),N=m[A],N!=null;)A=N.id(),P=p[A];return{found:!0,distance:v[T],path:this.spawn(L),steps:D}}c[T]=!0;for(var b=E._private.edges,M=0;M<b.length;M++){var C=b[M];if(this.hasElementWithId(C.id())&&!(l&&C.data("source")!==T)){var O=C.source(),S=C.target(),R=O.id()!==T?O:S,B=R.id();if(this.hasElementWithId(B)&&!c[B]){var z=v[T]+u(C);if(!x(B)){v[B]=z,h[B]=z+i(R),y(R,B),m[B]=E,p[B]=C;continue}z<v[B]&&(v[B]=z,h[B]=z+i(R),m[B]=E,p[B]=C)}}}}return{found:!1,distance:void 0,path:void 0,steps:D}}},Wg=gt({weight:function(e){return 1},directed:!1}),Xg={floydWarshall:function(e){for(var r=this.cy(),a=Wg(e),n=a.weight,o=a.directed,i=n,l=this.byGroup(),u=l.nodes,s=l.edges,f=u.length,v=f*f,h=function($){return u.indexOf($)},c=function($){return u[$]},g=new Array(v),d=0;d<v;d++){var m=d%f,p=(d-m)/f;p===m?g[d]=0:g[d]=1/0}for(var y=new Array(v),E=new Array(v),T=0;T<s.length;T++){var w=s[T],x=w.source()[0],D=w.target()[0];if(x!==D){var L=h(x),N=h(D),A=L*f+N,P=i(w);if(g[A]>P&&(g[A]=P,y[A]=N,E[A]=w),!o){var b=N*f+L;!o&&g[b]>P&&(g[b]=P,y[b]=L,E[b]=w)}}}for(var M=0;M<f;M++)for(var C=0;C<f;C++)for(var O=C*f+M,S=0;S<f;S++){var R=C*f+S,B=M*f+S;g[O]+g[B]<g[R]&&(g[R]=g[O]+g[B],y[R]=y[O])}var z=function($){return(Re($)?r.filter($):$)[0]},G=function($){return h(z($))},k={distance:function($,V){var X=G($),U=G(V);return g[X*f+U]},path:function($,V){var X=G($),U=G(V),F=c(X);if(X===U)return F.collection();if(y[X*f+U]==null)return r.collection();var Y=r.collection(),q=X,K;for(Y.merge(F);X!==U;)q=X,X=y[X*f+U],K=E[q*f+X],Y.merge(K),Y.merge(c(X));return Y}};return k}},$g=gt({weight:function(e){return 1},directed:!1,root:null}),Kg={bellmanFord:function(e){var r=this,a=$g(e),n=a.weight,o=a.directed,i=a.root,l=n,u=this,s=this.cy(),f=this.byGroup(),v=f.edges,h=f.nodes,c=h.length,g=new zt,d=!1,m=[];i=s.collection(i)[0],v.unmergeBy(function(ie){return ie.isLoop()});for(var p=v.length,y=function(_){var ue=g.get(_.id());return ue||(ue={},g.set(_.id(),ue)),ue},E=function(_){return(Re(_)?s.$(_):_)[0]},T=function(_){return y(E(_)).dist},w=function(_){for(var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,Ee=E(_),me=[],pe=Ee;;){if(pe==null)return r.spawn();var re=y(pe),I=re.edge,Z=re.pred;if(me.unshift(pe[0]),pe.same(ue)&&me.length>0)break;I!=null&&me.unshift(I),pe=Z}return u.spawn(me)},x=0;x<c;x++){var D=h[x],L=y(D);D.same(i)?L.dist=0:L.dist=1/0,L.pred=null,L.edge=null}for(var N=!1,A=function(_,ue,Ee,me,pe,re){var I=me.dist+re;I<pe.dist&&!Ee.same(me.edge)&&(pe.dist=I,pe.pred=_,pe.edge=Ee,N=!0)},P=1;P<c;P++){N=!1;for(var b=0;b<p;b++){var M=v[b],C=M.source(),O=M.target(),S=l(M),R=y(C),B=y(O);A(C,O,M,R,B,S),o||A(O,C,M,B,R,S)}if(!N)break}if(N)for(var z=[],G=0;G<p;G++){var k=v[G],H=k.source(),$=k.target(),V=l(k),X=y(H).dist,U=y($).dist;if(X+V<U||!o&&U+V<X)if(d||(We("Graph contains a negative weight cycle for Bellman-Ford"),d=!0),e.findNegativeWeightCycles!==!1){var F=[];X+V<U&&F.push(H),!o&&U+V<X&&F.push($);for(var Y=F.length,q=0;q<Y;q++){var K=F[q],j=[K];j.push(y(K).edge);for(var ge=y(K).pred;j.indexOf(ge)===-1;)j.push(ge),j.push(y(ge).edge),ge=y(ge).pred;j=j.slice(j.indexOf(ge));for(var Ce=j[0].id(),Q=0,le=2;le<j.length;le+=2)j[le].id()<Ce&&(Ce=j[le].id(),Q=le);j=j.slice(Q).concat(j.slice(0,Q)),j.push(j[0]);var de=j.map(function(ie){return ie.id()}).join(",");z.indexOf(de)===-1&&(m.push(u.spawn(j)),z.push(de))}}else break}return{distanceTo:T,pathTo:w,hasNegativeWeightCycle:d,negativeWeightCycles:m}}},Zg=Math.sqrt(2),Qg=function(e,r,a){a.length===0&&nt("Karger-Stein must be run on a connected (sub)graph");for(var n=a[e],o=n[1],i=n[2],l=r[o],u=r[i],s=a,f=s.length-1;f>=0;f--){var v=s[f],h=v[1],c=v[2];(r[h]===l&&r[c]===u||r[h]===u&&r[c]===l)&&s.splice(f,1)}for(var g=0;g<s.length;g++){var d=s[g];d[1]===u?(s[g]=d.slice(),s[g][1]=l):d[2]===u&&(s[g]=d.slice(),s[g][2]=l)}for(var m=0;m<r.length;m++)r[m]===u&&(r[m]=l);return s},ei=function(e,r,a,n){for(;a>n;){var o=Math.floor(Math.random()*r.length);r=Qg(o,e,r),a--}return r},Jg={kargerStein:function(){var e=this,r=this.byGroup(),a=r.nodes,n=r.edges;n.unmergeBy(function(B){return B.isLoop()});var o=a.length,i=n.length,l=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),u=Math.floor(o/Zg);if(o<2){nt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var s=[],f=0;f<i;f++){var v=n[f];s.push([f,a.indexOf(v.source()),a.indexOf(v.target())])}for(var h=1/0,c=[],g=new Array(o),d=new Array(o),m=new Array(o),p=function(z,G){for(var k=0;k<o;k++)G[k]=z[k]},y=0;y<=l;y++){for(var E=0;E<o;E++)d[E]=E;var T=ei(d,s.slice(),o,u),w=T.slice();p(d,m);var x=ei(d,T,u,2),D=ei(m,w,u,2);x.length<=D.length&&x.length<h?(h=x.length,c=x,p(d,g)):D.length<=x.length&&D.length<h&&(h=D.length,c=D,p(m,g))}for(var L=this.spawn(c.map(function(B){return n[B[0]]})),N=this.spawn(),A=this.spawn(),P=g[0],b=0;b<g.length;b++){var M=g[b],C=a[b];M===P?N.merge(C):A.merge(C)}var O=function(z){var G=e.spawn();return z.forEach(function(k){G.merge(k),k.connectedEdges().forEach(function(H){e.contains(H)&&!L.contains(H)&&G.merge(H)})}),G},S=[O(N),O(A)],R={cut:L,components:S,partition1:N,partition2:A};return R}},_g=function(e){return{x:e.x,y:e.y}},Mn=function(e,r,a){return{x:e.x*r+a.x,y:e.y*r+a.y}},Uu=function(e,r,a){return{x:(e.x-a.x)/r,y:(e.y-a.y)/r}},Yr=function(e){return{x:e[0],y:e[1]}},jg=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,n=1/0,o=r;o<a;o++){var i=e[o];isFinite(i)&&(n=Math.min(i,n))}return n},ep=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,n=-1/0,o=r;o<a;o++){var i=e[o];isFinite(i)&&(n=Math.max(i,n))}return n},tp=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,n=0,o=0,i=r;i<a;i++){var l=e[i];isFinite(l)&&(n+=l,o++)}return n/o},rp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;n?e=e.slice(r,a):(a<e.length&&e.splice(a,e.length-a),r>0&&e.splice(0,r));for(var l=0,u=e.length-1;u>=0;u--){var s=e[u];i?isFinite(s)||(e[u]=-1/0,l++):e.splice(u,1)}o&&e.sort(function(h,c){return h-c});var f=e.length,v=Math.floor(f/2);return f%2!==0?e[v+1+l]:(e[v-1+l]+e[v+l])/2},ap=function(e){return Math.PI*e/180},ja=function(e,r){return Math.atan2(r,e)-Math.PI/2},Mi=Math.log2||function(t){return Math.log(t)/Math.log(2)},Yu=function(e){return e>0?1:e<0?-1:0},wr=function(e,r){return Math.sqrt(yr(e,r))},yr=function(e,r){var a=r.x-e.x,n=r.y-e.y;return a*a+n*n},np=function(e){for(var r=e.length,a=0,n=0;n<r;n++)a+=e[n];for(var o=0;o<r;o++)e[o]=e[o]/a;return e},vt=function(e,r,a,n){return(1-n)*(1-n)*e+2*(1-n)*n*r+n*n*a},Wr=function(e,r,a,n){return{x:vt(e.x,r.x,a.x,n),y:vt(e.y,r.y,a.y,n)}},ip=function(e,r,a,n){var o={x:r.x-e.x,y:r.y-e.y},i=wr(e,r),l={x:o.x/i,y:o.y/i};return a=a??0,n=n??a*i,{x:e.x+l.x*n,y:e.y+l.y*n}},Aa=function(e,r,a){return Math.max(e,Math.min(a,r))},Lt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},op=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},sp=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},lp=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},up=function(e,r,a){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,a),e.y2=Math.max(e.y2,a),e.h=e.y2-e.y1},fn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ti=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],a,n,o,i;if(r.length===1)a=n=o=i=r[0];else if(r.length===2)a=o=r[0],i=n=r[1];else if(r.length===4){var l=Wt(r,4);a=l[0],n=l[1],o=l[2],i=l[3]}return e.x1-=i,e.x2+=n,e.y1-=a,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ol=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Ai=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Zr=function(e,r,a){return e.x1<=r&&r<=e.x2&&e.y1<=a&&a<=e.y2},fp=function(e,r){return Zr(e,r.x,r.y)},qu=function(e,r){return Zr(e,r.x1,r.y1)&&Zr(e,r.x2,r.y2)},Wu=function(e,r,a,n,o,i,l){var u=Va(o,i),s=o/2,f=i/2,v;{var h=a-s+u-l,c=n-f-l,g=a+s-u+l,d=c;if(v=ir(e,r,a,n,h,c,g,d,!1),v.length>0)return v}{var m=a+s+l,p=n-f+u-l,y=m,E=n+f-u+l;if(v=ir(e,r,a,n,m,p,y,E,!1),v.length>0)return v}{var T=a-s+u-l,w=n+f+l,x=a+s-u+l,D=w;if(v=ir(e,r,a,n,T,w,x,D,!1),v.length>0)return v}{var L=a-s-l,N=n-f+u-l,A=L,P=n+f-u+l;if(v=ir(e,r,a,n,L,N,A,P,!1),v.length>0)return v}var b;{var M=a-s+u,C=n-f+u;if(b=wa(e,r,a,n,M,C,u+l),b.length>0&&b[0]<=M&&b[1]<=C)return[b[0],b[1]]}{var O=a+s-u,S=n-f+u;if(b=wa(e,r,a,n,O,S,u+l),b.length>0&&b[0]>=O&&b[1]<=S)return[b[0],b[1]]}{var R=a+s-u,B=n+f-u;if(b=wa(e,r,a,n,R,B,u+l),b.length>0&&b[0]>=R&&b[1]>=B)return[b[0],b[1]]}{var z=a-s+u,G=n+f-u;if(b=wa(e,r,a,n,z,G,u+l),b.length>0&&b[0]<=z&&b[1]>=G)return[b[0],b[1]]}return[]},vp=function(e,r,a,n,o,i,l){var u=l,s=Math.min(a,o),f=Math.max(a,o),v=Math.min(n,i),h=Math.max(n,i);return s-u<=e&&e<=f+u&&v-u<=r&&r<=h+u},hp=function(e,r,a,n,o,i,l,u,s){var f={x1:Math.min(a,l,o)-s,x2:Math.max(a,l,o)+s,y1:Math.min(n,u,i)-s,y2:Math.max(n,u,i)+s};return!(e<f.x1||e>f.x2||r<f.y1||r>f.y2)},cp=function(e,r,a,n){a-=n;var o=r*r-4*e*a;if(o<0)return[];var i=Math.sqrt(o),l=2*e,u=(-r+i)/l,s=(-r-i)/l;return[u,s]},dp=function(e,r,a,n,o){var i=1e-5;e===0&&(e=i),r/=e,a/=e,n/=e;var l,u,s,f,v,h,c,g;if(u=(3*a-r*r)/9,s=-(27*n)+r*(9*a-2*(r*r)),s/=54,l=u*u*u+s*s,o[1]=0,c=r/3,l>0){v=s+Math.sqrt(l),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),h=s-Math.sqrt(l),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),o[0]=-c+v+h,c+=(v+h)/2,o[4]=o[2]=-c,c=Math.sqrt(3)*(-h+v)/2,o[3]=c,o[5]=-c;return}if(o[5]=o[3]=0,l===0){g=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),o[0]=-c+2*g,o[4]=o[2]=-(g+c);return}u=-u,f=u*u*u,f=Math.acos(s/Math.sqrt(f)),g=2*Math.sqrt(u),o[0]=-c+g*Math.cos(f/3),o[2]=-c+g*Math.cos((f+2*Math.PI)/3),o[4]=-c+g*Math.cos((f+4*Math.PI)/3)},gp=function(e,r,a,n,o,i,l,u){var s=1*a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l+n*n-4*n*i+2*n*u+4*i*i-4*i*u+u*u,f=1*9*a*o-3*a*a-3*a*l-6*o*o+3*o*l+9*n*i-3*n*n-3*n*u-6*i*i+3*i*u,v=1*3*a*a-6*a*o+a*l-a*e+2*o*o+2*o*e-l*e+3*n*n-6*n*i+n*u-n*r+2*i*i+2*i*r-u*r,h=1*a*o-a*a+a*e-o*e+n*i-n*n+n*r-i*r,c=[];dp(s,f,v,h,c);for(var g=1e-7,d=[],m=0;m<6;m+=2)Math.abs(c[m+1])<g&&c[m]>=0&&c[m]<=1&&d.push(c[m]);d.push(1),d.push(0);for(var p=-1,y,E,T,w=0;w<d.length;w++)y=Math.pow(1-d[w],2)*a+2*(1-d[w])*d[w]*o+d[w]*d[w]*l,E=Math.pow(1-d[w],2)*n+2*(1-d[w])*d[w]*i+d[w]*d[w]*u,T=Math.pow(y-e,2)+Math.pow(E-r,2),p>=0?T<p&&(p=T):p=T;return p},pp=function(e,r,a,n,o,i){var l=[e-a,r-n],u=[o-a,i-n],s=u[0]*u[0]+u[1]*u[1],f=l[0]*l[0]+l[1]*l[1],v=l[0]*u[0]+l[1]*u[1],h=v*v/s;return v<0?f:h>s?(e-o)*(e-o)+(r-i)*(r-i):f-h},St=function(e,r,a){for(var n,o,i,l,u,s=0,f=0;f<a.length/2;f++)if(n=a[f*2],o=a[f*2+1],f+1<a.length/2?(i=a[(f+1)*2],l=a[(f+1)*2+1]):(i=a[(f+1-a.length/2)*2],l=a[(f+1-a.length/2)*2+1]),!(n==e&&i==e))if(n>=e&&e>=i||n<=e&&e<=i)u=(e-n)/(i-n)*(l-o)+o,u>r&&s++;else continue;return s%2!==0},$t=function(e,r,a,n,o,i,l,u,s){var f=new Array(a.length),v;u[0]!=null?(v=Math.atan(u[1]/u[0]),u[0]<0?v=v+Math.PI/2:v=-v-Math.PI/2):v=u;for(var h=Math.cos(-v),c=Math.sin(-v),g=0;g<f.length/2;g++)f[g*2]=i/2*(a[g*2]*h-a[g*2+1]*c),f[g*2+1]=l/2*(a[g*2+1]*h+a[g*2]*c),f[g*2]+=n,f[g*2+1]+=o;var d;if(s>0){var m=$u(f,-s);d=Xu(m)}else d=f;return St(e,r,d)},yp=function(e,r,a,n,o,i,l){for(var u=new Array(a.length),s=i/2,f=l/2,v=Oi(i,l),h=v*v,c=0;c<a.length/4;c++){var g=void 0,d=void 0;c===0?g=a.length-2:g=c*4-2,d=c*4+2;var m=n+s*a[c*4],p=o+f*a[c*4+1],y=-a[g]*a[d]-a[g+1]*a[d+1],E=v/Math.tan(Math.acos(y)/2),T=m-E*a[g],w=p-E*a[g+1],x=m+E*a[d],D=p+E*a[d+1];u[c*4]=T,u[c*4+1]=w,u[c*4+2]=x,u[c*4+3]=D;var L=a[g+1],N=-a[g],A=L*a[d]+N*a[d+1];A<0&&(L*=-1,N*=-1);var P=T+L*v,b=w+N*v,M=Math.pow(P-e,2)+Math.pow(b-r,2);if(M<=h)return!0}return St(e,r,u)},Xu=function(e){for(var r=new Array(e.length/2),a,n,o,i,l,u,s,f,v=0;v<e.length/4;v++){a=e[v*4],n=e[v*4+1],o=e[v*4+2],i=e[v*4+3],v<e.length/4-1?(l=e[(v+1)*4],u=e[(v+1)*4+1],s=e[(v+1)*4+2],f=e[(v+1)*4+3]):(l=e[0],u=e[1],s=e[2],f=e[3]);var h=ir(a,n,o,i,l,u,s,f,!0);r[v*2]=h[0],r[v*2+1]=h[1]}return r},$u=function(e,r){for(var a=new Array(e.length*2),n,o,i,l,u=0;u<e.length/2;u++){n=e[u*2],o=e[u*2+1],u<e.length/2-1?(i=e[(u+1)*2],l=e[(u+1)*2+1]):(i=e[0],l=e[1]);var s=l-o,f=-(i-n),v=Math.sqrt(s*s+f*f),h=s/v,c=f/v;a[u*4]=n+h*r,a[u*4+1]=o+c*r,a[u*4+2]=i+h*r,a[u*4+3]=l+c*r}return a},mp=function(e,r,a,n,o,i){var l=a-e,u=n-r;l/=o,u/=i;var s=Math.sqrt(l*l+u*u),f=s-1;if(f<0)return[];var v=f/s;return[(a-e)*v+e,(n-r)*v+r]},Er=function(e,r,a,n,o,i,l){return e-=o,r-=i,e/=a/2+l,r/=n/2+l,e*e+r*r<=1},wa=function(e,r,a,n,o,i,l){var u=[a-e,n-r],s=[e-o,r-i],f=u[0]*u[0]+u[1]*u[1],v=2*(s[0]*u[0]+s[1]*u[1]),h=s[0]*s[0]+s[1]*s[1]-l*l,c=v*v-4*f*h;if(c<0)return[];var g=(-v+Math.sqrt(c))/(2*f),d=(-v-Math.sqrt(c))/(2*f),m=Math.min(g,d),p=Math.max(g,d),y=[];if(m>=0&&m<=1&&y.push(m),p>=0&&p<=1&&y.push(p),y.length===0)return[];var E=y[0]*u[0]+e,T=y[0]*u[1]+r;if(y.length>1){if(y[0]==y[1])return[E,T];var w=y[1]*u[0]+e,x=y[1]*u[1]+r;return[E,T,w,x]}else return[E,T]},ri=function(e,r,a){return r<=e&&e<=a||a<=e&&e<=r?e:e<=r&&r<=a||a<=r&&r<=e?r:a},ir=function(e,r,a,n,o,i,l,u,s){var f=e-o,v=a-e,h=l-o,c=r-i,g=n-r,d=u-i,m=h*c-d*f,p=v*c-g*f,y=d*v-h*g;if(y!==0){var E=m/y,T=p/y,w=.001,x=0-w,D=1+w;return x<=E&&E<=D&&x<=T&&T<=D?[e+E*v,r+E*g]:s?[e+E*v,r+E*g]:[]}else return m===0||p===0?ri(e,a,l)===l?[l,u]:ri(e,a,o)===o?[o,i]:ri(o,l,a)===a?[a,n]:[]:[]},Oa=function(e,r,a,n,o,i,l,u){var s=[],f,v=new Array(a.length),h=!0;i==null&&(h=!1);var c;if(h){for(var g=0;g<v.length/2;g++)v[g*2]=a[g*2]*i+n,v[g*2+1]=a[g*2+1]*l+o;if(u>0){var d=$u(v,-u);c=Xu(d)}else c=v}else c=a;for(var m,p,y,E,T=0;T<c.length/2;T++)m=c[T*2],p=c[T*2+1],T<c.length/2-1?(y=c[(T+1)*2],E=c[(T+1)*2+1]):(y=c[0],E=c[1]),f=ir(e,r,n,o,m,p,y,E),f.length!==0&&s.push(f[0],f[1]);return s},Ep=function(e,r,a,n,o,i,l,u){for(var s=[],f,v=new Array(a.length),h=i/2,c=l/2,g=Oi(i,l),d=0;d<a.length/4;d++){var m=void 0,p=void 0;d===0?m=a.length-2:m=d*4-2,p=d*4+2;var y=n+h*a[d*4],E=o+c*a[d*4+1],T=-a[m]*a[p]-a[m+1]*a[p+1],w=g/Math.tan(Math.acos(T)/2),x=y-w*a[m],D=E-w*a[m+1],L=y+w*a[p],N=E+w*a[p+1];d===0?(v[a.length-2]=x,v[a.length-1]=D):(v[d*4-2]=x,v[d*4-1]=D),v[d*4]=L,v[d*4+1]=N;var A=a[m+1],P=-a[m],b=A*a[p]+P*a[p+1];b<0&&(A*=-1,P*=-1);var M=x+A*g,C=D+P*g;f=wa(e,r,n,o,M,C,g),f.length!==0&&s.push(f[0],f[1])}for(var O=0;O<v.length/4;O++)f=ir(e,r,n,o,v[O*4],v[O*4+1],v[O*4+2],v[O*4+3],!1),f.length!==0&&s.push(f[0],f[1]);if(s.length>2){for(var S=[s[0],s[1]],R=Math.pow(S[0]-e,2)+Math.pow(S[1]-r,2),B=1;B<s.length/2;B++){var z=Math.pow(s[B*2]-e,2)+Math.pow(s[B*2+1]-r,2);z<=R&&(S[0]=s[B*2],S[1]=s[B*2+1],R=z)}return S}return s},en=function(e,r,a){var n=[e[0]-r[0],e[1]-r[1]],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),i=(o-a)/o;return i<0&&(i=1e-5),[r[0]+i*n[0],r[1]+i*n[1]]},Ct=function(e,r){var a=fi(e,r);return a=Ku(a),a},Ku=function(e){for(var r,a,n=e.length/2,o=1/0,i=1/0,l=-1/0,u=-1/0,s=0;s<n;s++)r=e[2*s],a=e[2*s+1],o=Math.min(o,r),l=Math.max(l,r),i=Math.min(i,a),u=Math.max(u,a);for(var f=2/(l-o),v=2/(u-i),h=0;h<n;h++)r=e[2*h]=e[2*h]*f,a=e[2*h+1]=e[2*h+1]*v,o=Math.min(o,r),l=Math.max(l,r),i=Math.min(i,a),u=Math.max(u,a);if(i<-1)for(var c=0;c<n;c++)a=e[2*c+1]=e[2*c+1]+(-1-i);return e},fi=function(e,r){var a=1/e*2*Math.PI,n=e%2===0?Math.PI/2+a/2:Math.PI/2;n+=r;for(var o=new Array(e*2),i,l=0;l<e;l++)i=l*a+n,o[2*l]=Math.cos(i),o[2*l+1]=Math.sin(-i);return o},Va=function(e,r){return Math.min(e/4,r/4,8)},Oi=function(e,r){return Math.min(e/10,r/10,8)},Zu=function(){return 8},bp=function(e,r,a){return[e-2*r+a,2*(r-e),e]},vi=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},wp=gt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),xp={pageRank:function(e){for(var r=wp(e),a=r.dampingFactor,n=r.precision,o=r.iterations,i=r.weight,l=this._private.cy,u=this.byGroup(),s=u.nodes,f=u.edges,v=s.length,h=v*v,c=f.length,g=new Array(h),d=new Array(v),m=(1-a)/v,p=0;p<v;p++){for(var y=0;y<v;y++){var E=p*v+y;g[E]=0}d[p]=0}for(var T=0;T<c;T++){var w=f[T],x=w.data("source"),D=w.data("target");if(x!==D){var L=s.indexOfId(x),N=s.indexOfId(D),A=i(w),P=N*v+L;g[P]+=A,d[L]+=A}}for(var b=1/v+m,M=0;M<v;M++)if(d[M]===0)for(var C=0;C<v;C++){var O=C*v+M;g[O]=b}else for(var S=0;S<v;S++){var R=S*v+M;g[R]=g[R]/d[M]+m}for(var B=new Array(v),z=new Array(v),G,k=0;k<v;k++)B[k]=1;for(var H=0;H<o;H++){for(var $=0;$<v;$++)z[$]=0;for(var V=0;V<v;V++)for(var X=0;X<v;X++){var U=V*v+X;z[V]+=g[U]*B[X]}np(z),G=B,B=z,z=G;for(var F=0,Y=0;Y<v;Y++){var q=G[Y]-B[Y];F+=q*q}if(F<n)break}var K={rank:function(ge){return ge=l.collection(ge)[0],B[s.indexOf(ge)]}};return K}},Rl=gt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Xr={degreeCentralityNormalized:function(e){e=Rl(e);var r=this.cy(),a=this.nodes(),n=a.length;if(e.directed){for(var f={},v={},h=0,c=0,g=0;g<n;g++){var d=a[g],m=d.id();e.root=d;var p=this.degreeCentrality(e);h<p.indegree&&(h=p.indegree),c<p.outdegree&&(c=p.outdegree),f[m]=p.indegree,v[m]=p.outdegree}return{indegree:function(E){return h==0?0:(Re(E)&&(E=r.filter(E)),f[E.id()]/h)},outdegree:function(E){return c===0?0:(Re(E)&&(E=r.filter(E)),v[E.id()]/c)}}}else{for(var o={},i=0,l=0;l<n;l++){var u=a[l];e.root=u;var s=this.degreeCentrality(e);i<s.degree&&(i=s.degree),o[u.id()]=s.degree}return{degree:function(E){return i===0?0:(Re(E)&&(E=r.filter(E)),o[E.id()]/i)}}}},degreeCentrality:function(e){e=Rl(e);var r=this.cy(),a=this,n=e,o=n.root,i=n.weight,l=n.directed,u=n.alpha;if(o=r.collection(o)[0],l){for(var c=o.connectedEdges(),g=c.filter(function(x){return x.target().same(o)&&a.has(x)}),d=c.filter(function(x){return x.source().same(o)&&a.has(x)}),m=g.length,p=d.length,y=0,E=0,T=0;T<g.length;T++)y+=i(g[T]);for(var w=0;w<d.length;w++)E+=i(d[w]);return{indegree:Math.pow(m,1-u)*Math.pow(y,u),outdegree:Math.pow(p,1-u)*Math.pow(E,u)}}else{for(var s=o.connectedEdges().intersection(a),f=s.length,v=0,h=0;h<s.length;h++)v+=i(s[h]);return{degree:Math.pow(f,1-u)*Math.pow(v,u)}}}};Xr.dc=Xr.degreeCentrality;Xr.dcn=Xr.degreeCentralityNormalised=Xr.degreeCentralityNormalized;var Pl=gt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),$r={closenessCentralityNormalized:function(e){for(var r=Pl(e),a=r.harmonic,n=r.weight,o=r.directed,i=this.cy(),l={},u=0,s=this.nodes(),f=this.floydWarshall({weight:n,directed:o}),v=0;v<s.length;v++){for(var h=0,c=s[v],g=0;g<s.length;g++)if(v!==g){var d=f.distance(c,s[g]);a?h+=1/d:h+=d}a||(h=1/h),u<h&&(u=h),l[c.id()]=h}return{closeness:function(p){return u==0?0:(Re(p)?p=i.filter(p)[0].id():p=p.id(),l[p]/u)}}},closenessCentrality:function(e){var r=Pl(e),a=r.root,n=r.weight,o=r.directed,i=r.harmonic;a=this.filter(a)[0];for(var l=this.dijkstra({root:a,weight:n,directed:o}),u=0,s=this.nodes(),f=0;f<s.length;f++){var v=s[f];if(!v.same(a)){var h=l.distanceTo(v);i?u+=1/h:u+=h}}return i?u:1/u}};$r.cc=$r.closenessCentrality;$r.ccn=$r.closenessCentralityNormalised=$r.closenessCentralityNormalized;var Cp=gt({weight:null,directed:!1}),hi={betweennessCentrality:function(e){for(var r=Cp(e),a=r.directed,n=r.weight,o=n!=null,i=this.cy(),l=this.nodes(),u={},s={},f=0,v={set:function(E,T){s[E]=T,T>f&&(f=T)},get:function(E){return s[E]}},h=0;h<l.length;h++){var c=l[h],g=c.id();a?u[g]=c.outgoers().nodes():u[g]=c.openNeighborhood().nodes(),v.set(g,0)}for(var d=function(E){for(var T=l[E].id(),w=[],x={},D={},L={},N=new ka.default(function(X,U){return L[X]-L[U]}),A=0;A<l.length;A++){var P=l[A].id();x[P]=[],D[P]=0,L[P]=1/0}for(D[T]=1,L[T]=0,N.push(T);!N.empty();){var b=N.pop();if(w.push(b),o)for(var M=0;M<u[b].length;M++){var C=u[b][M],O=i.getElementById(b),S=void 0;O.edgesTo(C).length>0?S=O.edgesTo(C)[0]:S=C.edgesTo(O)[0];var R=n(S);C=C.id(),L[C]>L[b]+R&&(L[C]=L[b]+R,N.nodes.indexOf(C)<0?N.push(C):N.updateItem(C),D[C]=0,x[C]=[]),L[C]==L[b]+R&&(D[C]=D[C]+D[b],x[C].push(b))}else for(var B=0;B<u[b].length;B++){var z=u[b][B].id();L[z]==1/0&&(N.push(z),L[z]=L[b]+1),L[z]==L[b]+1&&(D[z]=D[z]+D[b],x[z].push(b))}}for(var G={},k=0;k<l.length;k++)G[l[k].id()]=0;for(;w.length>0;){for(var H=w.pop(),$=0;$<x[H].length;$++){var V=x[H][$];G[V]=G[V]+D[V]/D[H]*(1+G[H])}H!=l[E].id()&&v.set(H,v.get(H)+G[H])}},m=0;m<l.length;m++)d(m);var p={betweenness:function(E){var T=i.collection(E).id();return v.get(T)},betweennessNormalized:function(E){if(f==0)return 0;var T=i.collection(E).id();return v.get(T)/f}};return p.betweennessNormalised=p.betweennessNormalized,p}};hi.bc=hi.betweennessCentrality;var Tp=gt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Dp=function(e){return Tp(e)},Sp=function(e,r){for(var a=0,n=0;n<r.length;n++)a+=r[n](e);return a},Lp=function(e,r,a){for(var n=0;n<r;n++)e[n*r+n]=a},Qu=function(e,r){for(var a,n=0;n<r;n++){a=0;for(var o=0;o<r;o++)a+=e[o*r+n];for(var i=0;i<r;i++)e[i*r+n]=e[i*r+n]/a}},Np=function(e,r,a){for(var n=new Array(a*a),o=0;o<a;o++){for(var i=0;i<a;i++)n[o*a+i]=0;for(var l=0;l<a;l++)for(var u=0;u<a;u++)n[o*a+u]+=e[o*a+l]*r[l*a+u]}return n},Mp=function(e,r,a){for(var n=e.slice(0),o=1;o<a;o++)e=Np(e,n,r);return e},Ap=function(e,r,a){for(var n=new Array(r*r),o=0;o<r*r;o++)n[o]=Math.pow(e[o],a);return Qu(n,r),n},Op=function(e,r,a,n){for(var o=0;o<a;o++){var i=Math.round(e[o]*Math.pow(10,n))/Math.pow(10,n),l=Math.round(r[o]*Math.pow(10,n))/Math.pow(10,n);if(i!==l)return!1}return!0},Rp=function(e,r,a,n){for(var o=[],i=0;i<r;i++){for(var l=[],u=0;u<r;u++)Math.round(e[i*r+u]*1e3)/1e3>0&&l.push(a[u]);l.length!==0&&o.push(n.collection(l))}return o},Pp=function(e,r){for(var a=0;a<e.length;a++)if(!r[a]||e[a].id()!==r[a].id())return!1;return!0},Ip=function(e){for(var r=0;r<e.length;r++)for(var a=0;a<e.length;a++)r!=a&&Pp(e[r],e[a])&&e.splice(a,1);return e},Il=function(e){for(var r=this.nodes(),a=this.edges(),n=this.cy(),o=Dp(e),i={},l=0;l<r.length;l++)i[r[l].id()]=l;for(var u=r.length,s=u*u,f=new Array(s),v,h=0;h<s;h++)f[h]=0;for(var c=0;c<a.length;c++){var g=a[c],d=i[g.source().id()],m=i[g.target().id()],p=Sp(g,o.attributes);f[d*u+m]+=p,f[m*u+d]+=p}Lp(f,u,o.multFactor),Qu(f,u);for(var y=!0,E=0;y&&E<o.maxIterations;)y=!1,v=Mp(f,u,o.expandFactor),f=Ap(v,u,o.inflateFactor),Op(f,v,s,4)||(y=!0),E++;var T=Rp(f,u,r,n);return T=Ip(T),T},Fp={markovClustering:Il,mcl:Il},Bp=function(e){return e},Ju=function(e,r){return Math.abs(r-e)},Fl=function(e,r,a){return e+Ju(r,a)},Bl=function(e,r,a){return e+Math.pow(a-r,2)},kp=function(e){return Math.sqrt(e)},zp=function(e,r,a){return Math.max(e,Ju(r,a))},pa=function(e,r,a,n,o){for(var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Bp,l=n,u,s,f=0;f<e;f++)u=r(f),s=a(f),l=o(l,u,s);return i(l)},Qr={euclidean:function(e,r,a){return e>=2?pa(e,r,a,0,Bl,kp):pa(e,r,a,0,Fl)},squaredEuclidean:function(e,r,a){return pa(e,r,a,0,Bl)},manhattan:function(e,r,a){return pa(e,r,a,0,Fl)},max:function(e,r,a){return pa(e,r,a,-1/0,zp)}};Qr["squared-euclidean"]=Qr.squaredEuclidean;Qr.squaredeuclidean=Qr.squaredEuclidean;function An(t,e,r,a,n,o){var i;return at(t)?i=t:i=Qr[t]||Qr.euclidean,e===0&&at(t)?i(n,o):i(e,r,a,n,o)}var Gp=gt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ri=function(e){return Gp(e)},bn=function(e,r,a,n,o){var i=o!=="kMedoids",l=i?function(v){return a[v]}:function(v){return n[v](a)},u=function(h){return n[h](r)},s=a,f=r;return An(e,n.length,l,u,s,f)},ai=function(e,r,a){for(var n=a.length,o=new Array(n),i=new Array(n),l=new Array(r),u=null,s=0;s<n;s++)o[s]=e.min(a[s]).value,i[s]=e.max(a[s]).value;for(var f=0;f<r;f++){u=[];for(var v=0;v<n;v++)u[v]=Math.random()*(i[v]-o[v])+o[v];l[f]=u}return l},_u=function(e,r,a,n,o){for(var i=1/0,l=0,u=0;u<r.length;u++){var s=bn(a,e,r[u],n,o);s<i&&(i=s,l=u)}return l},ju=function(e,r,a){for(var n=[],o=null,i=0;i<r.length;i++)o=r[i],a[o.id()]===e&&n.push(o);return n},Vp=function(e,r,a){return Math.abs(r-e)<=a},Hp=function(e,r,a){for(var n=0;n<e.length;n++)for(var o=0;o<e[n].length;o++){var i=Math.abs(e[n][o]-r[n][o]);if(i>a)return!1}return!0},Up=function(e,r,a){for(var n=0;n<a;n++)if(e===r[n])return!0;return!1},kl=function(e,r){var a=new Array(r);if(e.length<50)for(var n=0;n<r;n++){for(var o=e[Math.floor(Math.random()*e.length)];Up(o,a,n);)o=e[Math.floor(Math.random()*e.length)];a[n]=o}else for(var i=0;i<r;i++)a[i]=e[Math.floor(Math.random()*e.length)];return a},zl=function(e,r,a){for(var n=0,o=0;o<r.length;o++)n+=bn("manhattan",r[o],e,a,"kMedoids");return n},Yp=function(e){var r=this.cy(),a=this.nodes(),n=null,o=Ri(e),i=new Array(o.k),l={},u;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,u=ai(a,o.k,o.attributes)):ut(o.testCentroids)==="object"?u=o.testCentroids:u=ai(a,o.k,o.attributes):u=ai(a,o.k,o.attributes);for(var s=!0,f=0;s&&f<o.maxIterations;){for(var v=0;v<a.length;v++)n=a[v],l[n.id()]=_u(n,u,o.distance,o.attributes,"kMeans");s=!1;for(var h=0;h<o.k;h++){var c=ju(h,a,l);if(c.length!==0){for(var g=o.attributes.length,d=u[h],m=new Array(g),p=new Array(g),y=0;y<g;y++){p[y]=0;for(var E=0;E<c.length;E++)n=c[E],p[y]+=o.attributes[y](n);m[y]=p[y]/c.length,Vp(m[y],d[y],o.sensitivityThreshold)||(s=!0)}u[h]=m,i[h]=r.collection(c)}}f++}return i},qp=function(e){var r=this.cy(),a=this.nodes(),n=null,o=Ri(e),i=new Array(o.k),l,u={},s,f=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(ut(o.testCentroids)==="object"?l=o.testCentroids:l=kl(a,o.k)):l=kl(a,o.k);for(var v=!0,h=0;v&&h<o.maxIterations;){for(var c=0;c<a.length;c++)n=a[c],u[n.id()]=_u(n,l,o.distance,o.attributes,"kMedoids");v=!1;for(var g=0;g<l.length;g++){var d=ju(g,a,u);if(d.length!==0){f[g]=zl(l[g],d,o.attributes);for(var m=0;m<d.length;m++)s=zl(d[m],d,o.attributes),s<f[g]&&(f[g]=s,l[g]=d[m],v=!0);i[g]=r.collection(d)}}h++}return i},Wp=function(e,r,a,n,o){for(var i,l,u=0;u<r.length;u++)for(var s=0;s<e.length;s++)n[u][s]=Math.pow(a[u][s],o.m);for(var f=0;f<e.length;f++)for(var v=0;v<o.attributes.length;v++){i=0,l=0;for(var h=0;h<r.length;h++)i+=n[h][f]*o.attributes[v](r[h]),l+=n[h][f];e[f][v]=i/l}},Xp=function(e,r,a,n,o){for(var i=0;i<e.length;i++)r[i]=e[i].slice();for(var l,u,s,f=2/(o.m-1),v=0;v<a.length;v++)for(var h=0;h<n.length;h++){l=0;for(var c=0;c<a.length;c++)u=bn(o.distance,n[h],a[v],o.attributes,"cmeans"),s=bn(o.distance,n[h],a[c],o.attributes,"cmeans"),l+=Math.pow(u/s,f);e[h][v]=1/l}},$p=function(e,r,a,n){for(var o=new Array(a.k),i=0;i<o.length;i++)o[i]=[];for(var l,u,s=0;s<r.length;s++){l=-1/0,u=-1;for(var f=0;f<r[0].length;f++)r[s][f]>l&&(l=r[s][f],u=f);o[u].push(e[s])}for(var v=0;v<o.length;v++)o[v]=n.collection(o[v]);return o},Gl=function(e){var r=this.cy(),a=this.nodes(),n=Ri(e),o,i,l,u,s;u=new Array(a.length);for(var f=0;f<a.length;f++)u[f]=new Array(n.k);l=new Array(a.length);for(var v=0;v<a.length;v++)l[v]=new Array(n.k);for(var h=0;h<a.length;h++){for(var c=0,g=0;g<n.k;g++)l[h][g]=Math.random(),c+=l[h][g];for(var d=0;d<n.k;d++)l[h][d]=l[h][d]/c}i=new Array(n.k);for(var m=0;m<n.k;m++)i[m]=new Array(n.attributes.length);s=new Array(a.length);for(var p=0;p<a.length;p++)s[p]=new Array(n.k);for(var y=!0,E=0;y&&E<n.maxIterations;)y=!1,Wp(i,a,l,s,n),Xp(l,u,i,a,n),Hp(l,u,n.sensitivityThreshold)||(y=!0),E++;return o=$p(a,l,n,r),{clusters:o,degreeOfMembership:l}},Kp={kMeans:Yp,kMedoids:qp,fuzzyCMeans:Gl,fcm:Gl},Zp=gt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Qp={single:"min",complete:"max"},Jp=function(e){var r=Zp(e),a=Qp[r.linkage];return a!=null&&(r.linkage=a),r},Vl=function(e,r,a,n,o){for(var i=0,l=1/0,u,s=o.attributes,f=function(N,A){return An(o.distance,s.length,function(P){return s[P](N)},function(P){return s[P](A)},N,A)},v=0;v<e.length;v++){var h=e[v].key,c=a[h][n[h]];c<l&&(i=h,l=c)}if(o.mode==="threshold"&&l>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var g=r[i],d=r[n[i]],m;o.mode==="dendrogram"?m={left:g,right:d,key:g.key}:m={value:g.value.concat(d.value),key:g.key},e[g.index]=m,e.splice(d.index,1),r[g.key]=m;for(var p=0;p<e.length;p++){var y=e[p];g.key===y.key?u=1/0:o.linkage==="min"?(u=a[g.key][y.key],a[g.key][y.key]>a[d.key][y.key]&&(u=a[d.key][y.key])):o.linkage==="max"?(u=a[g.key][y.key],a[g.key][y.key]<a[d.key][y.key]&&(u=a[d.key][y.key])):o.linkage==="mean"?u=(a[g.key][y.key]*g.size+a[d.key][y.key]*d.size)/(g.size+d.size):o.mode==="dendrogram"?u=f(y.value,g.value):u=f(y.value[0],g.value[0]),a[g.key][y.key]=a[y.key][g.key]=u}for(var E=0;E<e.length;E++){var T=e[E].key;if(n[T]===g.key||n[T]===d.key){for(var w=T,x=0;x<e.length;x++){var D=e[x].key;a[T][D]<a[T][w]&&(w=D)}n[T]=w}e[E].index=E}return g.key=d.key=g.index=d.index=null,!0},tn=function t(e,r,a){e&&(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},_p=function t(e,r){if(!e)return"";if(e.left&&e.right){var a=t(e.left,r),n=t(e.right,r),o=r.add({group:"nodes",data:{id:a+","+n}});return r.add({group:"edges",data:{source:a,target:o.id()}}),r.add({group:"edges",data:{source:n,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},jp=function t(e,r,a){if(!e)return[];var n=[],o=[],i=[];return r===0?(e.left&&tn(e.left,n),e.right&&tn(e.right,o),i=n.concat(o),[a.collection(i)]):r===1?e.value?[a.collection(e.value)]:(e.left&&tn(e.left,n),e.right&&tn(e.right,o),[a.collection(n),a.collection(o)]):e.value?[a.collection(e.value)]:(e.left&&(n=t(e.left,r-1,a)),e.right&&(o=t(e.right,r-1,a)),n.concat(o))},Hl=function(e){for(var r=this.cy(),a=this.nodes(),n=Jp(e),o=n.attributes,i=function(E,T){return An(n.distance,o.length,function(w){return o[w](E)},function(w){return o[w](T)},E,T)},l=[],u=[],s=[],f=[],v=0;v<a.length;v++){var h={value:n.mode==="dendrogram"?a[v]:[a[v]],key:v,index:v};l[v]=h,f[v]=h,u[v]=[],s[v]=0}for(var c=0;c<l.length;c++)for(var g=0;g<=c;g++){var d=void 0;n.mode==="dendrogram"?d=c===g?1/0:i(l[c].value,l[g].value):d=c===g?1/0:i(l[c].value[0],l[g].value[0]),u[c][g]=d,u[g][c]=d,d<u[c][s[c]]&&(s[c]=g)}for(var m=Vl(l,f,u,s,n);m;)m=Vl(l,f,u,s,n);var p;return n.mode==="dendrogram"?(p=jp(l[0],n.dendrogramDepth,r),n.addDendrogram&&_p(l[0],r)):(p=new Array(l.length),l.forEach(function(y,E){y.key=y.index=null,p[E]=r.collection(y.value)})),p},ey={hierarchicalClustering:Hl,hca:Hl},ty=gt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ry=function(e){var r=e.damping,a=e.preference;.5<=r&&r<1||nt("Damping must range on [0.5, 1).  Got: ".concat(r));var n=["median","mean","min","max"];return n.some(function(o){return o===a})||ye(a)||nt("Preference must be one of [".concat(n.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(a)),ty(e)},ay=function(e,r,a,n){var o=function(l,u){return n[u](l)};return-An(e,n.length,function(i){return o(r,i)},function(i){return o(a,i)},r,a)},ny=function(e,r){var a=null;return r==="median"?a=rp(e):r==="mean"?a=tp(e):r==="min"?a=jg(e):r==="max"?a=ep(e):a=r,a},iy=function(e,r,a){for(var n=[],o=0;o<e;o++)r[o*e+o]+a[o*e+o]>0&&n.push(o);return n},Ul=function(e,r,a){for(var n=[],o=0;o<e;o++){for(var i=-1,l=-1/0,u=0;u<a.length;u++){var s=a[u];r[o*e+s]>l&&(i=s,l=r[o*e+s])}i>0&&n.push(i)}for(var f=0;f<a.length;f++)n[a[f]]=a[f];return n},oy=function(e,r,a){for(var n=Ul(e,r,a),o=0;o<a.length;o++){for(var i=[],l=0;l<n.length;l++)n[l]===a[o]&&i.push(l);for(var u=-1,s=-1/0,f=0;f<i.length;f++){for(var v=0,h=0;h<i.length;h++)v+=r[i[h]*e+i[f]];v>s&&(u=f,s=v)}a[o]=i[u]}return n=Ul(e,r,a),n},Yl=function(e){for(var r=this.cy(),a=this.nodes(),n=ry(e),o={},i=0;i<a.length;i++)o[a[i].id()]=i;var l,u,s,f,v,h;l=a.length,u=l*l,s=new Array(u);for(var c=0;c<u;c++)s[c]=-1/0;for(var g=0;g<l;g++)for(var d=0;d<l;d++)g!==d&&(s[g*l+d]=ay(n.distance,a[g],a[d],n.attributes));f=ny(s,n.preference);for(var m=0;m<l;m++)s[m*l+m]=f;v=new Array(u);for(var p=0;p<u;p++)v[p]=0;h=new Array(u);for(var y=0;y<u;y++)h[y]=0;for(var E=new Array(l),T=new Array(l),w=new Array(l),x=0;x<l;x++)E[x]=0,T[x]=0,w[x]=0;for(var D=new Array(l*n.minIterations),L=0;L<D.length;L++)D[L]=0;var N;for(N=0;N<n.maxIterations;N++){for(var A=0;A<l;A++){for(var P=-1/0,b=-1/0,M=-1,C=0,O=0;O<l;O++)E[O]=v[A*l+O],C=h[A*l+O]+s[A*l+O],C>=P?(b=P,P=C,M=O):C>b&&(b=C);for(var S=0;S<l;S++)v[A*l+S]=(1-n.damping)*(s[A*l+S]-P)+n.damping*E[S];v[A*l+M]=(1-n.damping)*(s[A*l+M]-b)+n.damping*E[M]}for(var R=0;R<l;R++){for(var B=0,z=0;z<l;z++)E[z]=h[z*l+R],T[z]=Math.max(0,v[z*l+R]),B+=T[z];B-=T[R],T[R]=v[R*l+R],B+=T[R];for(var G=0;G<l;G++)h[G*l+R]=(1-n.damping)*Math.min(0,B-T[G])+n.damping*E[G];h[R*l+R]=(1-n.damping)*(B-T[R])+n.damping*E[R]}for(var k=0,H=0;H<l;H++){var $=h[H*l+H]+v[H*l+H]>0?1:0;D[N%n.minIterations*l+H]=$,k+=$}if(k>0&&(N>=n.minIterations-1||N==n.maxIterations-1)){for(var V=0,X=0;X<l;X++){w[X]=0;for(var U=0;U<n.minIterations;U++)w[X]+=D[U*l+X];(w[X]===0||w[X]===n.minIterations)&&V++}if(V===l)break}}for(var F=iy(l,v,h),Y=oy(l,s,F),q={},K=0;K<F.length;K++)q[F[K]]=[];for(var j=0;j<a.length;j++){var ge=o[a[j].id()],Ce=Y[ge];Ce!=null&&q[Ce].push(a[j])}for(var Q=new Array(F.length),le=0;le<F.length;le++)Q[le]=r.collection(q[F[le]]);return Q},sy={affinityPropagation:Yl,ap:Yl},ly=gt({root:void 0,directed:!1}),uy={hierholzer:function(e){if(!Ve(e)){var r=arguments;e={root:r[0],directed:r[1]}}var a=ly(e),n=a.root,o=a.directed,i=this,l=!1,u,s,f;n&&(f=Re(n)?this.filter(n)[0].id():n[0].id());var v={},h={};o?i.forEach(function(y){var E=y.id();if(y.isNode()){var T=y.indegree(!0),w=y.outdegree(!0),x=T-w,D=w-T;x==1?u?l=!0:u=E:D==1?s?l=!0:s=E:(D>1||x>1)&&(l=!0),v[E]=[],y.outgoers().forEach(function(L){L.isEdge()&&v[E].push(L.id())})}else h[E]=[void 0,y.target().id()]}):i.forEach(function(y){var E=y.id();if(y.isNode()){var T=y.degree(!0);T%2&&(u?s?l=!0:s=E:u=E),v[E]=[],y.connectedEdges().forEach(function(w){return v[E].push(w.id())})}else h[E]=[y.source().id(),y.target().id()]});var c={found:!1,trail:void 0};if(l)return c;if(s&&u)if(o){if(f&&s!=f)return c;f=s}else{if(f&&s!=f&&u!=f)return c;f||(f=s)}else f||(f=i[0].id());var g=function(E){for(var T=E,w=[E],x,D,L;v[T].length;)x=v[T].shift(),D=h[x][0],L=h[x][1],T!=L?(v[L]=v[L].filter(function(N){return N!=x}),T=L):!o&&T!=D&&(v[D]=v[D].filter(function(N){return N!=x}),T=D),w.unshift(x),w.unshift(T);return w},d=[],m=[];for(m=g(f);m.length!=1;)v[m[0]].length==0?(d.unshift(i.getElementById(m.shift())),d.unshift(i.getElementById(m.shift()))):m=g(m.shift()).concat(m);d.unshift(i.getElementById(m.shift()));for(var p in v)if(v[p].length)return c;return c.found=!0,c.trail=this.spawn(d,!0),c}},rn=function(){var e=this,r={},a=0,n=0,o=[],i=[],l={},u=function(h,c){for(var g=i.length-1,d=[],m=e.spawn();i[g].x!=h||i[g].y!=c;)d.push(i.pop().edge),g--;d.push(i.pop().edge),d.forEach(function(p){var y=p.connectedNodes().intersection(e);m.merge(p),y.forEach(function(E){var T=E.id(),w=E.connectedEdges().intersection(e);m.merge(E),r[T].cutVertex?m.merge(w.filter(function(x){return x.isLoop()})):m.merge(w)})}),o.push(m)},s=function v(h,c,g){h===g&&(n+=1),r[c]={id:a,low:a++,cutVertex:!1};var d=e.getElementById(c).connectedEdges().intersection(e);if(d.size()===0)o.push(e.spawn(e.getElementById(c)));else{var m,p,y,E;d.forEach(function(T){m=T.source().id(),p=T.target().id(),y=m===c?p:m,y!==g&&(E=T.id(),l[E]||(l[E]=!0,i.push({x:c,y,edge:T})),y in r?r[c].low=Math.min(r[c].low,r[y].id):(v(h,y,c),r[c].low=Math.min(r[c].low,r[y].low),r[c].id<=r[y].low&&(r[c].cutVertex=!0,u(c,y))))})}};e.forEach(function(v){if(v.isNode()){var h=v.id();h in r||(n=0,s(h,h),r[h].cutVertex=n>1)}});var f=Object.keys(r).filter(function(v){return r[v].cutVertex}).map(function(v){return e.getElementById(v)});return{cut:e.spawn(f),components:o}},fy={hopcroftTarjanBiconnected:rn,htbc:rn,htb:rn,hopcroftTarjanBiconnectedComponents:rn},an=function(){var e=this,r={},a=0,n=[],o=[],i=e.spawn(e),l=function u(s){o.push(s),r[s]={index:a,low:a++,explored:!1};var f=e.getElementById(s).connectedEdges().intersection(e);if(f.forEach(function(d){var m=d.target().id();m!==s&&(m in r||u(m),r[m].explored||(r[s].low=Math.min(r[s].low,r[m].low)))}),r[s].index===r[s].low){for(var v=e.spawn();;){var h=o.pop();if(v.merge(e.getElementById(h)),r[h].low=r[s].index,r[h].explored=!0,h===s)break}var c=v.edgesWith(v),g=v.merge(c);n.push(g),i=i.difference(g)}};return e.forEach(function(u){if(u.isNode()){var s=u.id();s in r||l(s)}}),{cut:i,components:n}},vy={tarjanStronglyConnected:an,tsc:an,tscc:an,tarjanStronglyConnectedComponents:an},ef={};[Ma,Hg,Ug,qg,Xg,Kg,Jg,xp,Xr,$r,hi,Fp,Kp,ey,sy,uy,fy,vy].forEach(function(t){Ie(ef,t)});var tf=0,rf=1,af=2,Kt=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=tf,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Kt.prototype={fulfill:function(e){return ql(this,rf,"fulfillValue",e)},reject:function(e){return ql(this,af,"rejectReason",e)},then:function(e,r){var a=this,n=new Kt;return a.onFulfilled.push(Xl(e,n,"fulfill")),a.onRejected.push(Xl(r,n,"reject")),nf(a),n.proxy}};var ql=function(e,r,a,n){return e.state===tf&&(e.state=r,e[a]=n,nf(e)),e},nf=function(e){e.state===rf?Wl(e,"onFulfilled",e.fulfillValue):e.state===af&&Wl(e,"onRejected",e.rejectReason)},Wl=function(e,r,a){if(e[r].length!==0){var n=e[r];e[r]=[];var o=function(){for(var l=0;l<n.length;l++)n[l](a)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},Xl=function(e,r,a){return function(n){if(typeof e!="function")r[a].call(r,n);else{var o;try{o=e(n)}catch(i){r.reject(i);return}hy(r,o)}}},hy=function t(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var a;if(ut(r)==="object"&&r!==null||typeof r=="function")try{a=r.then}catch(o){e.reject(o);return}if(typeof a=="function"){var n=!1;try{a.call(r,function(o){n||(n=!0,o===r?e.reject(new TypeError("circular thenable chain")):t(e,o))},function(o){n||(n=!0,e.reject(o))})}catch(o){n||e.reject(o)}return}e.fulfill(r)};Kt.all=function(t){return new Kt(function(e,r){for(var a=new Array(t.length),n=0,o=function(u,s){a[u]=s,n++,n===t.length&&e(a)},i=0;i<t.length;i++)(function(l){var u=t[l],s=u!=null&&u.then!=null;if(s)u.then(function(v){o(l,v)},function(v){r(v)});else{var f=u;o(l,f)}})(i)})};Kt.resolve=function(t){return new Kt(function(e,r){e(t)})};Kt.reject=function(t){return new Kt(function(e,r){r(t)})};var jr=typeof Promise<"u"?Promise:Kt,ci=function(e,r,a){var n=Ti(e),o=!n,i=this._private=Ie({duration:1e3},r,a);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&at(i.complete)&&i.completes.push(i.complete),o){var l=e.position();i.startPosition=i.startPosition||{x:l.x,y:l.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(n){var u=e.pan();i.startPan={x:u.x,y:u.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},xr=ci.prototype;Ie(xr,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,a=e.target._private.animation;e.queue?r=a.queue:r=a.current,r.push(this),Nt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,a=r.playing;return e===void 0?r.progress:(a&&this.pause(),r.progress=e,r.started=!1,a&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var a=function(s,f){var v=e[s];v!=null&&(e[s]=e[f],e[f]=v)};if(a("zoom","startZoom"),a("pan","startPan"),a("position","startPosition"),e.style)for(var n=0;n<e.style.length;n++){var o=e.style[n],i=o.name,l=e.startStyle[i];e.startStyle[i]=o,e.style[n]=l}return r&&this.play(),this},promise:function(e){var r=this._private,a;switch(e){case"frame":a=r.frames;break;default:case"complete":case"completed":a=r.completes}return new jr(function(n,o){a.push(function(){n()})})}});xr.complete=xr.completed;xr.run=xr.play;xr.running=xr.playing;var cy={animated:function(){return function(){var r=this,a=r.length!==void 0,n=a?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return!1;var i=n[0];if(i)return i._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,a=r.length!==void 0,n=a?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var i=0;i<n.length;i++){var l=n[i];l._private.animation.queue=[]}return this}},delay:function(){return function(r,a){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:r,duration:r,complete:a}):this}},delayAnimation:function(){return function(r,a){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:r,duration:r,complete:a}):this}},animation:function(){return function(r,a){var n=this,o=n.length!==void 0,i=o?n:[n],l=this._private.cy||this,u=!o,s=!u;if(!l.styleEnabled())return this;var f=l.style();r=Ie({},r,a);var v=Object.keys(r).length===0;if(v)return new ci(i[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(s&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),s&&r.renderedPosition!=null){var h=r.renderedPosition,c=l.pan(),g=l.zoom();r.position=Uu(h,g,c)}if(u&&r.panBy!=null){var d=r.panBy,m=l.pan();r.pan={x:m.x+d.x,y:m.y+d.y}}var p=r.center||r.centre;if(u&&p!=null){var y=l.getCenterPan(p.eles,r.zoom);y!=null&&(r.pan=y)}if(u&&r.fit!=null){var E=r.fit,T=l.getFitViewport(E.eles||E.boundingBox,E.padding);T!=null&&(r.pan=T.pan,r.zoom=T.zoom)}if(u&&Ve(r.zoom)){var w=l.getZoomedViewport(r.zoom);w!=null?(w.zoomed&&(r.zoom=w.zoom),w.panned&&(r.pan=w.pan)):r.zoom=null}return new ci(i[0],r)}},animate:function(){return function(r,a){var n=this,o=n.length!==void 0,i=o?n:[n],l=this._private.cy||this;if(!l.styleEnabled())return this;a&&(r=Ie({},r,a));for(var u=0;u<i.length;u++){var s=i[u],f=s.animated()&&(r.queue===void 0||r.queue),v=s.animation(r,f?{queue:!0}:void 0);v.play()}return this}},stop:function(){return function(r,a){var n=this,o=n.length!==void 0,i=o?n:[n],l=this._private.cy||this;if(!l.styleEnabled())return this;for(var u=0;u<i.length;u++){for(var s=i[u],f=s._private,v=f.animation.current,h=0;h<v.length;h++){var c=v[h],g=c._private;a&&(g.duration=0)}r&&(f.animation.queue=[]),a||(f.animation.current=[])}return l.notify("draw"),this}}},dy={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(n){},beforeSet:function(n,o){},onSet:function(n){},canSet:function(n){return!0}};return e=Ie({},r,e),function(n,o){var i=e,l=this,u=l.length!==void 0,s=u?l:[l],f=u?l[0]:l;if(Re(n)){var v=n.indexOf(".")!==-1,h=v&&jd.default(n);if(i.allowGetting&&o===void 0){var c;return f&&(i.beforeGet(f),h&&f._private[i.field][n]===void 0?c=Jd.default(f._private[i.field],h):c=f._private[i.field][n]),c}else if(i.allowSetting&&o!==void 0){var g=!i.immutableKeys[n];if(g){var d=Su({},n,o);i.beforeSet(l,d);for(var m=0,p=s.length;m<p;m++){var y=s[m];i.canSet(y)&&(h&&f._private[i.field][n]===void 0?_d.default(y._private[i.field],h,o):y._private[i.field][n]=o)}i.updateStyle&&l.updateStyle(),i.onSet(l),i.settingTriggersEvent&&l[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&Ve(n)){var E=n,T,w,x=Object.keys(E);i.beforeSet(l,E);for(var D=0;D<x.length;D++){T=x[D],w=E[T];var L=!i.immutableKeys[T];if(L)for(var N=0;N<s.length;N++){var A=s[N];i.canSet(A)&&(A._private[i.field][T]=w)}}i.updateStyle&&l.updateStyle(),i.onSet(l),i.settingTriggersEvent&&l[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&at(n)){var P=n;l.on(i.bindingEvent,P)}else if(i.allowGetting&&n===void 0){var b;return f&&(i.beforeGet(f),b=f._private[i.field]),b}return l}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Ie({},r,e),function(n){var o=e,i=this,l=i.length!==void 0,u=l?i:[i];if(Re(n)){for(var s=n.split(/\s+/),f=s.length,v=0;v<f;v++){var h=s[v];if(!lr(h)){var c=!o.immutableKeys[h];if(c)for(var g=0,d=u.length;g<d;g++)u[g]._private[o.field][h]=void 0}}o.triggerEvent&&i[o.triggerFnName](o.event)}else if(n===void 0){for(var m=0,p=u.length;m<p;m++)for(var y=u[m]._private[o.field],E=Object.keys(y),T=0;T<E.length;T++){var w=E[T],x=!o.immutableKeys[w];x&&(y[w]=void 0)}o.triggerEvent&&i[o.triggerFnName](o.event)}return i}}},gy={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(a,n){var o=this,i=Array.prototype.slice.call(arguments,0);return new jr(function(l,u){var s=function(c){o.off.apply(o,v),l(c)},f=i.concat([s]),v=f.concat([]);o.on.apply(o,f)})}}},qe={};[cy,dy,gy].forEach(function(t){Ie(qe,t)});var py={animate:qe.animate(),animation:qe.animation(),animated:qe.animated(),clearQueue:qe.clearQueue(),delay:qe.delay(),delayAnimation:qe.delayAnimation(),stop:qe.stop()},vn={classes:function(e){var r=this;if(e===void 0){var a=[];return r[0]._private.classes.forEach(function(g){return a.push(g)}),a}else Je(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],o=new _r(e),i=0;i<r.length;i++){for(var l=r[i],u=l._private,s=u.classes,f=!1,v=0;v<e.length;v++){var h=e[v],c=s.has(h);if(!c){f=!0;break}}f||(f=s.size!==e.length),f&&(u.classes=o,n.push(l))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Je(e)||(e=e.match(/\S+/g)||[]);for(var a=this,n=r===void 0,o=[],i=0,l=a.length;i<l;i++)for(var u=a[i],s=u._private.classes,f=!1,v=0;v<e.length;v++){var h=e[v],c=s.has(h),g=!1;r||n&&!c?(s.add(h),g=!0):(!r||n&&c)&&(s.delete(h),g=!0),!f&&g&&(o.push(u),f=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),a},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var a=this;if(r==null)r=250;else if(r===0)return a;return a.addClass(e),setTimeout(function(){a.removeClass(e)},r),a}};vn.className=vn.classNames=vn.classes;var Ge={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:lt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ge.variable="(?:[\\w-.]|(?:\\\\"+Ge.metaChar+"))+";Ge.className="(?:[\\w-]|(?:\\\\"+Ge.metaChar+"))+";Ge.value=Ge.string+"|"+Ge.number;Ge.id=Ge.variable;(function(){var t,e,r;for(t=Ge.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Ge.comparatorOp+="|@"+e;for(t=Ge.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Ge.comparatorOp+="|\\!"+e)})();var Ze=function(){return{checks:[]}},Se={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},di=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return bg(t.selector,e.selector)}),yy=function(){for(var t={},e,r=0;r<di.length;r++)e=di[r],t[e.selector]=e.matches;return t}(),my=function(e,r){return yy[e](r)},Ey="("+di.map(function(t){return t.selector}).join("|")+")",zr=function(e){return e.replace(new RegExp("\\\\("+Ge.metaChar+")","g"),function(r,a){return a})},ar=function(e,r,a){e[e.length-1]=a},gi=[{name:"group",query:!0,regex:"("+Ge.group+")",populate:function(e,r,a){var n=Wt(a,1),o=n[0];r.checks.push({type:Se.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:Ey,populate:function(e,r,a){var n=Wt(a,1),o=n[0];r.checks.push({type:Se.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+Ge.id+")",populate:function(e,r,a){var n=Wt(a,1),o=n[0];r.checks.push({type:Se.ID,value:zr(o)})}},{name:"className",query:!0,regex:"\\.("+Ge.className+")",populate:function(e,r,a){var n=Wt(a,1),o=n[0];r.checks.push({type:Se.CLASS,value:zr(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ge.variable+")\\s*\\]",populate:function(e,r,a){var n=Wt(a,1),o=n[0];r.checks.push({type:Se.DATA_EXIST,field:zr(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ge.variable+")\\s*("+Ge.comparatorOp+")\\s*("+Ge.value+")\\s*\\]",populate:function(e,r,a){var n=Wt(a,3),o=n[0],i=n[1],l=n[2],u=new RegExp("^"+Ge.string+"$").exec(l)!=null;u?l=l.substring(1,l.length-1):l=parseFloat(l),r.checks.push({type:Se.DATA_COMPARE,field:zr(o),operator:i,value:l})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ge.boolOp+")\\s*("+Ge.variable+")\\s*\\]",populate:function(e,r,a){var n=Wt(a,2),o=n[0],i=n[1];r.checks.push({type:Se.DATA_BOOL,field:zr(i),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ge.meta+")\\s*("+Ge.comparatorOp+")\\s*("+Ge.number+")\\s*\\]\\]",populate:function(e,r,a){var n=Wt(a,3),o=n[0],i=n[1],l=n[2];r.checks.push({type:Se.META_COMPARE,field:zr(o),operator:i,value:parseFloat(l)})}},{name:"nextQuery",separator:!0,regex:Ge.separator,populate:function(e,r){var a=e.currentSubject,n=e.edgeCount,o=e.compoundCount,i=e[e.length-1];a!=null&&(i.subject=a,e.currentSubject=null),i.edgeCount=n,i.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var l=e[e.length++]=Ze();return l}},{name:"directedEdge",separator:!0,regex:Ge.directedEdge,populate:function(e,r){if(e.currentSubject==null){var a=Ze(),n=r,o=Ze();return a.checks.push({type:Se.DIRECTED_EDGE,source:n,target:o}),ar(e,r,a),e.edgeCount++,o}else{var i=Ze(),l=r,u=Ze();return i.checks.push({type:Se.NODE_SOURCE,source:l,target:u}),ar(e,r,i),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Ge.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var a=Ze(),n=r,o=Ze();return a.checks.push({type:Se.UNDIRECTED_EDGE,nodes:[n,o]}),ar(e,r,a),e.edgeCount++,o}else{var i=Ze(),l=r,u=Ze();return i.checks.push({type:Se.NODE_NEIGHBOR,node:l,neighbor:u}),ar(e,r,i),u}}},{name:"child",separator:!0,regex:Ge.child,populate:function(e,r){if(e.currentSubject==null){var a=Ze(),n=Ze(),o=e[e.length-1];return a.checks.push({type:Se.CHILD,parent:o,child:n}),ar(e,r,a),e.compoundCount++,n}else if(e.currentSubject===r){var i=Ze(),l=e[e.length-1],u=Ze(),s=Ze(),f=Ze(),v=Ze();return i.checks.push({type:Se.COMPOUND_SPLIT,left:l,right:u,subject:s}),s.checks=r.checks,r.checks=[{type:Se.TRUE}],v.checks.push({type:Se.TRUE}),u.checks.push({type:Se.PARENT,parent:v,child:f}),ar(e,l,i),e.currentSubject=s,e.compoundCount++,f}else{var h=Ze(),c=Ze(),g=[{type:Se.PARENT,parent:h,child:c}];return h.checks=r.checks,r.checks=g,e.compoundCount++,c}}},{name:"descendant",separator:!0,regex:Ge.descendant,populate:function(e,r){if(e.currentSubject==null){var a=Ze(),n=Ze(),o=e[e.length-1];return a.checks.push({type:Se.DESCENDANT,ancestor:o,descendant:n}),ar(e,r,a),e.compoundCount++,n}else if(e.currentSubject===r){var i=Ze(),l=e[e.length-1],u=Ze(),s=Ze(),f=Ze(),v=Ze();return i.checks.push({type:Se.COMPOUND_SPLIT,left:l,right:u,subject:s}),s.checks=r.checks,r.checks=[{type:Se.TRUE}],v.checks.push({type:Se.TRUE}),u.checks.push({type:Se.ANCESTOR,ancestor:v,descendant:f}),ar(e,l,i),e.currentSubject=s,e.compoundCount++,f}else{var h=Ze(),c=Ze(),g=[{type:Se.ANCESTOR,ancestor:h,descendant:c}];return h.checks=r.checks,r.checks=g,e.compoundCount++,c}}},{name:"subject",modifier:!0,regex:Ge.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return We("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var a=e[e.length-1],n=a.checks[0],o=n==null?null:n.type;o===Se.DIRECTED_EDGE?n.type=Se.NODE_TARGET:o===Se.UNDIRECTED_EDGE&&(n.type=Se.NODE_NEIGHBOR,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];gi.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var by=function(e){for(var r,a,n,o=0;o<gi.length;o++){var i=gi[o],l=i.name,u=e.match(i.regexObj);if(u!=null){a=u,r=i,n=l;var s=u[0];e=e.substring(s.length);break}}return{expr:r,match:a,name:n,remaining:e}},wy=function(e){var r=e.match(/^\s+/);if(r){var a=r[0];e=e.substring(a.length)}return e},xy=function(e){var r=this,a=r.inputText=e,n=r[0]=Ze();for(r.length=1,a=wy(a);;){var o=by(a);if(o.expr==null)return We("The selector `"+e+"`is invalid"),!1;var i=o.match.slice(1),l=o.expr.populate(r,n,i);if(l===!1)return!1;if(l!=null&&(n=l),a=o.remaining,a.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var s=0;s<r.length;s++){var f=r[s];if(f.compoundCount>0&&f.edgeCount>0)return We("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return We("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&We("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Cy=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f??""},r=function(f){return Re(f)?'"'+f+'"':e(f)},a=function(f){return" "+f+" "},n=function(f,v){var h=f.type,c=f.value;switch(h){case Se.GROUP:{var g=e(c);return g.substring(0,g.length-1)}case Se.DATA_COMPARE:{var d=f.field,m=f.operator;return"["+d+a(e(m))+r(c)+"]"}case Se.DATA_BOOL:{var p=f.operator,y=f.field;return"["+e(p)+y+"]"}case Se.DATA_EXIST:{var E=f.field;return"["+E+"]"}case Se.META_COMPARE:{var T=f.operator,w=f.field;return"[["+w+a(e(T))+r(c)+"]]"}case Se.STATE:return c;case Se.ID:return"#"+c;case Se.CLASS:return"."+c;case Se.PARENT:case Se.CHILD:return o(f.parent,v)+a(">")+o(f.child,v);case Se.ANCESTOR:case Se.DESCENDANT:return o(f.ancestor,v)+" "+o(f.descendant,v);case Se.COMPOUND_SPLIT:{var x=o(f.left,v),D=o(f.subject,v),L=o(f.right,v);return x+(x.length>0?" ":"")+D+L}case Se.TRUE:return""}},o=function(f,v){return f.checks.reduce(function(h,c,g){return h+(v===f&&g===0?"$":"")+n(c,v)},"")},i="",l=0;l<this.length;l++){var u=this[l];i+=o(u,u.subject),this.length>1&&l<this.length-1&&(i+=", ")}return this.toStringCache=i,i},Ty={parse:xy,toString:Cy},of=function(e,r,a){var n,o=Re(e),i=ye(e),l=Re(a),u,s,f=!1,v=!1,h=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),v=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(o||l||f)&&(u=!o&&!i?"":""+e,s=""+a),f&&(e=u=u.toLowerCase(),a=s=s.toLowerCase()),r){case"*=":n=u.indexOf(s)>=0;break;case"$=":n=u.indexOf(s,u.length-s.length)>=0;break;case"^=":n=u.indexOf(s)===0;break;case"=":n=e===a;break;case">":h=!0,n=e>a;break;case">=":h=!0,n=e>=a;break;case"<":h=!0,n=e<a;break;case"<=":h=!0,n=e<=a;break;default:n=!1;break}return v&&(e!=null||!h)&&(n=!n),n},Dy=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},Sy=function(e){return e!==void 0},Pi=function(e,r){return e.data(r)},Ly=function(e,r){return e[r]()},it=[],tt=function(e,r){return e.checks.every(function(a){return it[a.type](a,r)})};it[Se.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};it[Se.STATE]=function(t,e){var r=t.value;return my(r,e)};it[Se.ID]=function(t,e){var r=t.value;return e.id()===r};it[Se.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};it[Se.META_COMPARE]=function(t,e){var r=t.field,a=t.operator,n=t.value;return of(Ly(e,r),a,n)};it[Se.DATA_COMPARE]=function(t,e){var r=t.field,a=t.operator,n=t.value;return of(Pi(e,r),a,n)};it[Se.DATA_BOOL]=function(t,e){var r=t.field,a=t.operator;return Dy(Pi(e,r),a)};it[Se.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,Sy(Pi(e,r))};it[Se.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],a=t.nodes[1],n=e.source(),o=e.target();return tt(r,n)&&tt(a,o)||tt(a,n)&&tt(r,o)};it[Se.NODE_NEIGHBOR]=function(t,e){return tt(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&tt(t.neighbor,r)})};it[Se.DIRECTED_EDGE]=function(t,e){return tt(t.source,e.source())&&tt(t.target,e.target())};it[Se.NODE_SOURCE]=function(t,e){return tt(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&tt(t.target,r)})};it[Se.NODE_TARGET]=function(t,e){return tt(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&tt(t.source,r)})};it[Se.CHILD]=function(t,e){return tt(t.child,e)&&tt(t.parent,e.parent())};it[Se.PARENT]=function(t,e){return tt(t.parent,e)&&e.children().some(function(r){return tt(t.child,r)})};it[Se.DESCENDANT]=function(t,e){return tt(t.descendant,e)&&e.ancestors().some(function(r){return tt(t.ancestor,r)})};it[Se.ANCESTOR]=function(t,e){return tt(t.ancestor,e)&&e.descendants().some(function(r){return tt(t.descendant,r)})};it[Se.COMPOUND_SPLIT]=function(t,e){return tt(t.subject,e)&&tt(t.left,e)&&tt(t.right,e)};it[Se.TRUE]=function(){return!0};it[Se.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};it[Se.FILTER]=function(t,e){var r=t.value;return r(e)};var Ny=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===Se.ID)return e.getElementById(r[0].checks[0].value).collection();var a=function(o){for(var i=0;i<r.length;i++){var l=r[i];if(tt(l,o))return!0}return!1};return r.text()==null&&(a=function(){return!0}),e.filter(a)},My=function(e){for(var r=this,a=0;a<r.length;a++){var n=r[a];if(tt(n,e))return!0}return!1},Ay={matches:My,filter:Ny},fr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Re(e)&&e.match(/^\s*$/)||(Nt(e)?this.addQuery({checks:[{type:Se.COLLECTION,value:e.collection()}]}):at(e)?this.addQuery({checks:[{type:Se.FILTER,value:e}]}):Re(e)?this.parse(e)||(this.invalid=!0):nt("A selector must be created from a string; found "))},vr=fr.prototype;[Ty,Ay].forEach(function(t){return Ie(vr,t)});vr.text=function(){return this.inputText};vr.size=function(){return this.length};vr.eq=function(t){return this[t]};vr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};vr.addQuery=function(t){this[this.length++]=t};vr.selector=vr.toString;var or={allAre:function(e){var r=new fr(e);return this.every(function(a){return r.matches(a)})},is:function(e){var r=new fr(e);return this.some(function(a){return r.matches(a)})},some:function(e,r){for(var a=0;a<this.length;a++){var n=r?e.apply(r,[this[a],a,this]):e(this[a],a,this);if(n)return!0}return!1},every:function(e,r){for(var a=0;a<this.length;a++){var n=r?e.apply(r,[this[a],a,this]):e(this[a],a,this);if(!n)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,a=e.length;return r!==a?!1:r===1?this[0]===e[0]:this.every(function(n){return e.hasElementWithId(n.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(a){return r.hasElementWithId(a.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(a){return r.hasElementWithId(a.id())})}};or.allAreNeighbours=or.allAreNeighbors;or.has=or.contains;or.equal=or.equals=or.same;var Pt=function(e,r){return function(n,o,i,l){var u=n,s=this,f;if(u==null?f="":Nt(u)&&u.length===1&&(f=u.id()),s.length===1&&f){var v=s[0]._private,h=v.traversalCache=v.traversalCache||{},c=h[r]=h[r]||[],g=br(f),d=c[g];return d||(c[g]=e.call(s,n,o,i,l))}else return e.call(s,n,o,i,l)}},Jr={parent:function(e){var r=[];if(this.length===1){var a=this[0]._private.parent;if(a)return a}for(var n=0;n<this.length;n++){var o=this[n],i=o._private.parent;i&&r.push(i)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],a=this.parent();a.nonempty();){for(var n=0;n<a.length;n++){var o=a[n];r.push(o)}a=a.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,a=0;a<this.length;a++){var n=this[a],o=n.parents();r=r||o,r=r.intersect(o)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Pt(function(t){for(var e=[],r=0;r<this.length;r++)for(var a=this[r],n=a._private.children,o=0;o<n.length;o++)e.push(n[o]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function a(n){for(var o=0;o<n.length;o++){var i=n[o];r.push(i),i.children().nonempty()&&a(i.children())}}return a(this.children()),this.spawn(r,!0).filter(e)}};function Ii(t,e,r,a){for(var n=[],o=new _r,i=t.cy(),l=i.hasCompoundNodes(),u=0;u<t.length;u++){var s=t[u];r?n.push(s):l&&a(n,o,s)}for(;n.length>0;){var f=n.shift();e(f),o.add(f.id()),l&&a(n,o,f)}return t}function sf(t,e,r){if(r.isParent())for(var a=r._private.children,n=0;n<a.length;n++){var o=a[n];e.has(o.id())||t.push(o)}}Jr.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ii(this,t,e,sf)};function lf(t,e,r){if(r.isChild()){var a=r._private.parent;e.has(a.id())||t.push(a)}}Jr.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ii(this,t,e,lf)};function Oy(t,e,r){lf(t,e,r),sf(t,e,r)}Jr.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ii(this,t,e,Oy)};Jr.ancestors=Jr.parents;var Ra,uf;Ra=uf={data:qe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:qe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:qe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:qe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:qe.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:qe.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Ra.attr=Ra.data;Ra.removeAttr=Ra.removeData;var Ry=uf,On={};function ni(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var a=0,n=r[0],o=n._private.edges,i=0;i<o.length;i++){var l=o[i];!e&&l.isLoop()||(a+=t(n,l))}return a}else return}}Ie(On,{degree:ni(function(t,e){return e.source().same(e.target())?2:1}),indegree:ni(function(t,e){return e.target().same(t)?1:0}),outdegree:ni(function(t,e){return e.source().same(t)?1:0})});function Gr(t,e){return function(r){for(var a,n=this.nodes(),o=0;o<n.length;o++){var i=n[o],l=i[t](r);l!==void 0&&(a===void 0||e(l,a))&&(a=l)}return a}}Ie(On,{minDegree:Gr("degree",function(t,e){return t<e}),maxDegree:Gr("degree",function(t,e){return t>e}),minIndegree:Gr("indegree",function(t,e){return t<e}),maxIndegree:Gr("indegree",function(t,e){return t>e}),minOutdegree:Gr("outdegree",function(t,e){return t<e}),maxOutdegree:Gr("outdegree",function(t,e){return t>e})});Ie(On,{totalDegree:function(e){for(var r=0,a=this.nodes(),n=0;n<a.length;n++)r+=a[n].degree(e);return r}});var Bt,ff,vf=function(e,r,a){for(var n=0;n<e.length;n++){var o=e[n];if(!o.locked()){var i=o._private.position,l={x:r.x!=null?r.x-i.x:0,y:r.y!=null?r.y-i.y:0};o.isParent()&&!(l.x===0&&l.y===0)&&o.children().shift(l,a),o.dirtyBoundingBoxCache()}}},$l={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){vf(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Bt=ff={position:qe.data($l),silentPosition:qe.data(Ie({},$l,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){vf(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Ve(e))r?this.silentPosition(e):this.position(e);else if(at(e)){var a=e,n=this.cy();n.startBatch();for(var o=0;o<this.length;o++){var i=this[o],l=void 0;(l=a(i,o))&&(r?i.silentPosition(l):i.position(l))}n.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,a){var n;if(Ve(e)?(n={x:ye(e.x)?e.x:0,y:ye(e.y)?e.y:0},a=r):Re(e)&&ye(r)&&(n={x:0,y:0},n[e]=r),n!=null){var o=this.cy();o.startBatch();for(var i=0;i<this.length;i++){var l=this[i];if(!(o.hasCompoundNodes()&&l.isChild()&&l.ancestors().anySame(this))){var u=l.position(),s={x:u.x+n.x,y:u.y+n.y};a?l.silentPosition(s):l.position(s)}}o.endBatch()}return this},silentShift:function(e,r){return Ve(e)?this.shift(e,!0):Re(e)&&ye(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var a=this[0],n=this.cy(),o=n.zoom(),i=n.pan(),l=Ve(e)?e:void 0,u=l!==void 0||r!==void 0&&Re(e);if(a&&a.isNode())if(u)for(var s=0;s<this.length;s++){var f=this[s];r!==void 0?f.position(e,(r-i[e])/o):l!==void 0&&f.position(Uu(l,o,i))}else{var v=a.position();return l=Mn(v,o,i),e===void 0?l:l[e]}else if(!u)return;return this},relativePosition:function(e,r){var a=this[0],n=this.cy(),o=Ve(e)?e:void 0,i=o!==void 0||r!==void 0&&Re(e),l=n.hasCompoundNodes();if(a&&a.isNode())if(i)for(var u=0;u<this.length;u++){var s=this[u],f=l?s.parent():null,v=f&&f.length>0,h=v;v&&(f=f[0]);var c=h?f.position():{x:0,y:0};r!==void 0?s.position(e,r+c[e]):o!==void 0&&s.position({x:o.x+c.x,y:o.y+c.y})}else{var g=a.position(),d=l?a.parent():null,m=d&&d.length>0,p=m;m&&(d=d[0]);var y=p?d.position():{x:0,y:0};return o={x:g.x-y.x,y:g.y-y.y},e===void 0?o:o[e]}else if(!i)return;return this}};Bt.modelPosition=Bt.point=Bt.position;Bt.modelPositions=Bt.points=Bt.positions;Bt.renderedPoint=Bt.renderedPosition;Bt.relativePoint=Bt.relativePosition;var Py=ff,Kr,cr;Kr=cr={};cr.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),a=r.zoom(),n=r.pan(),o=e.x1*a+n.x,i=e.x2*a+n.x,l=e.y1*a+n.y,u=e.y2*a+n.y;return{x1:o,x2:i,y1:l,y2:u,w:i-o,h:u-l}};cr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var a=r._private;a.compoundBoundsClean=!1,a.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};cr.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(i){if(!i.isParent())return;var l=i._private,u=i.children(),s=i.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:i.pstyle("min-width").pfValue,left:i.pstyle("min-width-bias-left"),right:i.pstyle("min-width-bias-right")},height:{val:i.pstyle("min-height").pfValue,top:i.pstyle("min-height-bias-top"),bottom:i.pstyle("min-height-bias-bottom")}},v=u.boundingBox({includeLabels:s,includeOverlays:!1,useCache:!1}),h=l.position;(v.w===0||v.h===0)&&(v={w:i.pstyle("width").pfValue,h:i.pstyle("height").pfValue},v.x1=h.x-v.w/2,v.x2=h.x+v.w/2,v.y1=h.y-v.h/2,v.y2=h.y+v.h/2);function c(N,A,P){var b=0,M=0,C=A+P;return N>0&&C>0&&(b=A/C*N,M=P/C*N),{biasDiff:b,biasComplementDiff:M}}function g(N,A,P,b){if(P.units==="%")switch(b){case"width":return N>0?P.pfValue*N:0;case"height":return A>0?P.pfValue*A:0;case"average":return N>0&&A>0?P.pfValue*(N+A)/2:0;case"min":return N>0&&A>0?N>A?P.pfValue*A:P.pfValue*N:0;case"max":return N>0&&A>0?N>A?P.pfValue*N:P.pfValue*A:0;default:return 0}else return P.units==="px"?P.pfValue:0}var d=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(d=d*100/f.width.val);var m=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(m=m*100/f.width.val);var p=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(p=p*100/f.height.val);var y=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(y=y*100/f.height.val);var E=c(f.width.val-v.w,d,m),T=E.biasDiff,w=E.biasComplementDiff,x=c(f.height.val-v.h,p,y),D=x.biasDiff,L=x.biasComplementDiff;l.autoPadding=g(v.w,v.h,i.pstyle("padding"),i.pstyle("padding-relative-to").value),l.autoWidth=Math.max(v.w,f.width.val),h.x=(-T+v.x1+v.x2+w)/2,l.autoHeight=Math.max(v.h,f.height.val),h.y=(-D+v.y1+v.y2+L)/2}for(var a=0;a<this.length;a++){var n=this[a],o=n._private;(!o.compoundBoundsClean||t)&&(r(n),e.batching()||(o.compoundBoundsClean=!0))}return this};var Rt=function(e){return e===1/0||e===-1/0?0:e},It=function(e,r,a,n,o){n-r===0||o-a===0||r==null||a==null||n==null||o==null||(e.x1=r<e.x1?r:e.x1,e.x2=n>e.x2?n:e.x2,e.y1=a<e.y1?a:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},mr=function(e,r){return r==null?e:It(e,r.x1,r.y1,r.x2,r.y2)},ya=function(e,r,a){return Ft(e,r,a)},nn=function(e,r,a){if(!r.cy().headless()){var n=r._private,o=n.rstyle,i=o.arrowWidth/2,l=r.pstyle(a+"-arrow-shape").value,u,s;if(l!=="none"){a==="source"?(u=o.srcX,s=o.srcY):a==="target"?(u=o.tgtX,s=o.tgtY):(u=o.midX,s=o.midY);var f=n.arrowBounds=n.arrowBounds||{},v=f[a]=f[a]||{};v.x1=u-i,v.y1=s-i,v.x2=u+i,v.y2=s+i,v.w=v.x2-v.x1,v.h=v.y2-v.y1,fn(v,1),It(e,v.x1,v.y1,v.x2,v.y2)}}},ii=function(e,r,a){if(!r.cy().headless()){var n;a?n=a+"-":n="";var o=r._private,i=o.rstyle,l=r.pstyle(n+"label").strValue;if(l){var u=r.pstyle("text-halign"),s=r.pstyle("text-valign"),f=ya(i,"labelWidth",a),v=ya(i,"labelHeight",a),h=ya(i,"labelX",a),c=ya(i,"labelY",a),g=r.pstyle(n+"text-margin-x").pfValue,d=r.pstyle(n+"text-margin-y").pfValue,m=r.isEdge(),p=r.pstyle(n+"text-rotation"),y=r.pstyle("text-outline-width").pfValue,E=r.pstyle("text-border-width").pfValue,T=E/2,w=r.pstyle("text-background-padding").pfValue,x=2,D=v,L=f,N=L/2,A=D/2,P,b,M,C;if(m)P=h-N,b=h+N,M=c-A,C=c+A;else{switch(u.value){case"left":P=h-L,b=h;break;case"center":P=h-N,b=h+N;break;case"right":P=h,b=h+L;break}switch(s.value){case"top":M=c-D,C=c;break;case"center":M=c-A,C=c+A;break;case"bottom":M=c,C=c+D;break}}P+=g-Math.max(y,T)-w-x,b+=g+Math.max(y,T)+w+x,M+=d-Math.max(y,T)-w-x,C+=d+Math.max(y,T)+w+x;var O=a||"main",S=o.labelBounds,R=S[O]=S[O]||{};R.x1=P,R.y1=M,R.x2=b,R.y2=C,R.w=b-P,R.h=C-M;var B=m&&p.strValue==="autorotate",z=p.pfValue!=null&&p.pfValue!==0;if(B||z){var G=B?ya(o.rstyle,"labelAngle",a):p.pfValue,k=Math.cos(G),H=Math.sin(G),$=(P+b)/2,V=(M+C)/2;if(!m){switch(u.value){case"left":$=b;break;case"right":$=P;break}switch(s.value){case"top":V=C;break;case"bottom":V=M;break}}var X=function(Ce,Q){return Ce=Ce-$,Q=Q-V,{x:Ce*k-Q*H+$,y:Ce*H+Q*k+V}},U=X(P,M),F=X(P,C),Y=X(b,M),q=X(b,C);P=Math.min(U.x,F.x,Y.x,q.x),b=Math.max(U.x,F.x,Y.x,q.x),M=Math.min(U.y,F.y,Y.y,q.y),C=Math.max(U.y,F.y,Y.y,q.y)}var K=O+"Rot",j=S[K]=S[K]||{};j.x1=P,j.y1=M,j.x2=b,j.y2=C,j.w=b-P,j.h=C-M,It(e,P,M,b,C),It(o.labelBounds.all,P,M,b,C)}return e}},Iy=function(e,r){var a=e._private.cy,n=a.styleEnabled(),o=a.headless(),i=Lt(),l=e._private,u=e.isNode(),s=e.isEdge(),f,v,h,c,g,d,m=l.rstyle,p=u&&n?e.pstyle("bounds-expansion").pfValue:[0],y=function(de){return de.pstyle("display").value!=="none"},E=!n||y(e)&&(!s||y(e.source())&&y(e.target()));if(E){var T=0,w=0;n&&r.includeOverlays&&(T=e.pstyle("overlay-opacity").value,T!==0&&(w=e.pstyle("overlay-padding").value));var x=0,D=0;n&&r.includeUnderlays&&(x=e.pstyle("underlay-opacity").value,x!==0&&(D=e.pstyle("underlay-padding").value));var L=Math.max(w,D),N=0,A=0;if(n&&(N=e.pstyle("width").pfValue,A=N/2),u&&r.includeNodes){var P=e.position();g=P.x,d=P.y;var b=e.outerWidth(),M=b/2,C=e.outerHeight(),O=C/2;f=g-M,v=g+M,h=d-O,c=d+O,It(i,f,h,v,c)}else if(s&&r.includeEdges)if(n&&!o){var S=e.pstyle("curve-style").strValue;if(f=Math.min(m.srcX,m.midX,m.tgtX),v=Math.max(m.srcX,m.midX,m.tgtX),h=Math.min(m.srcY,m.midY,m.tgtY),c=Math.max(m.srcY,m.midY,m.tgtY),f-=A,v+=A,h-=A,c+=A,It(i,f,h,v,c),S==="haystack"){var R=m.haystackPts;if(R&&R.length===2){if(f=R[0].x,h=R[0].y,v=R[1].x,c=R[1].y,f>v){var B=f;f=v,v=B}if(h>c){var z=h;h=c,c=z}It(i,f-A,h-A,v+A,c+A)}}else if(S==="bezier"||S==="unbundled-bezier"||S==="segments"||S==="taxi"){var G;switch(S){case"bezier":case"unbundled-bezier":G=m.bezierPts;break;case"segments":case"taxi":G=m.linePts;break}if(G!=null)for(var k=0;k<G.length;k++){var H=G[k];f=H.x-A,v=H.x+A,h=H.y-A,c=H.y+A,It(i,f,h,v,c)}}}else{var $=e.source(),V=$.position(),X=e.target(),U=X.position();if(f=V.x,v=U.x,h=V.y,c=U.y,f>v){var F=f;f=v,v=F}if(h>c){var Y=h;h=c,c=Y}f-=A,v+=A,h-=A,c+=A,It(i,f,h,v,c)}if(n&&r.includeEdges&&s&&(nn(i,e,"mid-source"),nn(i,e,"mid-target"),nn(i,e,"source"),nn(i,e,"target")),n){var q=e.pstyle("ghost").value==="yes";if(q){var K=e.pstyle("ghost-offset-x").pfValue,j=e.pstyle("ghost-offset-y").pfValue;It(i,i.x1+K,i.y1+j,i.x2+K,i.y2+j)}}var ge=l.bodyBounds=l.bodyBounds||{};Ol(ge,i),ti(ge,p),fn(ge,1),n&&(f=i.x1,v=i.x2,h=i.y1,c=i.y2,It(i,f-L,h-L,v+L,c+L));var Ce=l.overlayBounds=l.overlayBounds||{};Ol(Ce,i),ti(Ce,p),fn(Ce,1);var Q=l.labelBounds=l.labelBounds||{};Q.all!=null?sp(Q.all):Q.all=Lt(),n&&r.includeLabels&&(r.includeMainLabels&&ii(i,e,null),s&&(r.includeSourceLabels&&ii(i,e,"source"),r.includeTargetLabels&&ii(i,e,"target")))}return i.x1=Rt(i.x1),i.y1=Rt(i.y1),i.x2=Rt(i.x2),i.y2=Rt(i.y2),i.w=Rt(i.x2-i.x1),i.h=Rt(i.y2-i.y1),i.w>0&&i.h>0&&E&&(ti(i,p),fn(i,1)),i},hf=function(e){var r=0,a=function(i){return(i?1:0)<<r++},n=0;return n+=a(e.incudeNodes),n+=a(e.includeEdges),n+=a(e.includeLabels),n+=a(e.includeMainLabels),n+=a(e.includeSourceLabels),n+=a(e.includeTargetLabels),n+=a(e.includeOverlays),n},cf=function(e){if(e.isEdge()){var r=e.source().position(),a=e.target().position(),n=function(i){return Math.round(i)};return Mg([n(r.x),n(r.y),n(a.x),n(a.y)])}else return 0},Kl=function(e,r){var a=e._private,n,o=e.isEdge(),i=r==null?Zl:hf(r),l=i===Zl,u=cf(e),s=a.bbCachePosKey===u,f=r.useCache&&s,v=function(d){return d._private.bbCache==null||d._private.styleDirty},h=!f||v(e)||o&&v(e.source())||v(e.target());if(h?(s||e.recalculateRenderedStyle(f),n=Iy(e,Pa),a.bbCache=n,a.bbCachePosKey=u):n=a.bbCache,!l){var c=e.isNode();n=Lt(),(r.includeNodes&&c||r.includeEdges&&!c)&&(r.includeOverlays?mr(n,a.overlayBounds):mr(n,a.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!o||r.includeSourceLabels&&r.includeTargetLabels)?mr(n,a.labelBounds.all):(r.includeMainLabels&&mr(n,a.labelBounds.mainRot),r.includeSourceLabels&&mr(n,a.labelBounds.sourceRot),r.includeTargetLabels&&mr(n,a.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Pa={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Zl=hf(Pa),Ql=gt(Pa);cr.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=Pa:t=Ql(t),e=Kl(this[0],t);else{e=Lt(),t=t||Pa;var r=Ql(t),a=this,n=a.cy(),o=n.styleEnabled();if(o)for(var i=0;i<a.length;i++){var l=a[i],u=l._private,s=cf(l),f=u.bbCachePosKey===s,v=r.useCache&&f&&!u.styleDirty;l.recalculateRenderedStyle(v)}this.updateCompoundBounds(!t.useCache);for(var h=0;h<a.length;h++){var c=a[h];mr(e,Kl(c,r))}}return e.x1=Rt(e.x1),e.y1=Rt(e.y1),e.x2=Rt(e.x2),e.y2=Rt(e.y2),e.w=Rt(e.x2-e.x1),e.h=Rt(e.y2-e.y1),e};cr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};cr.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),a=r.hasCompoundNodes(),n=r.collection();if(a&&(n=e.filter(function(s){return s.isParent()}),e=e.not(n)),Ve(t)){var o=t;t=function(){return o}}var i=function(f,v){return f._private.bbAtOldPos=t(f,v)},l=function(f){return f._private.bbAtOldPos};r.startBatch(),e.forEach(i).silentPositions(t),a&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0));var u=op(this.boundingBox({useCache:!1}));return e.silentPositions(l),a&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0)),r.endBatch(),u};Kr.boundingbox=Kr.bb=Kr.boundingBox;Kr.renderedBoundingbox=Kr.renderedBoundingBox;var Fy=cr,xa,Ha;xa=Ha={};var df=function(e){e.uppercaseName=Ll(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Ll(e.outerName),xa[e.name]=function(){var a=this[0],n=a._private,o=n.cy,i=o._private.styleEnabled;if(a)if(i){if(a.isParent())return a.updateCompoundBounds(),n[e.autoName]||0;var l=a.pstyle(e.name);switch(l.strValue){case"label":return a.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return l.pfValue}}else return 1},xa["outer"+e.uppercaseName]=function(){var a=this[0],n=a._private,o=n.cy,i=o._private.styleEnabled;if(a)if(i){var l=a[e.name](),u=a.pstyle("border-width").pfValue,s=2*a.padding();return l+u+s}else return 1},xa["rendered"+e.uppercaseName]=function(){var a=this[0];if(a){var n=a[e.name]();return n*this.cy().zoom()}},xa["rendered"+e.uppercaseOuterName]=function(){var a=this[0];if(a){var n=a[e.outerName]();return n*this.cy().zoom()}}};df({name:"width"});df({name:"height"});Ha.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Ha.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Ha.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var By=Ha,ky=function(e,r){if(e.isEdge())return r(e)},zy=function(e,r){if(e.isEdge()){var a=e.cy();return Mn(r(e),a.zoom(),a.pan())}},Gy=function(e,r){if(e.isEdge()){var a=e.cy(),n=a.pan(),o=a.zoom();return r(e).map(function(i){return Mn(i,o,n)})}},Vy=function(e){return e.renderer().getControlPoints(e)},Hy=function(e){return e.renderer().getSegmentPoints(e)},Uy=function(e){return e.renderer().getSourceEndpoint(e)},Yy=function(e){return e.renderer().getTargetEndpoint(e)},qy=function(e){return e.renderer().getEdgeMidpoint(e)},Jl={controlPoints:{get:Vy,mult:!0},segmentPoints:{get:Hy,mult:!0},sourceEndpoint:{get:Uy},targetEndpoint:{get:Yy},midpoint:{get:qy}},Wy=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},Xy=Object.keys(Jl).reduce(function(t,e){var r=Jl[e],a=Wy(e);return t[e]=function(){return ky(this,r.get)},r.mult?t[a]=function(){return Gy(this,r.get)}:t[a]=function(){return zy(this,r.get)},t},{}),$y=Ie({},Py,Fy,By,Xy);var gf=function(e,r){this.recycle(e,r)};function ma(){return!1}function on(){return!0}gf.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ma,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?on:ma):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var a=this.position,n=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:a.x*n+o.x,y:a.y*n+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=on;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=on;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=on,this.stopPropagation()},isDefaultPrevented:ma,isPropagationStopped:ma,isImmediatePropagationStopped:ma};var pf=/^([^.]+)(\.(?:[^.]+))?$/,Ky=".*",yf={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},_l=Object.keys(yf),Zy={};function Rn(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zy,e=arguments.length>1?arguments[1]:void 0,r=0;r<_l.length;r++){var a=_l[r];this[a]=t[a]||yf[a]}this.context=e||this.context,this.listeners=[],this.emitting=0}var hr=Rn.prototype,mf=function(e,r,a,n,o,i,l){at(n)&&(o=n,n=null),l&&(i==null?i=l:i=Ie({},i,l));for(var u=Je(a)?a:a.split(/\s+/),s=0;s<u.length;s++){var f=u[s];if(!lr(f)){var v=f.match(pf);if(v){var h=v[1],c=v[2]?v[2]:null,g=r(e,f,h,c,n,o,i);if(g===!1)break}}}},jl=function(e,r){return e.addEventFields(e.context,r),new gf(r.type,r)},Qy=function(e,r,a){if(ug(a)){r(e,a);return}else if(Ve(a)){r(e,jl(e,a));return}for(var n=Je(a)?a:a.split(/\s+/),o=0;o<n.length;o++){var i=n[o];if(!lr(i)){var l=i.match(pf);if(l){var u=l[1],s=l[2]?l[2]:null,f=jl(e,{type:u,namespace:s,target:e.context});r(e,f)}}}};hr.on=hr.addListener=function(t,e,r,a,n){return mf(this,function(o,i,l,u,s,f,v){at(f)&&o.listeners.push({event:i,callback:f,type:l,namespace:u,qualifier:s,conf:v})},t,e,r,a,n),this};hr.one=function(t,e,r,a){return this.on(t,e,r,a,{one:!0})};hr.removeListener=hr.off=function(t,e,r,a){var n=this;this.emitting!==0&&(this.listeners=Ig(this.listeners));for(var o=this.listeners,i=function(s){var f=o[s];mf(n,function(v,h,c,g,d,m){if((f.type===c||t==="*")&&(!g&&f.namespace!==".*"||f.namespace===g)&&(!d||v.qualifierCompare(f.qualifier,d))&&(!m||f.callback===m))return o.splice(s,1),!1},t,e,r,a)},l=o.length-1;l>=0;l--)i(l);return this};hr.removeAllListeners=function(){return this.removeListener("*")};hr.emit=hr.trigger=function(t,e,r){var a=this.listeners,n=a.length;return this.emitting++,Je(e)||(e=[e]),Qy(this,function(o,i){r!=null&&(a=[{event:i.event,type:i.type,namespace:i.namespace,callback:r}],n=a.length);for(var l=function(f){var v=a[f];if(v.type===i.type&&(!v.namespace||v.namespace===i.namespace||v.namespace===Ky)&&o.eventMatches(o.context,v,i)){var h=[i];e!=null&&Bg(h,e),o.beforeEmit(o.context,v,i),v.conf&&v.conf.one&&(o.listeners=o.listeners.filter(function(d){return d!==v}));var c=o.callbackContext(o.context,v,i),g=v.callback.apply(c,h);o.afterEmit(o.context,v,i),g===!1&&(i.stopPropagation(),i.preventDefault())}},u=0;u<n;u++)l(u);o.bubble(o.context)&&!i.isPropagationStopped()&&o.parent(o.context).emit(i,e)},t),this.emitting--,this};var Jy={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,a){var n=r.qualifier;return n!=null?e!==a.target&&Ga(a.target)&&n.matches(a.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,a){return r.qualifier!=null?a.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},sn=function(e){return Re(e)?new fr(e):e},Ef={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],a=r._private;a.emitter||(a.emitter=new Rn(Jy,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,a){for(var n=sn(r),o=0;o<this.length;o++){var i=this[o];i.emitter().on(e,n,a)}return this},removeListener:function(e,r,a){for(var n=sn(r),o=0;o<this.length;o++){var i=this[o];i.emitter().removeListener(e,n,a)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,a){for(var n=sn(r),o=0;o<this.length;o++){var i=this[o];i.emitter().one(e,n,a)}return this},once:function(e,r,a){for(var n=sn(r),o=0;o<this.length;o++){var i=this[o];i.emitter().on(e,n,a,{once:!0,onceCollection:this})}},emit:function(e,r){for(var a=0;a<this.length;a++){var n=this[a];n.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};qe.eventAliasesOn(Ef);var bf={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),a=0;a<this.length;a++){var n=this[a];n.isNode()?e.push(n):r.push(n)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Re(e)||Nt(e))return new fr(e).filter(this);if(at(e)){for(var a=this.spawn(),n=this,o=0;o<n.length;o++){var i=n[o],l=r?e.apply(r,[i,o,n]):e(i,o,n);l&&a.push(i)}return a}return this.spawn()},not:function(e){if(e){Re(e)&&(e=this.filter(e));for(var r=this.spawn(),a=0;a<this.length;a++){var n=this[a],o=e.has(n);o||r.push(n)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Re(e)){var r=e;return this.filter(r)}for(var a=this.spawn(),n=this,o=e,i=this.length<e.length,l=i?n:o,u=i?o:n,s=0;s<l.length;s++){var f=l[s];u.has(f)&&a.push(f)}return a},xor:function(e){var r=this._private.cy;Re(e)&&(e=r.$(e));var a=this.spawn(),n=this,o=e,i=function(u,s){for(var f=0;f<u.length;f++){var v=u[f],h=v._private.data.id,c=s.hasElementWithId(h);c||a.push(v)}};return i(n,o),i(o,n),a},diff:function(e){var r=this._private.cy;Re(e)&&(e=r.$(e));var a=this.spawn(),n=this.spawn(),o=this.spawn(),i=this,l=e,u=function(f,v,h){for(var c=0;c<f.length;c++){var g=f[c],d=g._private.data.id,m=v.hasElementWithId(d);m?o.merge(g):h.push(g)}};return u(i,l,a),u(l,i,n),{left:a,right:n,both:o}},add:function(e){var r=this._private.cy;if(!e)return this;if(Re(e)){var a=e;e=r.mutableElements().filter(a)}for(var n=this.spawnSelf(),o=0;o<e.length;o++){var i=e[o],l=!this.has(i);l&&n.push(i)}return n},merge:function(e){var r=this._private,a=r.cy;if(!e)return this;if(e&&Re(e)){var n=e;e=a.mutableElements().filter(n)}for(var o=r.map,i=0;i<e.length;i++){var l=e[i],u=l._private.data.id,s=!o.has(u);if(s){var f=this.length++;this[f]=l,o.set(u,{ele:l,index:f})}}return this},unmergeAt:function(e){var r=this[e],a=r.id(),n=this._private,o=n.map;this[e]=void 0,o.delete(a);var i=e===this.length-1;if(this.length>1&&!i){var l=this.length-1,u=this[l],s=u._private.data.id;this[l]=void 0,this[e]=u,o.set(s,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,a=e._private.data.id,n=r.map,o=n.get(a);if(!o)return this;var i=o.index;return this.unmergeAt(i),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Re(e)){var a=e;e=r.mutableElements().filter(a)}for(var n=0;n<e.length;n++)this.unmergeOne(e[n]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var a=this[r];e(a)&&this.unmergeAt(r)}return this},map:function(e,r){for(var a=[],n=this,o=0;o<n.length;o++){var i=n[o],l=r?e.apply(r,[i,o,n]):e(i,o,n);a.push(l)}return a},reduce:function(e,r){for(var a=r,n=this,o=0;o<n.length;o++)a=e(a,n[o],o,n);return a},max:function(e,r){for(var a=-1/0,n,o=this,i=0;i<o.length;i++){var l=o[i],u=r?e.apply(r,[l,i,o]):e(l,i,o);u>a&&(a=u,n=l)}return{value:a,ele:n}},min:function(e,r){for(var a=1/0,n,o=this,i=0;i<o.length;i++){var l=o[i],u=r?e.apply(r,[l,i,o]):e(l,i,o);u<a&&(a=u,n=l)}return{value:a,ele:n}}},Ue=bf;Ue.u=Ue["|"]=Ue["+"]=Ue.union=Ue.or=Ue.add;Ue["\\"]=Ue["!"]=Ue["-"]=Ue.difference=Ue.relativeComplement=Ue.subtract=Ue.not;Ue.n=Ue["&"]=Ue["."]=Ue.and=Ue.intersection=Ue.intersect;Ue["^"]=Ue["(+)"]=Ue["(-)"]=Ue.symmetricDifference=Ue.symdiff=Ue.xor;Ue.fnFilter=Ue.filterFn=Ue.stdFilter=Ue.filter;Ue.complement=Ue.abscomp=Ue.absoluteComplement;var _y={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},wf=function(e,r){var a=e.cy(),n=a.hasCompoundNodes();function o(f){var v=f.pstyle("z-compound-depth");return v.value==="auto"?n?f.zDepth():0:v.value==="bottom"?-1:v.value==="top"?Si:0}var i=o(e)-o(r);if(i!==0)return i;function l(f){var v=f.pstyle("z-index-compare");return v.value==="auto"&&f.isNode()?1:0}var u=l(e)-l(r);if(u!==0)return u;var s=e.pstyle("z-index").value-r.pstyle("z-index").value;return s!==0?s:e.poolIndex()-r.poolIndex()},wn={forEach:function(e,r){if(at(e))for(var a=this.length,n=0;n<a;n++){var o=this[n],i=r?e.apply(r,[o,n,this]):e(o,n,this);if(i===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var a=[],n=this.length;r==null&&(r=n),e==null&&(e=0),e<0&&(e=n+e),r<0&&(r=n+r);for(var o=e;o>=0&&o<r&&o<n;o++)a.push(this[o]);return this.spawn(a)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!at(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(wf)},zDepth:function(){var e=this[0];if(e){var r=e._private,a=r.group;if(a==="nodes"){var n=r.data.parent?e.parents().size():0;return e.isParent()?n:Si-1}else{var o=r.source,i=r.target,l=o.zDepth(),u=i.zDepth();return Math.max(l,u,0)}}}};wn.each=wn.forEach;var jy=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":ut(Symbol))!=e&&ut(Symbol.iterator)!=e;r&&(wn[Symbol.iterator]=function(){var a=this,n={value:void 0,done:!1},o=0,i=this.length;return Su({next:function(){return o<i?n.value=a[o++]:(n.value=void 0,n.done=!0),n}},Symbol.iterator,function(){return this})})};jy();var em=gt({nodeDimensionsIncludeLabels:!1}),hn={layoutDimensions:function(e){e=em(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var a=this.boundingBox();r={w:a.w,h:a.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,a){var n=this.nodes().filter(function(w){return!w.isParent()}),o=this.cy(),i=r.eles,l=function(x){return x.id()},u=Sa(a,l);e.emit({type:"layoutstart",layout:e}),e.animations=[];var s=function(x,D,L){var N={x:D.x1+D.w/2,y:D.y1+D.h/2},A={x:(L.x-N.x)*x,y:(L.y-N.y)*x};return{x:N.x+A.x,y:N.y+A.y}},f=r.spacingFactor&&r.spacingFactor!==1,v=function(){if(!f)return null;for(var x=Lt(),D=0;D<n.length;D++){var L=n[D],N=u(L,D);up(x,N.x,N.y)}return x},h=v(),c=Sa(function(w,x){var D=u(w,x);if(f){var L=Math.abs(r.spacingFactor);D=s(L,h,D)}return r.transform!=null&&(D=r.transform(w,D)),D},l);if(r.animate){for(var g=0;g<n.length;g++){var d=n[g],m=c(d,g),p=r.animateFilter==null||r.animateFilter(d,g);if(p){var y=d.animation({position:m,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}else d.position(m)}if(r.fit){var E=o.animation({fit:{boundingBox:i.boundingBoxAt(c),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(E)}else if(r.zoom!==void 0&&r.pan!==void 0){var T=o.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(T)}e.animations.forEach(function(w){return w.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),jr.all(e.animations.map(function(w){return w.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else n.positions(c),r.fit&&o.fit(r.eles,r.padding),r.zoom!=null&&o.zoom(r.zoom),r.pan&&o.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Ie({},e,{eles:this}))}};hn.createLayout=hn.makeLayout=hn.layout;function xf(t,e,r){var a=r._private,n=a.styleCache=a.styleCache||[],o;return(o=n[t])!=null||(o=n[t]=e(r)),o}function Pn(t,e){return t=br(t),function(a){return xf(t,e,a)}}function In(t,e){t=br(t);var r=function(n){return e.call(n)};return function(){var n=this[0];if(n)return xf(t,r,n)}}var ct={recalculateRenderedStyle:function(e){var r=this.cy(),a=r.renderer(),n=r.styleEnabled();return a&&n&&a.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var a;a=this.spawnSelf().merge(this.descendants()).merge(this.parents()),a.merge(a.connectedEdges()),a.forEach(r)}else this.forEach(function(n){r(n),n.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var a=r._private.batchStyleEles;return a.merge(this),this}var n=r.hasCompoundNodes(),o=this;e=!!(e||e===void 0),n&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=o;return e?i.emitAndNotify("style"):i.emit("style"),o.forEach(function(l){return l._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var a=this[r];a._private.styleDirty&&(a._private.styleDirty=!1,e.style().apply(a))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this[0],n=a.cy();if(n.styleEnabled()&&a){this.cleanStyle();var o=a._private.style[e];return o??(r?n.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var a=r.pstyle(e);return a.pfValue!==void 0?a.pfValue:a.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var a=this[0];if(a)return r.style().getRenderedStyle(a,e)},style:function(e,r){var a=this.cy();if(!a.styleEnabled())return this;var n=!1,o=a.style();if(Ve(e)){var i=e;o.applyBypass(this,i,n),this.emitAndNotify("style")}else if(Re(e))if(r===void 0){var l=this[0];return l?o.getStylePropertyValue(l,e):void 0}else o.applyBypass(this,e,r,n),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var a=!1,n=r.style(),o=this;if(e===void 0)for(var i=0;i<o.length;i++){var l=o[i];n.removeAllBypasses(l,a)}else{e=e.split(/\s+/);for(var u=0;u<o.length;u++){var s=o[u];n.removeBypasses(s,e,a)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),a=this[0];if(a){var n=a._private,o=a.pstyle("opacity").value;if(!r)return o;var i=n.data.parent?a.parents():null;if(i)for(var l=0;l<i.length;l++){var u=i[l],s=u.pstyle("opacity").value;o=s*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],a=r.cy().hasCompoundNodes();if(r)return a?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function oi(t,e){var r=t._private,a=r.data.parent?t.parents():null;if(a)for(var n=0;n<a.length;n++){var o=a[n];if(!e(o))return!1}return!0}function Fi(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,a=t.parentOk||t.ok;return function(){var n=this.cy();if(!n.styleEnabled())return!0;var o=this[0],i=n.hasCompoundNodes();if(o){var l=o._private;if(!e(o))return!1;if(o.isNode())return!i||oi(o,a);var u=l.source,s=l.target;return r(u)&&(!i||oi(u,r))&&(u===s||r(s)&&(!i||oi(s,r)))}}}var ea=Pn("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});ct.takesUpSpace=In("takesUpSpace",Fi({ok:ea}));var tm=Pn("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&ea(t)}),rm=Pn("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&ea(t)});ct.interactive=In("interactive",Fi({ok:tm,parentOk:rm,edgeOkViaNode:ea}));ct.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var am=Pn("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&ea(t)}),nm=ea;ct.visible=In("visible",Fi({ok:am,edgeOkViaNode:nm}));ct.hidden=function(){var t=this[0];if(t)return!t.visible()};ct.isBundledBezier=In("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});ct.bypass=ct.css=ct.style;ct.renderedCss=ct.renderedStyle;ct.removeBypass=ct.removeCss=ct.removeStyle;ct.pstyle=ct.parsedStyle;var sr={};function eu(t){return function(){var e=arguments,r=[];if(e.length===2){var a=e[0],n=e[1];this.on(t.event,a,n)}else if(e.length===1&&at(e[0])){var o=e[0];this.on(t.event,o)}else if(e.length===0||e.length===1&&Je(e[0])){for(var i=e.length===1?e[0]:null,l=0;l<this.length;l++){var u=this[l],s=!t.ableField||u._private[t.ableField],f=u._private[t.field]!=t.value;if(t.overrideAble){var v=t.overrideAble(u);if(v!==void 0&&(s=v,!v))return this}s&&(u._private[t.field]=t.value,f&&r.push(u))}var h=this.spawn(r);h.updateStyle(),h.emit(t.event),i&&h.emit(i)}return this}}function ta(t){sr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},sr[t.on]=eu({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),sr[t.off]=eu({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}ta({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ta({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ta({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ta({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});sr.deselect=sr.unselect;sr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};ta({field:"active",on:"activate",off:"unactivate"});ta({field:"pannable",on:"panify",off:"unpanify"});sr.inactive=function(){var t=this[0];if(t)return!t._private.active};var mt={},tu=function(e){return function(a){for(var n=this,o=[],i=0;i<n.length;i++){var l=n[i];if(l.isNode()){for(var u=!1,s=l.connectedEdges(),f=0;f<s.length;f++){var v=s[f],h=v.source(),c=v.target();if(e.noIncomingEdges&&c===l&&h!==l||e.noOutgoingEdges&&h===l&&c!==l){u=!0;break}}u||o.push(l)}}return this.spawn(o,!0).filter(a)}},ru=function(e){return function(r){for(var a=this,n=[],o=0;o<a.length;o++){var i=a[o];if(i.isNode())for(var l=i.connectedEdges(),u=0;u<l.length;u++){var s=l[u],f=s.source(),v=s.target();e.outgoing&&f===i?(n.push(s),n.push(v)):e.incoming&&v===i&&(n.push(s),n.push(f))}}return this.spawn(n,!0).filter(r)}},au=function(e){return function(r){for(var a=this,n=[],o={};;){var i=e.outgoing?a.outgoers():a.incomers();if(i.length===0)break;for(var l=!1,u=0;u<i.length;u++){var s=i[u],f=s.id();o[f]||(o[f]=!0,n.push(s),l=!0)}if(!l)break;a=i}return this.spawn(n,!0).filter(r)}};mt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Ie(mt,{roots:tu({noIncomingEdges:!0}),leaves:tu({noOutgoingEdges:!0}),outgoers:Pt(ru({outgoing:!0}),"outgoers"),successors:au({outgoing:!0}),incomers:Pt(ru({incoming:!0}),"incomers"),predecessors:au({incoming:!0})});Ie(mt,{neighborhood:Pt(function(t){for(var e=[],r=this.nodes(),a=0;a<r.length;a++)for(var n=r[a],o=n.connectedEdges(),i=0;i<o.length;i++){var l=o[i],u=l.source(),s=l.target(),f=n===u?s:u;f.length>0&&e.push(f[0]),e.push(l[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});mt.neighbourhood=mt.neighborhood;mt.closedNeighbourhood=mt.closedNeighborhood;mt.openNeighbourhood=mt.openNeighborhood;Ie(mt,{source:Pt(function(e){var r=this[0],a;return r&&(a=r._private.source||r.cy().collection()),a&&e?a.filter(e):a},"source"),target:Pt(function(e){var r=this[0],a;return r&&(a=r._private.target||r.cy().collection()),a&&e?a.filter(e):a},"target"),sources:nu({attr:"source"}),targets:nu({attr:"target"})});function nu(t){return function(r){for(var a=[],n=0;n<this.length;n++){var o=this[n],i=o._private[t.attr];i&&a.push(i)}return this.spawn(a,!0).filter(r)}}Ie(mt,{edgesWith:Pt(iu(),"edgesWith"),edgesTo:Pt(iu({thisIsSrc:!0}),"edgesTo")});function iu(t){return function(r){var a=[],n=this._private.cy,o=t||{};Re(r)&&(r=n.$(r));for(var i=0;i<r.length;i++)for(var l=r[i]._private.edges,u=0;u<l.length;u++){var s=l[u],f=s._private.data,v=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),h=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target),c=v||h;c&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!v||o.thisIsTgt&&!h)||a.push(s))}return this.spawn(a,!0)}}Ie(mt,{connectedEdges:Pt(function(t){for(var e=[],r=this,a=0;a<r.length;a++){var n=r[a];if(n.isNode())for(var o=n._private.edges,i=0;i<o.length;i++){var l=o[i];e.push(l)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Pt(function(t){for(var e=[],r=this,a=0;a<r.length;a++){var n=r[a];n.isEdge()&&(e.push(n.source()[0]),e.push(n.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Pt(ou(),"parallelEdges"),codirectedEdges:Pt(ou({codirected:!0}),"codirectedEdges")});function ou(t){var e={codirected:!1};return t=Ie({},e,t),function(a){for(var n=[],o=this.edges(),i=t,l=0;l<o.length;l++)for(var u=o[l],s=u._private,f=s.source,v=f._private.data.id,h=s.data.target,c=f._private.edges,g=0;g<c.length;g++){var d=c[g],m=d._private.data,p=m.target,y=m.source,E=p===h&&y===v,T=v===p&&h===y;(i.codirected&&E||!i.codirected&&(E||T))&&n.push(d)}return this.spawn(n,!0).filter(a)}}Ie(mt,{components:function(e){var r=this,a=r.cy(),n=a.collection(),o=e==null?r.nodes():e.nodes(),i=[];e!=null&&o.empty()&&(o=e.sources());var l=function(f,v){n.merge(f),o.unmerge(f),v.merge(f)};if(o.empty())return r.spawn();var u=function(){var f=a.collection();i.push(f);var v=o[0];l(v,f),r.bfs({directed:!1,roots:v,visit:function(c){return l(c,f)}}),f.forEach(function(h){h.connectedEdges().forEach(function(c){r.has(c)&&f.has(c.source())&&f.has(c.target())&&f.merge(c)})})};do u();while(o.length>0);return i},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});mt.componentsOf=mt.components;var dt=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){nt("A collection must have a reference to the core");return}var o=new zt,i=!1;if(!r)r=[];else if(r.length>0&&Ve(r[0])&&!Ga(r[0])){i=!0;for(var l=[],u=new _r,s=0,f=r.length;s<f;s++){var v=r[s];v.data==null&&(v.data={});var h=v.data;if(h.id==null)h.id=Vu();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var c=new Nn(e,v,!1);l.push(c),u.add(h.id)}r=l}this.length=0;for(var g=0,d=r.length;g<d;g++){var m=r[g][0];if(m!=null){var p=m._private.data.id;(!a||!o.has(p))&&(a&&o.set(p,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var E=this.lazyMap=new zt,T=this.eles,w=0;w<T.length;w++){var x=T[w];E.set(x.id(),{index:w,ele:x})}}},a&&(this._private.map=o),i&&!n&&this.restore()},et=Nn.prototype=dt.prototype=Object.create(Array.prototype);et.instanceString=function(){return"collection"};et.spawn=function(t,e){return new dt(this.cy(),t,e)};et.spawnSelf=function(){return this.spawn(this)};et.cy=function(){return this._private.cy};et.renderer=function(){return this._private.cy.renderer()};et.element=function(){return this[0]};et.collection=function(){return Nu(this)?this:new dt(this._private.cy,[this])};et.unique=function(){return new dt(this._private.cy,this,!0)};et.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};et.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new dt(e)};et.$id=et.getElementById;et.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};et.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};et.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};et.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var a=e._private;if(Ve(t)){if(r.startBatch(),t.data){e.data(t.data);var n=a.data;if(e.isEdge()){var o=!1,i={},l=t.data.source,u=t.data.target;l!=null&&l!=n.source&&(i.source=""+l,o=!0),u!=null&&u!=n.target&&(i.target=""+u,o=!0),o&&(e=e.move(i))}else{var s="parent"in t.data,f=t.data.parent;s&&(f!=null||n.parent!=null)&&f!=n.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}t.position&&e.position(t.position);var v=function(d,m,p){var y=t[d];y!=null&&y!==a[d]&&(y?e[m]():e[p]())};return v("removed","remove","restore"),v("selected","select","unselect"),v("selectable","selectify","unselectify"),v("locked","lock","unlock"),v("grabbable","grabify","ungrabify"),v("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var h={data:kt(a.data),position:kt(a.position),group:a.group,removed:a.removed,selected:a.selected,selectable:a.selectable,locked:a.locked,grabbable:a.grabbable,pannable:a.pannable,classes:null};h.classes="";var c=0;return a.classes.forEach(function(g){return h.classes+=c++===0?g:" "+g}),h}}};et.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],a=r.json();t.push(a)}return t};et.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var a=this[r],n=a.json(),o=new Nn(t,n,!1);e.push(o)}return new dt(t,e)};et.copy=et.clone;et.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,a=r.cy(),n=a._private,o=[],i=[],l,u=0,s=r.length;u<s;u++){var f=r[u];e&&!f.removed()||(f.isNode()?o.push(f):i.push(f))}l=o.concat(i);var v,h=function(){l.splice(v,1),v--};for(v=0;v<l.length;v++){var c=l[v],g=c._private,d=g.data;if(c.clearTraversalCache(),!(!e&&!g.removed)){if(d.id===void 0)d.id=Vu();else if(ye(d.id))d.id=""+d.id;else if(lr(d.id)||!Re(d.id)){nt("Can not create element with invalid string ID `"+d.id+"`"),h();continue}else if(a.hasElementWithId(d.id)){nt("Can not create second element with ID `"+d.id+"`"),h();continue}}var m=d.id;if(c.isNode()){var p=g.position;p.x==null&&(p.x=0),p.y==null&&(p.y=0)}if(c.isEdge()){for(var y=c,E=["source","target"],T=E.length,w=!1,x=0;x<T;x++){var D=E[x],L=d[D];ye(L)&&(L=d[D]=""+d[D]),L==null||L===""?(nt("Can not create edge `"+m+"` with unspecified "+D),w=!0):a.hasElementWithId(L)||(nt("Can not create edge `"+m+"` with nonexistant "+D+" `"+L+"`"),w=!0)}if(w){h();continue}var N=a.getElementById(d.source),A=a.getElementById(d.target);N.same(A)?N._private.edges.push(y):(N._private.edges.push(y),A._private.edges.push(y)),y._private.source=N,y._private.target=A}g.map=new zt,g.map.set(m,{ele:c,index:0}),g.removed=!1,e&&a.addToPool(c)}for(var P=0;P<o.length;P++){var b=o[P],M=b._private.data;ye(M.parent)&&(M.parent=""+M.parent);var C=M.parent,O=C!=null;if(O||b._private.parent){var S=b._private.parent?a.collection().merge(b._private.parent):a.getElementById(C);if(S.empty())M.parent=void 0;else if(S[0].removed())We("Node added with missing parent, reference to parent removed"),M.parent=void 0,b._private.parent=null;else{for(var R=!1,B=S;!B.empty();){if(b.same(B)){R=!0,M.parent=void 0;break}B=B.parent()}R||(S[0]._private.children.push(b),b._private.parent=S[0],n.hasCompoundNodes=!0)}}}if(l.length>0){for(var z=l.length===r.length?r:new dt(a,l),G=0;G<z.length;G++){var k=z[G];k.isNode()||(k.parallelEdges().clearTraversalCache(),k.source().clearTraversalCache(),k.target().clearTraversalCache())}var H;n.hasCompoundNodes?H=a.collection().merge(z).merge(z.connectedNodes()).merge(z.parent()):H=z,H.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?z.emitAndNotify("add"):e&&z.emit("add")}return r};et.removed=function(){var t=this[0];return t&&t._private.removed};et.inside=function(){var t=this[0];return t&&!t._private.removed};et.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,a=[],n={},o=r._private.cy;function i(C){for(var O=C._private.edges,S=0;S<O.length;S++)u(O[S])}function l(C){for(var O=C._private.children,S=0;S<O.length;S++)u(O[S])}function u(C){var O=n[C.id()];e&&C.removed()||O||(n[C.id()]=!0,C.isNode()?(a.push(C),i(C),l(C)):a.unshift(C))}for(var s=0,f=r.length;s<f;s++){var v=r[s];u(v)}function h(C,O){var S=C._private.edges;ur(S,O),C.clearTraversalCache()}function c(C){C.clearTraversalCache()}var g=[];g.ids={};function d(C,O){O=O[0],C=C[0];var S=C._private.children,R=C.id();ur(S,O),O._private.parent=null,g.ids[R]||(g.ids[R]=!0,g.push(C))}r.dirtyCompoundBoundsCache(),e&&o.removeFromPool(a);for(var m=0;m<a.length;m++){var p=a[m];if(p.isEdge()){var y=p.source()[0],E=p.target()[0];h(y,p),h(E,p);for(var T=p.parallelEdges(),w=0;w<T.length;w++){var x=T[w];c(x),x.isBundledBezier()&&x.dirtyBoundingBoxCache()}}else{var D=p.parent();D.length!==0&&d(D,p)}e&&(p._private.removed=!0)}var L=o._private.elements;o._private.hasCompoundNodes=!1;for(var N=0;N<L.length;N++){var A=L[N];if(A.isParent()){o._private.hasCompoundNodes=!0;break}}var P=new dt(this.cy(),a);P.size()>0&&(t?P.emitAndNotify("remove"):e&&P.emit("remove"));for(var b=0;b<g.length;b++){var M=g[b];(!e||!M.removed())&&M.updateStyle()}return P};et.move=function(t){var e=this._private.cy,r=this,a=!1,n=!1,o=function(g){return g==null?g:""+g};if(t.source!==void 0||t.target!==void 0){var i=o(t.source),l=o(t.target),u=i!=null&&e.hasElementWithId(i),s=l!=null&&e.hasElementWithId(l);(u||s)&&(e.batch(function(){r.remove(a,n),r.emitAndNotify("moveout");for(var c=0;c<r.length;c++){var g=r[c],d=g._private.data;g.isEdge()&&(u&&(d.source=i),s&&(d.target=l))}r.restore(a,n)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var f=o(t.parent),v=f===null||e.hasElementWithId(f);if(v){var h=f===null?void 0:f;e.batch(function(){var c=r.remove(a,n);c.emitAndNotify("moveout");for(var g=0;g<r.length;g++){var d=r[g],m=d._private.data;d.isNode()&&(m.parent=h)}c.restore(a,n)}),r.emitAndNotify("move")}}return this};[ef,py,vn,or,Jr,Ry,On,$y,Ef,bf,_y,wn,hn,ct,sr,mt].forEach(function(t){Ie(et,t)});var im={add:function(e){var r,a=this;if(Nt(e)){var n=e;if(n._private.cy===a)r=n.restore();else{for(var o=[],i=0;i<n.length;i++){var l=n[i];o.push(l.json())}r=new dt(a,o)}}else if(Je(e)){var u=e;r=new dt(a,u)}else if(Ve(e)&&(Je(e.nodes)||Je(e.edges))){for(var s=e,f=[],v=["nodes","edges"],h=0,c=v.length;h<c;h++){var g=v[h],d=s[g];if(Je(d))for(var m=0,p=d.length;m<p;m++){var y=Ie({group:g},d[m]);f.push(y)}}r=new dt(a,f)}else{var E=e;r=new Nn(a,E).collection()}return r},remove:function(e){if(!Nt(e)){if(Re(e)){var r=e;e=this.$(r)}}return e.remove()}};function om(t,e,r,a){var n=4,o=.001,i=1e-7,l=10,u=11,s=1/(u-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var v=0;v<4;++v)if(typeof arguments[v]!="number"||isNaN(arguments[v])||!isFinite(arguments[v]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var h=f?new Float32Array(u):new Array(u);function c(A,P){return 1-3*P+3*A}function g(A,P){return 3*P-6*A}function d(A){return 3*A}function m(A,P,b){return((c(P,b)*A+g(P,b))*A+d(P))*A}function p(A,P,b){return 3*c(P,b)*A*A+2*g(P,b)*A+d(P)}function y(A,P){for(var b=0;b<n;++b){var M=p(P,t,r);if(M===0)return P;var C=m(P,t,r)-A;P-=C/M}return P}function E(){for(var A=0;A<u;++A)h[A]=m(A*s,t,r)}function T(A,P,b){var M,C,O=0;do C=P+(b-P)/2,M=m(C,t,r)-A,M>0?b=C:P=C;while(Math.abs(M)>i&&++O<l);return C}function w(A){for(var P=0,b=1,M=u-1;b!==M&&h[b]<=A;++b)P+=s;--b;var C=(A-h[b])/(h[b+1]-h[b]),O=P+C*s,S=p(O,t,r);return S>=o?y(A,O):S===0?O:T(A,P,P+s)}var x=!1;function D(){x=!0,(t!==e||r!==a)&&E()}var L=function(P){return x||D(),t===e&&r===a?P:P===0?0:P===1?1:m(w(P),e,a)};L.getControlPoints=function(){return[{x:t,y:e},{x:r,y:a}]};var N="generateBezier("+[t,e,r,a]+")";return L.toString=function(){return N},L}var sm=function(){function t(a){return-a.tension*a.x-a.friction*a.v}function e(a,n,o){var i={x:a.x+o.dx*n,v:a.v+o.dv*n,tension:a.tension,friction:a.friction};return{dx:i.v,dv:t(i)}}function r(a,n){var o={dx:a.v,dv:t(a)},i=e(a,n*.5,o),l=e(a,n*.5,i),u=e(a,n,l),s=1/6*(o.dx+2*(i.dx+l.dx)+u.dx),f=1/6*(o.dv+2*(i.dv+l.dv)+u.dv);return a.x=a.x+s*n,a.v=a.v+f*n,a}return function a(n,o,i){var l={x:-1,v:0,tension:null,friction:null},u=[0],s=0,f=1/1e4,v=16/1e3,h,c,g;for(n=parseFloat(n)||500,o=parseFloat(o)||20,i=i||null,l.tension=n,l.friction=o,h=i!==null,h?(s=a(n,o),c=s/i*v):c=v;g=r(g||l,c),u.push(1+g.x),s+=16,Math.abs(g.x)>f&&Math.abs(g.v)>f;);return h?function(d){return u[d*(u.length-1)|0]}:s}}(),je=function(e,r,a,n){var o=om(e,r,a,n);return function(i,l,u){return i+(l-i)*o(u)}},cn={linear:function(e,r,a){return e+(r-e)*a},ease:je(.25,.1,.25,1),"ease-in":je(.42,0,1,1),"ease-out":je(0,0,.58,1),"ease-in-out":je(.42,0,.58,1),"ease-in-sine":je(.47,0,.745,.715),"ease-out-sine":je(.39,.575,.565,1),"ease-in-out-sine":je(.445,.05,.55,.95),"ease-in-quad":je(.55,.085,.68,.53),"ease-out-quad":je(.25,.46,.45,.94),"ease-in-out-quad":je(.455,.03,.515,.955),"ease-in-cubic":je(.55,.055,.675,.19),"ease-out-cubic":je(.215,.61,.355,1),"ease-in-out-cubic":je(.645,.045,.355,1),"ease-in-quart":je(.895,.03,.685,.22),"ease-out-quart":je(.165,.84,.44,1),"ease-in-out-quart":je(.77,0,.175,1),"ease-in-quint":je(.755,.05,.855,.06),"ease-out-quint":je(.23,1,.32,1),"ease-in-out-quint":je(.86,0,.07,1),"ease-in-expo":je(.95,.05,.795,.035),"ease-out-expo":je(.19,1,.22,1),"ease-in-out-expo":je(1,0,0,1),"ease-in-circ":je(.6,.04,.98,.335),"ease-out-circ":je(.075,.82,.165,1),"ease-in-out-circ":je(.785,.135,.15,.86),spring:function(e,r,a){if(a===0)return cn.linear;var n=sm(e,r,a);return function(o,i,l){return o+(i-o)*n(l)}},"cubic-bezier":je};function su(t,e,r,a,n){if(a===1||e===r)return r;var o=n(e,r,a);return t==null||((t.roundValue||t.color)&&(o=Math.round(o)),t.min!==void 0&&(o=Math.max(o,t.min)),t.max!==void 0&&(o=Math.min(o,t.max))),o}function lu(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Vr(t,e,r,a,n){var o=n!=null?n.type:null;r<0?r=0:r>1&&(r=1);var i=lu(t,n),l=lu(e,n);if(ye(i)&&ye(l))return su(o,i,l,r,a);if(Je(i)&&Je(l)){for(var u=[],s=0;s<l.length;s++){var f=i[s],v=l[s];if(f!=null&&v!=null){var h=su(o,f,v,r,a);u.push(h)}else u.push(v)}return u}}function lm(t,e,r,a){var n=!a,o=t._private,i=e._private,l=i.easing,u=i.startTime,s=a?t:t.cy(),f=s.style();if(!i.easingImpl)if(l==null)i.easingImpl=cn.linear;else{var v;if(Re(l)){var h=f.parse("transition-timing-function",l);v=h.value}else v=l;var c,g;Re(v)?(c=v,g=[]):(c=v[1],g=v.slice(2).map(function(z){return+z})),g.length>0?(c==="spring"&&g.push(i.duration),i.easingImpl=cn[c].apply(null,g)):i.easingImpl=cn[c]}var d=i.easingImpl,m;if(i.duration===0?m=1:m=(r-u)/i.duration,i.applying&&(m=i.progress),m<0?m=0:m>1&&(m=1),i.delay==null){var p=i.startPosition,y=i.position;if(y&&n&&!t.locked()){var E={};Ea(p.x,y.x)&&(E.x=Vr(p.x,y.x,m,d)),Ea(p.y,y.y)&&(E.y=Vr(p.y,y.y,m,d)),t.position(E)}var T=i.startPan,w=i.pan,x=o.pan,D=w!=null&&a;D&&(Ea(T.x,w.x)&&(x.x=Vr(T.x,w.x,m,d)),Ea(T.y,w.y)&&(x.y=Vr(T.y,w.y,m,d)),t.emit("pan"));var L=i.startZoom,N=i.zoom,A=N!=null&&a;A&&(Ea(L,N)&&(o.zoom=Aa(o.minZoom,Vr(L,N,m,d),o.maxZoom)),t.emit("zoom")),(D||A)&&t.emit("viewport");var P=i.style;if(P&&P.length>0&&n){for(var b=0;b<P.length;b++){var M=P[b],C=M.name,O=M,S=i.startStyle[C],R=f.properties[S.name],B=Vr(S,O,m,d,R);f.overrideBypass(t,C,B)}t.emit("style")}}return i.progress=m,m}function Ea(t,e){return t==null||e==null?!1:ye(t)&&ye(e)?!0:!!(t&&e)}function um(t,e,r,a){var n=e._private;n.started=!0,n.startTime=r-n.progress*n.duration}function uu(t,e){var r=e._private.aniEles,a=[];function n(f,v){var h=f._private,c=h.animation.current,g=h.animation.queue,d=!1;if(c.length===0){var m=g.shift();m&&c.push(m)}for(var p=function(x){for(var D=x.length-1;D>=0;D--){var L=x[D];L()}x.splice(0,x.length)},y=c.length-1;y>=0;y--){var E=c[y],T=E._private;if(T.stopped){c.splice(y,1),T.hooked=!1,T.playing=!1,T.started=!1,p(T.frames);continue}!T.playing&&!T.applying||(T.playing&&T.applying&&(T.applying=!1),T.started||um(f,E,t),lm(f,E,t,v),T.applying&&(T.applying=!1),p(T.frames),T.step!=null&&T.step(t),E.completed()&&(c.splice(y,1),T.hooked=!1,T.playing=!1,T.started=!1,p(T.completes)),d=!0)}return!v&&c.length===0&&g.length===0&&a.push(f),d}for(var o=!1,i=0;i<r.length;i++){var l=r[i],u=n(l);o=o||u}var s=n(e,!0);(o||s)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(a),e.emit("step")}var fm={animate:qe.animate(),animation:qe.animation(),animated:qe.animated(),clearQueue:qe.clearQueue(),delay:qe.delay(),delayAnimation:qe.delayAnimation(),stop:qe.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&mn(function(o){uu(o,e),r()})}var a=e.renderer();a&&a.beforeRender?a.beforeRender(function(o,i){uu(i,e)},a.beforeRenderPriorities.animations):r()}},vm={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,a){var n=r.qualifier;return n!=null?e!==a.target&&Ga(a.target)&&n.matches(a.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,a){return r.qualifier!=null?a.target:e}},ln=function(e){return Re(e)?new fr(e):e},Cf={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Rn(vm,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,a){return this.emitter().on(e,ln(r),a),this},removeListener:function(e,r,a){return this.emitter().removeListener(e,ln(r),a),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,a){return this.emitter().one(e,ln(r),a),this},once:function(e,r,a){return this.emitter().one(e,ln(r),a),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};qe.eventAliasesOn(Cf);var pi={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};pi.jpeg=pi.jpg;var dn={layout:function(e){var r=this;if(e==null){nt("Layout options must be specified to make a layout");return}if(e.name==null){nt("A `name` must be specified to make a layout");return}var a=e.name,n=r.extension("layout",a);if(n==null){nt("No such layout `"+a+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;Re(e.eles)?o=r.$(e.eles):o=e.eles!=null?e.eles:r.$();var i=new n(Ie({},e,{cy:r,eles:o}));return i}};dn.createLayout=dn.makeLayout=dn.layout;var hm={notify:function(e,r){var a=this._private;if(this.batching()){a.batchNotifications=a.batchNotifications||{};var n=a.batchNotifications[e]=a.batchNotifications[e]||this.collection();r!=null&&n.merge(r);return}if(a.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(a){var n=e.batchNotifications[a];n.empty()?r.notify(a):r.notify(a,n)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var a=Object.keys(e),n=0;n<a.length;n++){var o=a[n],i=e[o],l=r.getElementById(o);l.data(i)}})}},cm=gt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),yi={renderTo:function(e,r,a,n){var o=this._private.renderer;return o.renderTo(e,r,a,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,a=r.extension("renderer",e.name);if(a==null){nt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&We("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=cm(e);n.cy=r,r._private.renderer=new a(n),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(a){var n=a._private;n.rscratch={},n.rstyle={},n.animation.current=[],n.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};yi.invalidateDimensions=yi.resize;var gn={collection:function(e,r){return Re(e)?this.$(e):Nt(e)?e.collection():Je(e)?(r||(r={}),new dt(this,e,r.unique,r.removed)):new dt(this)},nodes:function(e){var r=this.$(function(a){return a.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(a){return a.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};gn.elements=gn.filter=gn.$;var bt={},Ta="t",dm="f";bt.apply=function(t){for(var e=this,r=e._private,a=r.cy,n=a.collection(),o=0;o<t.length;o++){var i=t[o],l=e.getContextMeta(i);if(!l.empty){var u=e.getContextStyle(l),s=e.applyContextStyle(l,u,i);i._private.appliedInitStyle?e.updateTransitions(i,s.diffProps):i._private.appliedInitStyle=!0;var f=e.updateStyleHints(i);f&&n.push(i)}}return n};bt.getPropertiesDiff=function(t,e){var r=this,a=r._private.propDiffs=r._private.propDiffs||{},n=t+"-"+e,o=a[n];if(o)return o;for(var i=[],l={},u=0;u<r.length;u++){var s=r[u],f=t[u]===Ta,v=e[u]===Ta,h=f!==v,c=s.mappedProperties.length>0;if(h||v&&c){var g=void 0;h&&c||h?g=s.properties:c&&(g=s.mappedProperties);for(var d=0;d<g.length;d++){for(var m=g[d],p=m.name,y=!1,E=u+1;E<r.length;E++){var T=r[E],w=e[E]===Ta;if(w&&(y=T.properties[m.name]!=null,y))break}!l[p]&&!y&&(l[p]=!0,i.push(p))}}}return a[n]=i,i};bt.getContextMeta=function(t){for(var e=this,r="",a,n=t._private.styleCxtKey||"",o=0;o<e.length;o++){var i=e[o],l=i.selector&&i.selector.matches(t);l?r+=Ta:r+=dm}return a=e.getPropertiesDiff(n,r),t._private.styleCxtKey=r,{key:r,diffPropNames:a,empty:a.length===0}};bt.getContextStyle=function(t){var e=t.key,r=this,a=this._private.contextStyles=this._private.contextStyles||{};if(a[e])return a[e];for(var n={_private:{key:e}},o=0;o<r.length;o++){var i=r[o],l=e[o]===Ta;if(l)for(var u=0;u<i.properties.length;u++){var s=i.properties[u];n[s.name]=s}}return a[e]=n,n};bt.applyContextStyle=function(t,e,r){for(var a=this,n=t.diffPropNames,o={},i=a.types,l=0;l<n.length;l++){var u=n[l],s=e[u],f=r.pstyle(u);if(!s)if(f)f.bypass?s={name:u,deleteBypassed:!0}:s={name:u,delete:!0};else continue;if(f!==s){if(s.mapped===i.fn&&f!=null&&f.mapping!=null&&f.mapping.value===s.value){var v=f.mapping,h=v.fnValue=s.value(r);if(h===v.prevFnValue)continue}var c=o[u]={prev:f};a.applyParsedProperty(r,s),c.next=r.pstyle(u),c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}};bt.updateStyleHints=function(t){var e=t._private,r=this,a=r.propertyGroupNames,n=r.propertyGroupKeys,o=function(K,j,ge){return r.getPropertiesHash(K,j,ge)},i=e.styleKey;if(t.removed())return!1;var l=e.group==="nodes",u=t._private.style;a=Object.keys(u);for(var s=0;s<n.length;s++){var f=n[s];e.styleKeys[f]=[Ur,ba]}for(var v=function(K,j){return e.styleKeys[j][0]=La(K,e.styleKeys[j][0])},h=function(K,j){return e.styleKeys[j][1]=Na(K,e.styleKeys[j][1])},c=function(K,j){v(K,j),h(K,j)},g=function(K,j){for(var ge=0;ge<K.length;ge++){var Ce=K.charCodeAt(ge);v(Ce,j),h(Ce,j)}},d=2e9,m=function(K){return-128<K&&K<128&&Math.floor(K)!==K?d-(K*1024|0):K},p=0;p<a.length;p++){var y=a[p],E=u[y];if(E!=null){var T=this.properties[y],w=T.type,x=T.groupKey,D=void 0;T.hashOverride!=null?D=T.hashOverride(t,E):E.pfValue!=null&&(D=E.pfValue);var L=T.enums==null?E.value:null,N=D!=null,A=L!=null,P=N||A,b=E.units;if(w.number&&P&&!w.multiple){var M=N?D:L;c(m(M),x),!N&&b!=null&&g(b,x)}else g(E.strValue,x)}}for(var C=[Ur,ba],O=0;O<n.length;O++){var S=n[O],R=e.styleKeys[S];C[0]=La(R[0],C[0]),C[1]=Na(R[1],C[1])}e.styleKey=Ng(C[0],C[1]);var B=e.styleKeys;e.labelDimsKey=rr(B.labelDimensions);var z=o(t,["label"],B.labelDimensions);if(e.labelKey=rr(z),e.labelStyleKey=rr(_a(B.commonLabel,z)),!l){var G=o(t,["source-label"],B.labelDimensions);e.sourceLabelKey=rr(G),e.sourceLabelStyleKey=rr(_a(B.commonLabel,G));var k=o(t,["target-label"],B.labelDimensions);e.targetLabelKey=rr(k),e.targetLabelStyleKey=rr(_a(B.commonLabel,k))}if(l){var H=e.styleKeys,$=H.nodeBody,V=H.nodeBorder,X=H.backgroundImage,U=H.compound,F=H.pie,Y=[$,V,X,U,F].filter(function(q){return q!=null}).reduce(_a,[Ur,ba]);e.nodeKey=rr(Y),e.hasPie=F!=null&&F[0]!==Ur&&F[1]!==ba}return i!==e.styleKey};bt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};bt.applyParsedProperty=function(t,e){var r=this,a=e,n=t._private.style,o,i=r.types,l=r.properties[a.name].type,u=a.bypass,s=n[a.name],f=s&&s.bypass,v=t._private,h="mapping",c=function($){return $==null?null:$.pfValue!=null?$.pfValue:$.value},g=function(){var $=c(s),V=c(a);r.checkTriggers(t,a.name,$,V)};if(a&&a.name.substr(0,3)==="pie"&&We("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(a=e=this.parse(e.name,"bezier",u)),a.delete)return n[a.name]=void 0,g(),!0;if(a.deleteBypassed)return s?s.bypass?(s.bypassed=void 0,g(),!0):!1:(g(),!0);if(a.deleteBypass)return s?s.bypass?(n[a.name]=s.bypassed,g(),!0):!1:(g(),!0);var d=function(){We("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case i.mapData:{for(var m=a.field.split("."),p=v.data,y=0;y<m.length&&p;y++){var E=m[y];p=p[E]}if(p==null)return d(),!1;var T;if(ye(p)){var w=a.fieldMax-a.fieldMin;w===0?T=0:T=(p-a.fieldMin)/w}else return We("Do not use continuous mappers without specifying numeric data (i.e. `"+a.field+": "+p+"` for `"+t.id()+"` is non-numeric)"),!1;if(T<0?T=0:T>1&&(T=1),l.color){var x=a.valueMin[0],D=a.valueMax[0],L=a.valueMin[1],N=a.valueMax[1],A=a.valueMin[2],P=a.valueMax[2],b=a.valueMin[3]==null?1:a.valueMin[3],M=a.valueMax[3]==null?1:a.valueMax[3],C=[Math.round(x+(D-x)*T),Math.round(L+(N-L)*T),Math.round(A+(P-A)*T),Math.round(b+(M-b)*T)];o={bypass:a.bypass,name:a.name,value:C,strValue:"rgb("+C[0]+", "+C[1]+", "+C[2]+")"}}else if(l.number){var O=a.valueMin+(a.valueMax-a.valueMin)*T;o=this.parse(a.name,O,a.bypass,h)}else return!1;if(!o)return d(),!1;o.mapping=a,a=o;break}case i.data:{for(var S=a.field.split("."),R=v.data,B=0;B<S.length&&R;B++){var z=S[B];R=R[z]}if(R!=null&&(o=this.parse(a.name,R,a.bypass,h)),!o)return d(),!1;o.mapping=a,a=o;break}case i.fn:{var G=a.value,k=a.fnValue!=null?a.fnValue:G(t);if(a.prevFnValue=k,k==null)return We("Custom function mappers may not return null (i.e. `"+a.name+"` for ele `"+t.id()+"` is null)"),!1;if(o=this.parse(a.name,k,a.bypass,h),!o)return We("Custom function mappers may not return invalid values for the property type (i.e. `"+a.name+"` for ele `"+t.id()+"` is invalid)"),!1;o.mapping=kt(a),a=o;break}case void 0:break;default:return!1}return u?(f?a.bypassed=s.bypassed:a.bypassed=s,n[a.name]=a):f?s.bypassed=a:n[a.name]=a,g(),!0};bt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var a=t[r];if(this.clearStyleHints(a),a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),!e)a._private.style={};else for(var n=a._private.style,o=Object.keys(n),i=0;i<o.length;i++){var l=o[i],u=n[l];u!=null&&(u.bypass?u.bypassed=null:n[l]=null)}}};bt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};bt.updateTransitions=function(t,e){var r=this,a=t._private,n=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,i=t.pstyle("transition-delay").pfValue;if(n.length>0&&o>0){for(var l={},u=!1,s=0;s<n.length;s++){var f=n[s],v=t.pstyle(f),h=e[f];if(h){var c=h.prev,g=c,d=h.next!=null?h.next:v,m=!1,p=void 0,y=1e-6;g&&(ye(g.pfValue)&&ye(d.pfValue)?(m=d.pfValue-g.pfValue,p=g.pfValue+y*m):ye(g.value)&&ye(d.value)?(m=d.value-g.value,p=g.value+y*m):Je(g.value)&&Je(d.value)&&(m=g.value[0]!==d.value[0]||g.value[1]!==d.value[1]||g.value[2]!==d.value[2],p=g.strValue),m&&(l[f]=d.strValue,this.applyBypass(t,f,p),u=!0))}}if(!u)return;a.transitioning=!0,new jr(function(E){i>0?t.delayAnimation(i).play().promise().then(E):E()}).then(function(){return t.animation({style:l,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,n),t.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(t,n),t.emitAndNotify("style"),a.transitioning=!1)};bt.checkTrigger=function(t,e,r,a,n,o){var i=this.properties[e],l=n(i);l!=null&&l(r,a)&&o(i)};bt.checkZOrderTrigger=function(t,e,r,a){var n=this;this.checkTrigger(t,e,r,a,function(o){return o.triggersZOrder},function(){n._private.cy.notify("zorder",t)})};bt.checkBoundsTrigger=function(t,e,r,a){this.checkTrigger(t,e,r,a,function(n){return n.triggersBounds},function(n){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),n.triggersBoundsOfParallelBeziers&&(e==="curve-style"&&(r==="bezier"||a==="bezier")||e==="display"&&(r==="none"||a==="none"))&&t.parallelEdges().forEach(function(o){o.isBundledBezier()&&o.dirtyBoundingBoxCache()})})};bt.checkTriggers=function(t,e,r,a){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,a),this.checkBoundsTrigger(t,e,r,a)};var Ua={};Ua.applyBypass=function(t,e,r,a){var n=this,o=[],i=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var l=0;l<n.properties.length;l++){var u=n.properties[l],s=u.name,f=this.parse(s,r,!0);f&&o.push(f)}}else if(Re(e)){var v=this.parse(e,r,!0);v&&o.push(v)}else if(Ve(e)){var h=e;a=r;for(var c=Object.keys(h),g=0;g<c.length;g++){var d=c[g],m=h[d];if(m===void 0&&(m=h[Ln(d)]),m!==void 0){var p=this.parse(d,m,!0);p&&o.push(p)}}}else return!1;if(o.length===0)return!1;for(var y=!1,E=0;E<t.length;E++){for(var T=t[E],w={},x=void 0,D=0;D<o.length;D++){var L=o[D];if(a){var N=T.pstyle(L.name);x=w[L.name]={prev:N}}y=this.applyParsedProperty(T,kt(L))||y,a&&(x.next=T.pstyle(L.name))}y&&this.updateStyleHints(T),a&&this.updateTransitions(T,w,i)}return y};Ua.overrideBypass=function(t,e,r){e=Di(e);for(var a=0;a<t.length;a++){var n=t[a],o=n._private.style[e],i=this.properties[e].type,l=i.color,u=i.mutiple,s=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(n,e,r):(o.value=r,o.pfValue!=null&&(o.pfValue=r),l?o.strValue="rgb("+r.join(",")+")":u?o.strValue=r.join(" "):o.strValue=""+r,this.updateStyleHints(n)),this.checkTriggers(n,e,s,r)}};Ua.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Ua.removeBypasses=function(t,e,r){for(var a=!0,n=0;n<t.length;n++){for(var o=t[n],i={},l=0;l<e.length;l++){var u=e[l],s=this.properties[u],f=o.pstyle(s.name);if(!(!f||!f.bypass)){var v="",h=this.parse(u,v,!0),c=i[s.name]={prev:f};this.applyParsedProperty(o,h),c.next=o.pstyle(s.name)}}this.updateStyleHints(o),r&&this.updateTransitions(o,i,a)}};var Bi={};Bi.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};Bi.containerCss=function(t){var e=this._private.cy,r=e.container();if(rt&&r&&rt.getComputedStyle)return rt.getComputedStyle(r).getPropertyValue(t)};var Gt={};Gt.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Gt.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var a={},n=0;n<r.properties.length;n++){var o=r.properties[n],i=r.getStylePropertyValue(t,o.name,e);i!=null&&(a[o.name]=i,a[Ln(o.name)]=i)}return a}};Gt.getIndexedStyle=function(t,e,r,a){var n=t.pstyle(e)[r][a];return n??t.cy().style().getDefaultProperty(e)[r][0]};Gt.getStylePropertyValue=function(t,e,r){var a=this;if(t=t[0],t){var n=a.properties[e];n.alias&&(n=n.pointsTo);var o=n.type,i=t.pstyle(n.name);if(i){var l=i.value,u=i.units,s=i.strValue;if(r&&o.number&&l!=null&&ye(l)){var f=t.cy().zoom(),v=function(m){return m*f},h=function(m,p){return v(m)+p},c=Je(l),g=c?u.every(function(d){return d!=null}):u!=null;return g?c?l.map(function(d,m){return h(d,u[m])}).join(" "):h(l,u):c?l.map(function(d){return Re(d)?d:""+v(d)}).join(" "):""+v(l)}else if(s!=null)return s}return null}};Gt.getAnimationStartStyle=function(t,e){for(var r={},a=0;a<e.length;a++){var n=e[a],o=n.name,i=t.pstyle(o);i!==void 0&&(Ve(i)?i=this.parse(o,i.strValue):i=this.parse(o,i)),i&&(r[o]=i)}return r};Gt.getPropsList=function(t){var e=this,r=[],a=t,n=e.properties;if(a)for(var o=Object.keys(a),i=0;i<o.length;i++){var l=o[i],u=a[l],s=n[l]||n[Di(l)],f=this.parse(s.name,u);f&&r.push(f)}return r};Gt.getNonDefaultPropertiesHash=function(t,e,r){var a=r.slice(),n,o,i,l,u,s;for(u=0;u<e.length;u++)if(n=e[u],o=t.pstyle(n,!1),o!=null)if(o.pfValue!=null)a[0]=La(l,a[0]),a[1]=Na(l,a[1]);else for(i=o.strValue,s=0;s<i.length;s++)l=i.charCodeAt(s),a[0]=La(l,a[0]),a[1]=Na(l,a[1]);return a};Gt.getPropertiesHash=Gt.getNonDefaultPropertiesHash;var Fn={};Fn.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var a=t[r],n=a.selector,o=a.style||a.css,i=Object.keys(o);e.selector(n);for(var l=0;l<i.length;l++){var u=i[l],s=o[u];e.css(u,s)}}return e};Fn.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Fn.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],a=r.selector,n=r.properties,o={},i=0;i<n.length;i++){var l=n[i];o[l.name]=l.strValue}t.push({selector:a?a.toString():"core",style:o})}return t};var ki={};ki.appendFromString=function(t){var e=this,r=this,a=""+t,n,o,i;a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");function l(){a.length>n.length?a=a.substr(n.length):a=""}function u(){o.length>i.length?o=o.substr(i.length):o=""}for(;;){var s=a.match(/^\s*$/);if(s)break;var f=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){We("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}n=f[0];var v=f[1];if(v!=="core"){var h=new fr(v);if(h.invalid){We("Skipping parsing of block: Invalid selector found in string stylesheet: "+v),l();continue}}var c=f[2],g=!1;o=c;for(var d=[];;){var m=o.match(/^\s*$/);if(m)break;var p=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){We("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),g=!0;break}i=p[0];var y=p[1],E=p[2],T=e.properties[y];if(!T){We("Skipping property: Invalid property name in: "+i),u();continue}var w=r.parse(y,E);if(!w){We("Skipping property: Invalid property definition in: "+i),u();continue}d.push({name:y,val:E}),u()}if(g){l();break}r.selector(v);for(var x=0;x<d.length;x++){var D=d[x];r.css(D.name,D.val)}l()}return r};ki.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var ht={};(function(){var t=lt,e=gg,r=yg,a=mg,n=Eg,o=function(Y){return"^"+Y+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(Y){var q=t+"|\\w+|"+e+"|"+r+"|"+a+"|"+n;return"^"+Y+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+q+")\\s*\\,\\s*("+q+")\\)$"},l=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];ht.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:l,singleRegexMatchValue:!0},urls:{regexes:l,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Y,q){switch(Y.length){case 2:return q[0]!=="deg"&&q[0]!=="rad"&&q[1]!=="deg"&&q[1]!=="rad";case 1:return Re(Y[0])||q[0]==="deg"||q[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Y){var q=Y.length;return q===1||q===2||q===4}}};var u={zeroNonZero:function(Y,q){return(Y==null||q==null)&&Y!==q||Y==0&&q!=0?!0:Y!=0&&q==0},any:function(Y,q){return Y!=q},emptyNonEmpty:function(Y,q){var K=lr(Y),j=lr(q);return K&&!j||!K&&j}},s=ht.types,f=[{name:"label",type:s.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:s.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:s.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:s.bidirectionalSize,triggersBounds:u.any}],v=[{name:"source-label",type:s.text,triggersBounds:u.any},{name:"source-text-rotation",type:s.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:s.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:s.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:s.size,triggersBounds:u.any}],h=[{name:"target-label",type:s.text,triggersBounds:u.any},{name:"target-text-rotation",type:s.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:s.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:s.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:s.size,triggersBounds:u.any}],c=[{name:"font-family",type:s.fontFamily,triggersBounds:u.any},{name:"font-style",type:s.fontStyle,triggersBounds:u.any},{name:"font-weight",type:s.fontWeight,triggersBounds:u.any},{name:"font-size",type:s.size,triggersBounds:u.any},{name:"text-transform",type:s.textTransform,triggersBounds:u.any},{name:"text-wrap",type:s.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:s.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:s.size,triggersBounds:u.any},{name:"text-outline-width",type:s.size,triggersBounds:u.any},{name:"line-height",type:s.positiveNumber,triggersBounds:u.any}],g=[{name:"text-valign",type:s.valign,triggersBounds:u.any},{name:"text-halign",type:s.halign,triggersBounds:u.any},{name:"color",type:s.color},{name:"text-outline-color",type:s.color},{name:"text-outline-opacity",type:s.zeroOneNumber},{name:"text-background-color",type:s.color},{name:"text-background-opacity",type:s.zeroOneNumber},{name:"text-background-padding",type:s.size,triggersBounds:u.any},{name:"text-border-opacity",type:s.zeroOneNumber},{name:"text-border-color",type:s.color},{name:"text-border-width",type:s.size,triggersBounds:u.any},{name:"text-border-style",type:s.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:s.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:s.justification}],d=[{name:"events",type:s.bool},{name:"text-events",type:s.bool}],m=[{name:"display",type:s.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:s.visibility,triggersZOrder:u.any},{name:"opacity",type:s.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:s.zeroOneNumber},{name:"min-zoomed-font-size",type:s.size},{name:"z-compound-depth",type:s.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:s.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:s.nonNegativeInt,triggersZOrder:u.any}],p=[{name:"overlay-padding",type:s.size,triggersBounds:u.any},{name:"overlay-color",type:s.color},{name:"overlay-opacity",type:s.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:s.overlayShape,triggersBounds:u.any}],y=[{name:"underlay-padding",type:s.size,triggersBounds:u.any},{name:"underlay-color",type:s.color},{name:"underlay-opacity",type:s.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:s.overlayShape,triggersBounds:u.any}],E=[{name:"transition-property",type:s.propList},{name:"transition-duration",type:s.time},{name:"transition-delay",type:s.time},{name:"transition-timing-function",type:s.easing}],T=function(Y,q){return q.value==="label"?-Y.poolIndex():q.pfValue},w=[{name:"height",type:s.nodeSize,triggersBounds:u.any,hashOverride:T},{name:"width",type:s.nodeSize,triggersBounds:u.any,hashOverride:T},{name:"shape",type:s.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:s.polygonPointList,triggersBounds:u.any},{name:"background-color",type:s.color},{name:"background-fill",type:s.fill},{name:"background-opacity",type:s.zeroOneNumber},{name:"background-blacken",type:s.nOneOneNumber},{name:"background-gradient-stop-colors",type:s.colors},{name:"background-gradient-stop-positions",type:s.percentages},{name:"background-gradient-direction",type:s.gradientDirection},{name:"padding",type:s.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:s.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:s.boundsExpansion,triggersBounds:u.any}],x=[{name:"border-color",type:s.color},{name:"border-opacity",type:s.zeroOneNumber},{name:"border-width",type:s.size,triggersBounds:u.any},{name:"border-style",type:s.borderStyle}],D=[{name:"background-image",type:s.urls},{name:"background-image-crossorigin",type:s.bgCrossOrigin},{name:"background-image-opacity",type:s.zeroOneNumbers},{name:"background-image-containment",type:s.bgContainment},{name:"background-image-smoothing",type:s.bools},{name:"background-position-x",type:s.bgPos},{name:"background-position-y",type:s.bgPos},{name:"background-width-relative-to",type:s.bgRelativeTo},{name:"background-height-relative-to",type:s.bgRelativeTo},{name:"background-repeat",type:s.bgRepeat},{name:"background-fit",type:s.bgFit},{name:"background-clip",type:s.bgClip},{name:"background-width",type:s.bgWH},{name:"background-height",type:s.bgWH},{name:"background-offset-x",type:s.bgPos},{name:"background-offset-y",type:s.bgPos}],L=[{name:"position",type:s.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:s.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:s.size,triggersBounds:u.any},{name:"min-width-bias-left",type:s.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:s.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:s.size,triggersBounds:u.any},{name:"min-height-bias-top",type:s.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:s.sizeMaybePercent,triggersBounds:u.any}],N=[{name:"line-style",type:s.lineStyle},{name:"line-color",type:s.color},{name:"line-fill",type:s.fill},{name:"line-cap",type:s.lineCap},{name:"line-opacity",type:s.zeroOneNumber},{name:"line-dash-pattern",type:s.numbers},{name:"line-dash-offset",type:s.number},{name:"line-gradient-stop-colors",type:s.colors},{name:"line-gradient-stop-positions",type:s.percentages},{name:"curve-style",type:s.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:s.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:s.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:s.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:s.size,triggersBounds:u.any},{name:"control-point-distances",type:s.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:s.numbers,triggersBounds:u.any},{name:"segment-distances",type:s.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:s.numbers,triggersBounds:u.any},{name:"taxi-turn",type:s.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:s.size,triggersBounds:u.any},{name:"taxi-direction",type:s.axisDirection,triggersBounds:u.any},{name:"edge-distances",type:s.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:s.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:s.angle,triggersBounds:u.any},{name:"loop-sweep",type:s.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:s.size,triggersBounds:u.any},{name:"target-distance-from-node",type:s.size,triggersBounds:u.any}],A=[{name:"ghost",type:s.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:s.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:s.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:s.zeroOneNumber}],P=[{name:"selection-box-color",type:s.color},{name:"selection-box-opacity",type:s.zeroOneNumber},{name:"selection-box-border-color",type:s.color},{name:"selection-box-border-width",type:s.size},{name:"active-bg-color",type:s.color},{name:"active-bg-opacity",type:s.zeroOneNumber},{name:"active-bg-size",type:s.size},{name:"outside-texture-bg-color",type:s.color},{name:"outside-texture-bg-opacity",type:s.zeroOneNumber}],b=[];ht.pieBackgroundN=16,b.push({name:"pie-size",type:s.sizeMaybePercent});for(var M=1;M<=ht.pieBackgroundN;M++)b.push({name:"pie-"+M+"-background-color",type:s.color}),b.push({name:"pie-"+M+"-background-size",type:s.percent}),b.push({name:"pie-"+M+"-background-opacity",type:s.zeroOneNumber});var C=[],O=ht.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:s.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:s.color},{name:"arrow-fill",type:s.arrowFill}].forEach(function(F){O.forEach(function(Y){var q=Y+"-"+F.name,K=F.type,j=F.triggersBounds;C.push({name:q,type:K,triggersBounds:j})})},{});var S=ht.properties=[].concat(d,E,m,p,y,A,g,c,f,v,h,w,x,D,b,L,N,C,P),R=ht.propertyGroups={behavior:d,transition:E,visibility:m,overlay:p,underlay:y,ghost:A,commonLabel:g,labelDimensions:c,mainLabel:f,sourceLabel:v,targetLabel:h,nodeBody:w,nodeBorder:x,backgroundImage:D,pie:b,compound:L,edgeLine:N,edgeArrow:C,core:P},B=ht.propertyGroupNames={},z=ht.propertyGroupKeys=Object.keys(R);z.forEach(function(F){B[F]=R[F].map(function(Y){return Y.name}),R[F].forEach(function(Y){return Y.groupKey=F})});var G=ht.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];ht.propertyNames=S.map(function(F){return F.name});for(var k=0;k<S.length;k++){var H=S[k];S[H.name]=H}for(var $=0;$<G.length;$++){var V=G[$],X=S[V.pointsTo],U={name:V.name,alias:!0,pointsTo:X};S.push(U),S[V.name]=U}})();ht.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};ht.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Ie({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,s){for(var f=1;f<=ht.pieBackgroundN;f++){var v=s.name.replace("{{i}}",f),h=s.value;u[v]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(u,s){return ht.arrowPrefixes.forEach(function(f){var v=f+"-"+s.name,h=s.value;u[v]=h}),u},{})),r={},a=0;a<this.properties.length;a++){var n=this.properties[a];if(!n.pointsTo){var o=n.name,i=e[o],l=this.parse(o,i);r[o]=l}}return t.defaultProperties=r,t.defaultProperties};ht.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Bn={};Bn.parse=function(t,e,r,a){var n=this;if(at(e))return n.parseImplWarn(t,e,r,a);var o=a==="mapping"||a===!0||a===!1||a==null?"dontcare":a,i=r?"t":"f",l=""+e,u=ku(t,l,i,o),s=n.propCache=n.propCache||[],f;return(f=s[u])||(f=s[u]=n.parseImplWarn(t,e,r,a)),(r||a==="mapping")&&(f=kt(f),f&&(f.value=kt(f.value))),f};Bn.parseImplWarn=function(t,e,r,a){var n=this.parseImpl(t,e,r,a);return!n&&e!=null&&We("The style property `".concat(t,": ").concat(e,"` is invalid")),n&&(n.name==="width"||n.name==="height")&&e==="label"&&We("The style value of `label` is deprecated for `"+n.name+"`"),n};Bn.parseImpl=function(t,e,r,a){var n=this;t=Di(t);var o=n.properties[t],i=e,l=n.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,t=o.name);var u=Re(e);u&&(e=e.trim());var s=o.type;if(!s)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(at(e))return{name:t,value:e,strValue:"fn",mapped:l.fn,bypass:r};var f,v;if(!(!u||a||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(l.data.regex).exec(e))){if(r)return!1;var h=l.data;return{name:t,value:f,strValue:""+e,mapped:h,field:f[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(v=new RegExp(l.mapData.regex).exec(e))){if(r||s.multiple)return!1;var c=l.mapData;if(!(s.color||s.number))return!1;var g=this.parse(t,v[4]);if(!g||g.mapped)return!1;var d=this.parse(t,v[5]);if(!d||d.mapped)return!1;if(g.pfValue===d.pfValue||g.strValue===d.strValue)return We("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+g.strValue+"`"),this.parse(t,g.strValue);if(s.color){var m=g.value,p=d.value,y=m[0]===p[0]&&m[1]===p[1]&&m[2]===p[2]&&(m[3]===p[3]||(m[3]==null||m[3]===1)&&(p[3]==null||p[3]===1));if(y)return!1}return{name:t,value:v,strValue:""+e,mapped:c,field:v[1],fieldMin:parseFloat(v[2]),fieldMax:parseFloat(v[3]),valueMin:g.value,valueMax:d.value,bypass:r}}}if(s.multiple&&a!=="multiple"){var E;if(u?E=e.split(/\s+/):Je(e)?E=e:E=[e],s.evenMultiple&&E.length%2!==0)return null;for(var T=[],w=[],x=[],D="",L=!1,N=0;N<E.length;N++){var A=n.parse(t,E[N],r,"multiple");L=L||Re(A.value),T.push(A.value),x.push(A.pfValue!=null?A.pfValue:A.value),w.push(A.units),D+=(N>0?" ":"")+A.strValue}return s.validate&&!s.validate(T,w)?null:s.singleEnum&&L?T.length===1&&Re(T[0])?{name:t,value:T[0],strValue:T[0],bypass:r}:null:{name:t,value:T,pfValue:x,strValue:D,bypass:r,units:w}}var P=function(){for(var q=0;q<s.enums.length;q++){var K=s.enums[q];if(K===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(s.number){var b,M="px";if(s.units&&(b=s.units),s.implicitUnits&&(M=s.implicitUnits),!s.unitless)if(u){var C="px|em"+(s.allowPercent?"|\\%":"");b&&(C=b);var O=e.match("^("+lt+")("+C+")?$");O&&(e=O[1],b=O[2]||M)}else(!b||s.implicitUnits)&&(b=M);if(e=parseFloat(e),isNaN(e)&&s.enums===void 0)return null;if(isNaN(e)&&s.enums!==void 0)return e=i,P();if(s.integer&&!lg(e)||s.min!==void 0&&(e<s.min||s.strictMin&&e===s.min)||s.max!==void 0&&(e>s.max||s.strictMax&&e===s.max))return null;var S={name:t,value:e,strValue:""+e+(b||""),units:b,bypass:r};return s.unitless||b!=="px"&&b!=="em"?S.pfValue=e:S.pfValue=b==="px"||!b?e:this.getEmSizeInPixels()*e,(b==="ms"||b==="s")&&(S.pfValue=b==="ms"?e:1e3*e),(b==="deg"||b==="rad")&&(S.pfValue=b==="rad"?e:ap(e)),b==="%"&&(S.pfValue=e/100),S}else if(s.propList){var R=[],B=""+e;if(B!=="none"){for(var z=B.split(/\s*,\s*|\s+/),G=0;G<z.length;G++){var k=z[G].trim();n.properties[k]?R.push(k):We("`"+k+"` is not a valid property name")}if(R.length===0)return null}return{name:t,value:R,strValue:R.length===0?"none":R.join(" "),bypass:r}}else if(s.color){var H=Dg(e);return H?{name:t,value:H,pfValue:H,strValue:"rgb("+H[0]+","+H[1]+","+H[2]+")",bypass:r}:null}else if(s.regex||s.regexes){if(s.enums){var $=P();if($)return $}for(var V=s.regexes?s.regexes:[s.regex],X=0;X<V.length;X++){var U=new RegExp(V[X]),F=U.exec(e);if(F)return{name:t,value:s.singleRegexMatchValue?F[1]:F,strValue:""+e,bypass:r}}return null}else return s.string?{name:t,value:""+e,strValue:""+e,bypass:r}:s.enums?P():null};var yt=function t(e){if(!(this instanceof t))return new t(e);if(!Ti(e)){nt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Et=yt.prototype;Et.instanceString=function(){return"style"};Et.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),a=0;a<this.length;a++)this[a]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(n){var o=n[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};Et.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Et.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};Et.selector=function(t){var e=t==="core"?null:new fr(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};Et.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],a=0;a<t.properties.length;a++){var n=t.properties[a],o=r[n.name];o===void 0&&(o=r[Ln(n.name)]),o!==void 0&&this.cssRule(n.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Et.style=Et.css;Et.cssRule=function(t,e){var r=this.parse(t,e);if(r){var a=this.length-1;this[a].properties.push(r),this[a].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[a].mappedProperties.push(r);var n=!this[a].selector;n&&(this._private.coreStyle[r.name]=r)}return this};Et.append=function(t){return Mu(t)?t.appendToStyle(this):Je(t)?this.appendFromJson(t):Re(t)&&this.appendFromString(t),this};yt.fromJson=function(t,e){var r=new yt(t);return r.fromJson(e),r};yt.fromString=function(t,e){return new yt(t).fromString(e)};[bt,Ua,Bi,Gt,Fn,ki,ht,Bn].forEach(function(t){Ie(Et,t)});yt.types=Et.types;yt.properties=Et.properties;yt.propertyGroups=Et.propertyGroups;yt.propertyGroupNames=Et.propertyGroupNames;yt.propertyGroupKeys=Et.propertyGroupKeys;var gm={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return Mu(e)?r.style=e.generateStyle(this):Je(e)?r.style=yt.fromJson(this,e):Re(e)?r.style=yt.fromString(this,e):r.style=yt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},pm="single",Cr={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=pm),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,a,n,o,i,l;switch(e.length){case 0:return r;case 1:if(Re(e[0]))return a=e[0],r[a];if(Ve(e[0])){if(!this._private.panningEnabled)return this;o=e[0],i=o.x,l=o.y,ye(i)&&(r.x=i),ye(l)&&(r.y=l),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;a=e[0],n=e[1],(a==="x"||a==="y")&&ye(n)&&(r[a]=n),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var a=arguments,n=this._private.pan,o,i,l,u,s;if(!this._private.panningEnabled)return this;switch(a.length){case 1:Ve(e)&&(l=a[0],u=l.x,s=l.y,ye(u)&&(n.x+=u),ye(s)&&(n.y+=s),this.emit("pan viewport"));break;case 2:o=e,i=r,(o==="x"||o==="y")&&ye(i)&&(n[o]+=i),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,r){var a=this.getFitViewport(e,r);if(a){var n=this._private;n.zoom=a.zoom,n.pan=a.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(ye(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var a;if(Re(e)){var n=e;e=this.$(n)}else if(vg(e)){var o=e;a={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},a.w=a.x2-a.x1,a.h=a.y2-a.y1}else Nt(e)||(e=this.mutableElements());if(!(Nt(e)&&e.empty())){a=a||e.boundingBox();var i=this.width(),l=this.height(),u;if(r=ye(r)?r:0,!isNaN(i)&&!isNaN(l)&&i>0&&l>0&&!isNaN(a.w)&&!isNaN(a.h)&&a.w>0&&a.h>0){u=Math.min((i-2*r)/a.w,(l-2*r)/a.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var s={x:(i-u*(a.x1+a.x2))/2,y:(l-u*(a.y1+a.y2))/2};return{zoom:u,pan:s}}}}},zoomRange:function(e,r){var a=this._private;if(r==null){var n=e;e=n.min,r=n.max}return ye(e)&&ye(r)&&e<=r?(a.minZoom=e,a.maxZoom=r):ye(e)&&r===void 0&&e<=a.maxZoom?a.minZoom=e:ye(r)&&e===void 0&&r>=a.minZoom&&(a.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,a=r.pan,n=r.zoom,o,i,l=!1;if(r.zoomingEnabled||(l=!0),ye(e)?i=e:Ve(e)&&(i=e.level,e.position!=null?o=Mn(e.position,n,a):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!r.panningEnabled&&(l=!0)),i=i>r.maxZoom?r.maxZoom:i,i=i<r.minZoom?r.minZoom:i,l||!ye(i)||i===n||o!=null&&(!ye(o.x)||!ye(o.y)))return null;if(o!=null){var u=a,s=n,f=i,v={x:-f/s*(o.x-u.x)+o.x,y:-f/s*(o.y-u.y)+o.y};return{zoomed:!0,panned:!0,zoom:f,pan:v}}else return{zoomed:!0,panned:!1,zoom:i,pan:a}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),a=this._private;return r==null||!r.zoomed?this:(a.zoom=r.zoom,r.panned&&(a.pan.x=r.pan.x,a.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,a=!0,n=!0,o=[],i=!1,l=!1;if(!e)return this;if(ye(e.zoom)||(a=!1),Ve(e.pan)||(n=!1),!a&&!n)return this;if(a){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?i=!0:(r.zoom=u,o.push("zoom"))}if(n&&(!i||!e.cancelOnFailedZoom)&&r.panningEnabled){var s=e.pan;ye(s.x)&&(r.pan.x=s.x,l=!1),ye(s.y)&&(r.pan.y=s.y,l=!1),l||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(Re(e)){var a=e;e=this.mutableElements().filter(a)}else Nt(e)||(e=this.mutableElements());if(e.length!==0){var n=e.boundingBox(),o=this.width(),i=this.height();r=r===void 0?this._private.zoom:r;var l={x:(o-r*(n.x1+n.x2))/2,y:(i-r*(n.y1+n.y2))/2};return l}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container;return e.sizeCache=e.sizeCache||(r?function(){var a=rt.getComputedStyle(r),n=function(i){return parseFloat(a.getPropertyValue(i))};return{width:r.clientWidth-n("padding-left")-n("padding-right"),height:r.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,a=this.renderedExtent(),n={x1:(a.x1-e.x)/r,x2:(a.x2-e.x)/r,y1:(a.y1-e.y)/r,y2:(a.y2-e.y)/r};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Cr.centre=Cr.center;Cr.autolockNodes=Cr.autolock;Cr.autoungrabifyNodes=Cr.autoungrabify;var Ia={data:qe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:qe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:qe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:qe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Ia.attr=Ia.data;Ia.removeAttr=Ia.removeData;var Fa=function(e){var r=this;e=Ie({},e);var a=e.container;a&&!yn(a)&&yn(a[0])&&(a=a[0]);var n=a?a._cyreg:null;n=n||{},n&&n.cy&&(n.cy.destroy(),n={});var o=n.readies=n.readies||[];a&&(a._cyreg=n),n.cy=r;var i=rt!==void 0&&a!==void 0&&!e.headless,l=e;l.layout=Ie({name:i?"grid":"null"},l.layout),l.renderer=Ie({name:i?"canvas":"null"},l.renderer);var u=function(g,d,m){return d!==void 0?d:m!==void 0?m:g},s=this._private={container:a,ready:!1,options:l,elements:new dt(this),listeners:[],aniEles:new dt(this),data:l.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,l.zoomingEnabled),userZoomingEnabled:u(!0,l.userZoomingEnabled),panningEnabled:u(!0,l.panningEnabled),userPanningEnabled:u(!0,l.userPanningEnabled),boxSelectionEnabled:u(!0,l.boxSelectionEnabled),autolock:u(!1,l.autolock,l.autolockNodes),autoungrabify:u(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:u(!1,l.autounselectify),styleEnabled:l.styleEnabled===void 0?i:l.styleEnabled,zoom:ye(l.zoom)?l.zoom:1,pan:{x:Ve(l.pan)&&ye(l.pan.x)?l.pan.x:0,y:Ve(l.pan)&&ye(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,l.multiClickDebounceTime)};this.createEmitter(),this.selectionType(l.selectionType),this.zoomRange({min:l.minZoom,max:l.maxZoom});var f=function(g,d){var m=g.some(hg);if(m)return jr.all(g).then(d);d(g)};s.styleEnabled&&r.setStyle([]);var v=Ie({},l,l.renderer);r.initRenderer(v);var h=function(g,d,m){r.notifications(!1);var p=r.mutableElements();p.length>0&&p.remove(),g!=null&&(Ve(g)||Je(g))&&r.add(g),r.one("layoutready",function(E){r.notifications(!0),r.emit(E),r.one("load",d),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",m),r.emit("done")});var y=Ie({},r._private.options.layout);y.eles=r.elements(),r.layout(y).run()};f([l.style,l.elements],function(c){var g=c[0],d=c[1];s.styleEnabled&&r.style().append(g),h(d,function(){r.startAnimationLoop(),s.ready=!0,at(l.ready)&&r.on("ready",l.ready);for(var m=0;m<o.length;m++){var p=o[m];r.on("ready",p)}n&&(n.readies=[]),r.emit("ready")},l.done)})},xn=Fa.prototype;Ie(xn,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var r=this,a=r._private,n=a.options;return!yn(e)&&yn(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),a.container=e,a.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Ie({},n,n.renderer,{name:n.renderer.name==="null"?"canvas":n.renderer.name})),r.startAnimationLoop(),r.style(n.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return kt(this._private.options)},json:function(e){var r=this,a=r._private,n=r.mutableElements(),o=function(T){return r.getElementById(T.id())};if(Ve(e)){if(r.startBatch(),e.elements){var i={},l=function(T,w){for(var x=[],D=[],L=0;L<T.length;L++){var N=T[L];if(!N.data.id){We("cy.json() cannot handle elements without an ID attribute");continue}var A=""+N.data.id,P=r.getElementById(A);i[A]=!0,P.length!==0?D.push({ele:P,json:N}):(w&&(N.group=w),x.push(N))}r.add(x);for(var b=0;b<D.length;b++){var M=D[b],C=M.ele,O=M.json;C.json(O)}};if(Je(e.elements))l(e.elements);else for(var u=["nodes","edges"],s=0;s<u.length;s++){var f=u[s],v=e.elements[f];Je(v)&&l(v,f)}var h=r.collection();n.filter(function(E){return!i[E.id()]}).forEach(function(E){E.isParent()?h.merge(E):E.remove()}),h.forEach(function(E){return E.children().move({parent:null})}),h.forEach(function(E){return o(E).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==a.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==a.pan.x||e.pan.y!==a.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var c=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],g=0;g<c.length;g++){var d=c[g];e[d]!=null&&r[d](e[d])}return r.endBatch(),this}else{var m=!!e,p={};m?p.elements=this.elements().map(function(E){return E.json()}):(p.elements={},n.forEach(function(E){var T=E.group();p.elements[T]||(p.elements[T]=[]),p.elements[T].push(E.json())})),this._private.styleEnabled&&(p.style=r.style().json()),p.data=kt(r.data());var y=a.options;return p.zoomingEnabled=a.zoomingEnabled,p.userZoomingEnabled=a.userZoomingEnabled,p.zoom=a.zoom,p.minZoom=a.minZoom,p.maxZoom=a.maxZoom,p.panningEnabled=a.panningEnabled,p.userPanningEnabled=a.userPanningEnabled,p.pan=kt(a.pan),p.boxSelectionEnabled=a.boxSelectionEnabled,p.renderer=kt(y.renderer),p.hideEdgesOnViewport=y.hideEdgesOnViewport,p.textureOnViewport=y.textureOnViewport,p.wheelSensitivity=y.wheelSensitivity,p.motionBlur=y.motionBlur,p.multiClickDebounceTime=y.multiClickDebounceTime,p}}});xn.$id=xn.getElementById;[im,fm,Cf,pi,dn,hm,yi,gn,gm,Cr,Ia].forEach(function(t){Ie(xn,t)});var ym={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},Hr=function(e){return e.scratch("breadthfirst")},fu=function(e,r){return e.scratch("breadthfirst",r)};function Tf(t){this.options=Ie({},ym,t)}Tf.prototype.run=function(){var t=this.options,e=t,r=t.cy,a=e.eles,n=a.nodes().filter(function(Q){return!Q.isParent()}),o=a,i=e.directed,l=e.maximal||e.maximalAdjustments>0,u=Lt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s;if(Nt(e.roots))s=e.roots;else if(Je(e.roots)){for(var f=[],v=0;v<e.roots.length;v++){var h=e.roots[v],c=r.getElementById(h);f.push(c)}s=r.collection(f)}else if(Re(e.roots))s=r.$(e.roots);else if(i)s=n.roots();else{var g=a.components();s=r.collection();for(var d=function(le){var de=g[le],ie=de.maxDegree(!1),_=de.filter(function(ue){return ue.degree(!1)===ie});s=s.add(_)},m=0;m<g.length;m++)d(m)}var p=[],y={},E=function(le,de){p[de]==null&&(p[de]=[]);var ie=p[de].length;p[de].push(le),fu(le,{index:ie,depth:de})},T=function(le,de){var ie=Hr(le),_=ie.depth,ue=ie.index;p[_][ue]=null,E(le,de)};o.bfs({roots:s,directed:e.directed,visit:function(le,de,ie,_,ue){var Ee=le[0],me=Ee.id();E(Ee,ue),y[me]=!0}});for(var w=[],x=0;x<n.length;x++){var D=n[x];y[D.id()]||w.push(D)}var L=function(le){for(var de=p[le],ie=0;ie<de.length;ie++){var _=de[ie];if(_==null){de.splice(ie,1),ie--;continue}fu(_,{depth:le,index:ie})}},N=function(){for(var le=0;le<p.length;le++)L(le)},A=function(le,de){for(var ie=Hr(le),_=le.incomers().filter(function(I){return I.isNode()&&a.has(I)}),ue=-1,Ee=le.id(),me=0;me<_.length;me++){var pe=_[me],re=Hr(pe);ue=Math.max(ue,re.depth)}return ie.depth<=ue?de[Ee]?null:(T(le,ue+1),de[Ee]=!0,!0):!1};if(i&&l){var P=[],b={},M=function(le){return P.push(le)},C=function(){return P.shift()};for(n.forEach(function(Q){return P.push(Q)});P.length>0;){var O=C(),S=A(O,b);if(S)O.outgoers().filter(function(Q){return Q.isNode()&&a.has(Q)}).forEach(M);else if(S===null){We("Detected double maximal shift for node `"+O.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}N();var R=0;if(e.avoidOverlap)for(var B=0;B<n.length;B++){var z=n[B],G=z.layoutDimensions(e),k=G.w,H=G.h;R=Math.max(R,k,H)}var $={},V=function(le){if($[le.id()])return $[le.id()];for(var de=Hr(le).depth,ie=le.neighborhood(),_=0,ue=0,Ee=0;Ee<ie.length;Ee++){var me=ie[Ee];if(!(me.isEdge()||me.isParent()||!n.has(me))){var pe=Hr(me);if(pe!=null){var re=pe.index,I=pe.depth;if(!(re==null||I==null)){var Z=p[I].length;I<de&&(_+=re/Z,ue++)}}}}return ue=Math.max(1,ue),_=_/ue,ue===0&&(_=0),$[le.id()]=_,_},X=function(le,de){var ie=V(le),_=V(de),ue=ie-_;return ue===0?Ou(le.id(),de.id()):ue};e.depthSort!==void 0&&(X=e.depthSort);for(var U=0;U<p.length;U++)p[U].sort(X),L(U);for(var F=[],Y=0;Y<w.length;Y++)F.push(w[Y]);p.unshift(F),N();for(var q=0,K=0;K<p.length;K++)q=Math.max(p[K].length,q);var j={x:u.x1+u.w/2,y:u.x1+u.h/2},ge=p.reduce(function(Q,le){return Math.max(Q,le.length)},0),Ce=function(le){var de=Hr(le),ie=de.depth,_=de.index,ue=p[ie].length,Ee=Math.max(u.w/((e.grid?ge:ue)+1),R),me=Math.max(u.h/(p.length+1),R),pe=Math.min(u.w/2/p.length,u.h/2/p.length);if(pe=Math.max(pe,R),e.circle){var I=pe*ie+pe-(p.length>0&&p[0].length<=3?pe/2:0),Z=2*Math.PI/p[ie].length*_;return ie===0&&p[0].length===1&&(I=1),{x:j.x+I*Math.cos(Z),y:j.y+I*Math.sin(Z)}}else{var re={x:j.x+(_+1-(ue+1)/2)*Ee,y:(ie+1)*me};return re}};return a.nodes().layoutPositions(this,e,Ce),this};var mm={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Df(t){this.options=Ie({},mm,t)}Df.prototype.run=function(){var t=this.options,e=t,r=t.cy,a=e.eles,n=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=a.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var i=Lt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l={x:i.x1+i.w/2,y:i.y1+i.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,s=u/Math.max(1,o.length-1),f,v=0,h=0;h<o.length;h++){var c=o[h],g=c.layoutDimensions(e),d=g.w,m=g.h;v=Math.max(v,d,m)}if(ye(e.radius)?f=e.radius:o.length<=1?f=0:f=Math.min(i.h,i.w)/2-v,o.length>1&&e.avoidOverlap){v*=1.75;var p=Math.cos(s)-Math.cos(0),y=Math.sin(s)-Math.sin(0),E=Math.sqrt(v*v/(p*p+y*y));f=Math.max(E,f)}var T=function(x,D){var L=e.startAngle+D*s*(n?1:-1),N=f*Math.cos(L),A=f*Math.sin(L),P={x:l.x+N,y:l.y+A};return P};return a.nodes().layoutPositions(this,e,T),this};var Em={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Sf(t){this.options=Ie({},Em,t)}Sf.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=t.cy,n=e.eles,o=n.nodes().not(":parent"),i=Lt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()}),l={x:i.x1+i.w/2,y:i.y1+i.h/2},u=[],s=0,f=0;f<o.length;f++){var v=o[f],h=void 0;h=e.concentric(v),u.push({value:h,node:v}),v._private.scratch.concentric=h}o.updateStyle();for(var c=0;c<o.length;c++){var g=o[c],d=g.layoutDimensions(e);s=Math.max(s,d.w,d.h)}u.sort(function(Q,le){return le.value-Q.value});for(var m=e.levelWidth(o),p=[[]],y=p[0],E=0;E<u.length;E++){var T=u[E];if(y.length>0){var w=Math.abs(y[0].value-T.value);w>=m&&(y=[],p.push(y))}y.push(T)}var x=s+e.minNodeSpacing;if(!e.avoidOverlap){var D=p.length>0&&p[0].length>1,L=Math.min(i.w,i.h)/2-x,N=L/(p.length+D?1:0);x=Math.min(x,N)}for(var A=0,P=0;P<p.length;P++){var b=p[P],M=e.sweep===void 0?2*Math.PI-2*Math.PI/b.length:e.sweep,C=b.dTheta=M/Math.max(1,b.length-1);if(b.length>1&&e.avoidOverlap){var O=Math.cos(C)-Math.cos(0),S=Math.sin(C)-Math.sin(0),R=Math.sqrt(x*x/(O*O+S*S));A=Math.max(R,A)}b.r=A,A+=x}if(e.equidistant){for(var B=0,z=0,G=0;G<p.length;G++){var k=p[G],H=k.r-z;B=Math.max(B,H)}z=0;for(var $=0;$<p.length;$++){var V=p[$];$===0&&(z=V.r),V.r=z,z+=B}}for(var X={},U=0;U<p.length;U++)for(var F=p[U],Y=F.dTheta,q=F.r,K=0;K<F.length;K++){var j=F[K],ge=e.startAngle+(r?1:-1)*Y*K,Ce={x:l.x+q*Math.cos(ge),y:l.y+q*Math.sin(ge)};X[j.node.id()]=Ce}return n.nodes().layoutPositions(this,e,function(Q){var le=Q.id();return X[le]}),this};var si,bm={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function kn(t){this.options=Ie({},bm,t),this.options.layout=this}kn.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?si=!0:si=!1;var a=wm(e,r,t);si&&Tm(a),t.randomize&&Dm(a);var n=Xt(),o=function(){Sm(a,e,t),t.fit===!0&&e.fit(t.padding)},i=function(h){return!(r.stopped||h>=t.numIter||(Lm(a,t),a.temperature=a.temperature*t.coolingFactor,a.temperature<t.minTemp))},l=function(){if(t.animate===!0||t.animate===!1)o(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var h=t.eles.nodes(),c=Lf(a,t,h);h.layoutPositions(r,t,c)}},u=0,s=!0;if(t.animate===!0){var f=function v(){for(var h=0;s&&h<t.refresh;)s=i(u),u++,h++;if(!s)hu(a,t),l();else{var c=Xt();c-n>=t.animationThreshold&&o(),mn(v)}};f()}else{for(;s;)s=i(u),u++;hu(a,t),l()}return this};kn.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};kn.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var wm=function(e,r,a){for(var n=a.eles.edges(),o=a.eles.nodes(),i={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:a.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:Lt(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},l=a.eles.components(),u={},s=0;s<l.length;s++)for(var f=l[s],v=0;v<f.length;v++){var h=f[v];u[h.id()]=s}for(var s=0;s<i.nodeSize;s++){var c=o[s],g=c.layoutDimensions(a),d={};d.isLocked=c.locked(),d.id=c.data("id"),d.parentId=c.data("parent"),d.cmptId=u[c.id()],d.children=[],d.positionX=c.position("x"),d.positionY=c.position("y"),d.offsetX=0,d.offsetY=0,d.height=g.w,d.width=g.h,d.maxX=d.positionX+d.width/2,d.minX=d.positionX-d.width/2,d.maxY=d.positionY+d.height/2,d.minY=d.positionY-d.height/2,d.padLeft=parseFloat(c.style("padding")),d.padRight=parseFloat(c.style("padding")),d.padTop=parseFloat(c.style("padding")),d.padBottom=parseFloat(c.style("padding")),d.nodeRepulsion=at(a.nodeRepulsion)?a.nodeRepulsion(c):a.nodeRepulsion,i.layoutNodes.push(d),i.idToIndex[d.id]=s}for(var m=[],p=0,y=-1,E=[],s=0;s<i.nodeSize;s++){var c=i.layoutNodes[s],T=c.parentId;T!=null?i.layoutNodes[i.idToIndex[T]].children.push(c.id):(m[++y]=c.id,E.push(c.id))}for(i.graphSet.push(E);p<=y;){var w=m[p++],x=i.idToIndex[w],h=i.layoutNodes[x],D=h.children;if(D.length>0){i.graphSet.push(D);for(var s=0;s<D.length;s++)m[++y]=D[s]}}for(var s=0;s<i.graphSet.length;s++)for(var L=i.graphSet[s],v=0;v<L.length;v++){var N=i.idToIndex[L[v]];i.indexToGraph[N]=s}for(var s=0;s<i.edgeSize;s++){var A=n[s],P={};P.id=A.data("id"),P.sourceId=A.data("source"),P.targetId=A.data("target");var b=at(a.idealEdgeLength)?a.idealEdgeLength(A):a.idealEdgeLength,M=at(a.edgeElasticity)?a.edgeElasticity(A):a.edgeElasticity,C=i.idToIndex[P.sourceId],O=i.idToIndex[P.targetId],S=i.indexToGraph[C],R=i.indexToGraph[O];if(S!=R){for(var B=xm(P.sourceId,P.targetId,i),z=i.graphSet[B],G=0,d=i.layoutNodes[C];z.indexOf(d.id)===-1;)d=i.layoutNodes[i.idToIndex[d.parentId]],G++;for(d=i.layoutNodes[O];z.indexOf(d.id)===-1;)d=i.layoutNodes[i.idToIndex[d.parentId]],G++;b*=G*a.nestingFactor}P.idealLength=b,P.elasticity=M,i.layoutEdges.push(P)}return i},xm=function(e,r,a){var n=Cm(e,r,0,a);return 2>n.count?0:n.graph},Cm=function t(e,r,a,n){var o=n.graphSet[a];if(-1<o.indexOf(e)&&-1<o.indexOf(r))return{count:2,graph:a};for(var i=0,l=0;l<o.length;l++){var u=o[l],s=n.idToIndex[u],f=n.layoutNodes[s].children;if(f.length!==0){var v=n.indexToGraph[n.idToIndex[f[0]]],h=t(e,r,v,n);if(h.count!==0)if(h.count===1){if(i++,i===2)break}else return h}}return{count:i,graph:a}},Tm,Dm=function(e,r){for(var a=e.clientWidth,n=e.clientHeight,o=0;o<e.nodeSize;o++){var i=e.layoutNodes[o];i.children.length===0&&!i.isLocked&&(i.positionX=Math.random()*a,i.positionY=Math.random()*n)}},Lf=function(e,r,a){var n=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(a.forEach(function(i){var l=e.layoutNodes[e.idToIndex[i.data("id")]];o.x1=Math.min(o.x1,l.positionX),o.x2=Math.max(o.x2,l.positionX),o.y1=Math.min(o.y1,l.positionY),o.y2=Math.max(o.y2,l.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(i,l){var u=e.layoutNodes[e.idToIndex[i.data("id")]];if(r.boundingBox){var s=(u.positionX-o.x1)/o.w,f=(u.positionY-o.y1)/o.h;return{x:n.x1+s*n.w,y:n.y1+f*n.h}}else return{x:u.positionX,y:u.positionY}}},Sm=function(e,r,a){var n=a.layout,o=a.eles.nodes(),i=Lf(e,a,o);o.positions(i),e.ready!==!0&&(e.ready=!0,n.one("layoutready",a.ready),n.emit({type:"layoutready",layout:this}))},Lm=function(e,r,a){Nm(e,r),Om(e),Rm(e,r),Pm(e),Im(e)},Nm=function(e,r){for(var a=0;a<e.graphSet.length;a++)for(var n=e.graphSet[a],o=n.length,i=0;i<o;i++)for(var l=e.layoutNodes[e.idToIndex[n[i]]],u=i+1;u<o;u++){var s=e.layoutNodes[e.idToIndex[n[u]]];Mm(l,s,e,r)}},vu=function(e){return-e+2*e*Math.random()},Mm=function(e,r,a,n){var o=e.cmptId,i=r.cmptId;if(!(o!==i&&!a.isCompound)){var l=r.positionX-e.positionX,u=r.positionY-e.positionY,s=1;l===0&&u===0&&(l=vu(s),u=vu(s));var f=Am(e,r,l,u);if(f>0)var v=n.nodeOverlap*f,h=Math.sqrt(l*l+u*u),c=v*l/h,g=v*u/h;else var d=Cn(e,l,u),m=Cn(r,-1*l,-1*u),p=m.x-d.x,y=m.y-d.y,E=p*p+y*y,h=Math.sqrt(E),v=(e.nodeRepulsion+r.nodeRepulsion)/E,c=v*p/h,g=v*y/h;e.isLocked||(e.offsetX-=c,e.offsetY-=g),r.isLocked||(r.offsetX+=c,r.offsetY+=g)}},Am=function(e,r,a,n){if(a>0)var o=e.maxX-r.minX;else var o=r.maxX-e.minX;if(n>0)var i=e.maxY-r.minY;else var i=r.maxY-e.minY;return o>=0&&i>=0?Math.sqrt(o*o+i*i):0},Cn=function(e,r,a){var n=e.positionX,o=e.positionY,i=e.height||1,l=e.width||1,u=a/r,s=i/l,f={};return r===0&&0<a||r===0&&0>a?(f.x=n,f.y=o+i/2,f):0<r&&-1*s<=u&&u<=s?(f.x=n+l/2,f.y=o+l*a/2/r,f):0>r&&-1*s<=u&&u<=s?(f.x=n-l/2,f.y=o-l*a/2/r,f):0<a&&(u<=-1*s||u>=s)?(f.x=n+i*r/2/a,f.y=o+i/2,f):(0>a&&(u<=-1*s||u>=s)&&(f.x=n-i*r/2/a,f.y=o-i/2),f)},Om=function(e,r){for(var a=0;a<e.edgeSize;a++){var n=e.layoutEdges[a],o=e.idToIndex[n.sourceId],i=e.layoutNodes[o],l=e.idToIndex[n.targetId],u=e.layoutNodes[l],s=u.positionX-i.positionX,f=u.positionY-i.positionY;if(!(s===0&&f===0)){var v=Cn(i,s,f),h=Cn(u,-1*s,-1*f),c=h.x-v.x,g=h.y-v.y,d=Math.sqrt(c*c+g*g),m=Math.pow(n.idealLength-d,2)/n.elasticity;if(d!==0)var p=m*c/d,y=m*g/d;else var p=0,y=0;i.isLocked||(i.offsetX+=p,i.offsetY+=y),u.isLocked||(u.offsetX-=p,u.offsetY-=y)}}},Rm=function(e,r){if(r.gravity!==0)for(var a=1,n=0;n<e.graphSet.length;n++){var o=e.graphSet[n],i=o.length;if(n===0)var l=e.clientHeight/2,u=e.clientWidth/2;else var s=e.layoutNodes[e.idToIndex[o[0]]],f=e.layoutNodes[e.idToIndex[s.parentId]],l=f.positionX,u=f.positionY;for(var v=0;v<i;v++){var h=e.layoutNodes[e.idToIndex[o[v]]];if(!h.isLocked){var c=l-h.positionX,g=u-h.positionY,d=Math.sqrt(c*c+g*g);if(d>a){var m=r.gravity*c/d,p=r.gravity*g/d;h.offsetX+=m,h.offsetY+=p}}}}},Pm=function(e,r){var a=[],n=0,o=-1;for(a.push.apply(a,e.graphSet[0]),o+=e.graphSet[0].length;n<=o;){var i=a[n++],l=e.idToIndex[i],u=e.layoutNodes[l],s=u.children;if(0<s.length&&!u.isLocked){for(var f=u.offsetX,v=u.offsetY,h=0;h<s.length;h++){var c=e.layoutNodes[e.idToIndex[s[h]]];c.offsetX+=f,c.offsetY+=v,a[++o]=s[h]}u.offsetX=0,u.offsetY=0}}},Im=function(e,r){for(var a=0;a<e.nodeSize;a++){var n=e.layoutNodes[a];0<n.children.length&&(n.maxX=void 0,n.minX=void 0,n.maxY=void 0,n.minY=void 0)}for(var a=0;a<e.nodeSize;a++){var n=e.layoutNodes[a];if(!(0<n.children.length||n.isLocked)){var o=Fm(n.offsetX,n.offsetY,e.temperature);n.positionX+=o.x,n.positionY+=o.y,n.offsetX=0,n.offsetY=0,n.minX=n.positionX-n.width,n.maxX=n.positionX+n.width,n.minY=n.positionY-n.height,n.maxY=n.positionY+n.height,Bm(n,e)}}for(var a=0;a<e.nodeSize;a++){var n=e.layoutNodes[a];0<n.children.length&&!n.isLocked&&(n.positionX=(n.maxX+n.minX)/2,n.positionY=(n.maxY+n.minY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY)}},Fm=function(e,r,a){var n=Math.sqrt(e*e+r*r);if(n>a)var o={x:a*e/n,y:a*r/n};else var o={x:e,y:r};return o},Bm=function t(e,r){var a=e.parentId;if(a!=null){var n=r.layoutNodes[r.idToIndex[a]],o=!1;if((n.maxX==null||e.maxX+n.padRight>n.maxX)&&(n.maxX=e.maxX+n.padRight,o=!0),(n.minX==null||e.minX-n.padLeft<n.minX)&&(n.minX=e.minX-n.padLeft,o=!0),(n.maxY==null||e.maxY+n.padBottom>n.maxY)&&(n.maxY=e.maxY+n.padBottom,o=!0),(n.minY==null||e.minY-n.padTop<n.minY)&&(n.minY=e.minY-n.padTop,o=!0),o)return t(n,r)}},hu=function(e,r){for(var a=e.layoutNodes,n=[],o=0;o<a.length;o++){var i=a[o],l=i.cmptId,u=n[l]=n[l]||[];u.push(i)}for(var s=0,o=0;o<n.length;o++){var f=n[o];if(f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var v=0;v<f.length;v++){var h=f[v];f.x1=Math.min(f.x1,h.positionX-h.width/2),f.x2=Math.max(f.x2,h.positionX+h.width/2),f.y1=Math.min(f.y1,h.positionY-h.height/2),f.y2=Math.max(f.y2,h.positionY+h.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,s+=f.w*f.h}}n.sort(function(y,E){return E.w*E.h-y.w*y.h});for(var c=0,g=0,d=0,m=0,p=Math.sqrt(s)*e.clientWidth/e.clientHeight,o=0;o<n.length;o++){var f=n[o];if(f){for(var v=0;v<f.length;v++){var h=f[v];h.isLocked||(h.positionX+=c-f.x1,h.positionY+=g-f.y1)}c+=f.w+r.componentSpacing,d+=f.w+r.componentSpacing,m=Math.max(m,f.h),d>p&&(g+=m+r.componentSpacing,c=0,d=0,m=0)}}},km={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Nf(t){this.options=Ie({},km,t)}Nf.prototype.run=function(){var t=this.options,e=t,r=t.cy,a=e.eles,n=a.nodes().not(":parent");e.sort&&(n=n.sort(e.sort));var o=Lt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(o.h===0||o.w===0)a.nodes().layoutPositions(this,e,function($){return{x:o.x1,y:o.y1}});else{var i=n.size(),l=Math.sqrt(i*o.h/o.w),u=Math.round(l),s=Math.round(o.w/o.h*l),f=function(V){if(V==null)return Math.min(u,s);var X=Math.min(u,s);X==u?u=V:s=V},v=function(V){if(V==null)return Math.max(u,s);var X=Math.max(u,s);X==u?u=V:s=V},h=e.rows,c=e.cols!=null?e.cols:e.columns;if(h!=null&&c!=null)u=h,s=c;else if(h!=null&&c==null)u=h,s=Math.ceil(i/u);else if(h==null&&c!=null)s=c,u=Math.ceil(i/s);else if(s*u>i){var g=f(),d=v();(g-1)*d>=i?f(g-1):(d-1)*g>=i&&v(d-1)}else for(;s*u<i;){var m=f(),p=v();(p+1)*m>=i?v(p+1):f(m+1)}var y=o.w/s,E=o.h/u;if(e.condense&&(y=0,E=0),e.avoidOverlap)for(var T=0;T<n.length;T++){var w=n[T],x=w._private.position;(x.x==null||x.y==null)&&(x.x=0,x.y=0);var D=w.layoutDimensions(e),L=e.avoidOverlapPadding,N=D.w+L,A=D.h+L;y=Math.max(y,N),E=Math.max(E,A)}for(var P={},b=function(V,X){return!!P["c-"+V+"-"+X]},M=function(V,X){P["c-"+V+"-"+X]=!0},C=0,O=0,S=function(){O++,O>=s&&(O=0,C++)},R={},B=0;B<n.length;B++){var z=n[B],G=e.position(z);if(G&&(G.row!==void 0||G.col!==void 0)){var k={row:G.row,col:G.col};if(k.col===void 0)for(k.col=0;b(k.row,k.col);)k.col++;else if(k.row===void 0)for(k.row=0;b(k.row,k.col);)k.row++;R[z.id()]=k,M(k.row,k.col)}}var H=function(V,X){var U,F;if(V.locked()||V.isParent())return!1;var Y=R[V.id()];if(Y)U=Y.col*y+y/2+o.x1,F=Y.row*E+E/2+o.y1;else{for(;b(C,O);)S();U=O*y+y/2+o.x1,F=C*E+E/2+o.y1,M(C,O),S()}return{x:U,y:F}};n.layoutPositions(this,e,H)}return this};var zm={ready:function(){},stop:function(){}};function zi(t){this.options=Ie({},zm,t)}zi.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};zi.prototype.stop=function(){return this};var Gm={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Mf(t){this.options=Ie({},Gm,t)}Mf.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),a=at(t.positions);function n(o){if(t.positions==null)return _g(o.position());if(a)return t.positions(o);var i=t.positions[o._private.data.id];return i??null}return r.layoutPositions(this,t,function(o,i){var l=n(o);return o.locked()||l==null?!1:l}),this};var Vm={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Af(t){this.options=Ie({},Vm,t)}Af.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,a=Lt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),n=function(i,l){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}};return r.nodes().layoutPositions(this,t,n),this};var Hm=[{name:"breadthfirst",impl:Tf},{name:"circle",impl:Df},{name:"concentric",impl:Sf},{name:"cose",impl:kn},{name:"grid",impl:Nf},{name:"null",impl:zi},{name:"preset",impl:Mf},{name:"random",impl:Af}];function Of(t){this.options=t,this.notifications=0}var cu=function(){},du=function(){throw new Error("A headless instance can not render images")};Of.prototype={recalculateRenderedStyle:cu,notify:function(){this.notifications++},init:cu,isHeadless:function(){return!0},png:du,jpg:du};var Gi={};Gi.arrowShapeWidth=.3;Gi.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(s,f,v,h,c,g,d){var m=c.x-v/2-d,p=c.x+v/2+d,y=c.y-v/2-d,E=c.y+v/2+d,T=m<=s&&s<=p&&y<=f&&f<=E;return T},a=function(s,f,v,h,c){var g=s*Math.cos(h)-f*Math.sin(h),d=s*Math.sin(h)+f*Math.cos(h),m=g*v,p=d*v,y=m+c.x,E=p+c.y;return{x:y,y:E}},n=function(s,f,v,h){for(var c=[],g=0;g<s.length;g+=2){var d=s[g],m=s[g+1];c.push(a(d,m,f,v,h))}return c},o=function(s){for(var f=[],v=0;v<s.length;v++){var h=s[v];f.push(h.x,h.y)}return f},i=function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").pfValue*2},l=function(s,f){Re(f)&&(f=t[f]),t[s]=Ie({name:s,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,c,g,d,m,p){var y=o(n(this.points,g+2*p,d,m)),E=St(h,c,y);return E},roughCollide:r,draw:function(h,c,g,d){var m=n(this.points,c,g,d);e.arrowShapeImpl("polygon")(h,m)},spacing:function(h){return 0},gap:i},f)};l("none",{collide:En,roughCollide:En,draw:Li,spacing:Ml,gap:Ml}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(s,f,v,h,c){var g=n(this.points,f,v,h),d=this.controlPoint,m=a(d[0],d[1],f,v,h);e.arrowShapeImpl(this.name)(s,g,m)},gap:function(s){return i(s)*.8}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(s,f,v,h,c,g,d){var m=o(n(this.points,v+2*d,h,c)),p=o(n(this.pointsTee,v+2*d,h,c)),y=St(s,f,m)||St(s,f,p);return y},draw:function(s,f,v,h,c){var g=n(this.points,f,v,h),d=n(this.pointsTee,f,v,h);e.arrowShapeImpl(this.name)(s,g,d)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(s,f,v,h,c,g,d){var m=c,p=Math.pow(m.x-s,2)+Math.pow(m.y-f,2)<=Math.pow((v+2*d)*this.radius,2),y=o(n(this.points,v+2*d,h,c));return St(s,f,y)||p},draw:function(s,f,v,h,c){var g=n(this.pointsTr,f,v,h);e.arrowShapeImpl(this.name)(s,g,h.x,h.y,this.radius*f)},spacing:function(s){return e.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(s,f){var v=this.baseCrossLinePts.slice(),h=f/s,c=3,g=5;return v[c]=v[c]-h,v[g]=v[g]-h,v},collide:function(s,f,v,h,c,g,d){var m=o(n(this.points,v+2*d,h,c)),p=o(n(this.crossLinePts(v,g),v+2*d,h,c)),y=St(s,f,m)||St(s,f,p);return y},draw:function(s,f,v,h,c){var g=n(this.points,f,v,h),d=n(this.crossLinePts(f,c),f,v,h);e.arrowShapeImpl(this.name)(s,g,d)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(s){return i(s)*.525}}),l("circle",{radius:.15,collide:function(s,f,v,h,c,g,d){var m=c,p=Math.pow(m.x-s,2)+Math.pow(m.y-f,2)<=Math.pow((v+2*d)*this.radius,2);return p},draw:function(s,f,v,h,c){e.arrowShapeImpl(this.name)(s,h.x,h.y,this.radius*f)},spacing:function(s){return e.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(s){return 1},gap:function(s){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(s){return .95*s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}})};var Sr={};Sr.projectIntoViewport=function(t,e){var r=this.cy,a=this.findContainerClientCoords(),n=a[0],o=a[1],i=a[4],l=r.pan(),u=r.zoom(),s=((t-n)/i-l.x)/u,f=((e-o)/i-l.y)/u;return[s,f]};Sr.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=rt.getComputedStyle(t),a=function(p){return parseFloat(r.getPropertyValue(p))},n={left:a("padding-left"),right:a("padding-right"),top:a("padding-top"),bottom:a("padding-bottom")},o={left:a("border-left-width"),right:a("border-right-width"),top:a("border-top-width"),bottom:a("border-bottom-width")},i=t.clientWidth,l=t.clientHeight,u=n.left+n.right,s=n.top+n.bottom,f=o.left+o.right,v=e.width/(i+f),h=i-u,c=l-s,g=e.left+n.left+o.left,d=e.top+n.top+o.top;return this.containerBB=[g,d,h,c,v]};Sr.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Sr.findNearestElement=function(t,e,r,a){return this.findNearestElements(t,e,r,a)[0]};Sr.findNearestElements=function(t,e,r,a){var n=this,o=this,i=o.getCachedZSortedEles(),l=[],u=o.cy.zoom(),s=o.cy.hasCompoundNodes(),f=(a?24:8)/u,v=(a?8:2)/u,h=(a?8:2)/u,c=1/0,g,d;r&&(i=i.interactive);function m(D,L){if(D.isNode()){if(d)return;d=D,l.push(D)}if(D.isEdge()&&(L==null||L<c))if(g){if(g.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value&&g.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value){for(var N=0;N<l.length;N++)if(l[N].isEdge()){l[N]=D,g=D,c=L??c;break}}}else l.push(D),g=D,c=L??c}function p(D){var L=D.outerWidth()+2*v,N=D.outerHeight()+2*v,A=L/2,P=N/2,b=D.position();if(b.x-A<=t&&t<=b.x+A&&b.y-P<=e&&e<=b.y+P){var M=o.nodeShapes[n.getNodeShape(D)];if(M.checkPoint(t,e,0,L,N,b.x,b.y))return m(D,0),!0}}function y(D){var L=D._private,N=L.rscratch,A=D.pstyle("width").pfValue,P=D.pstyle("arrow-scale").value,b=A/2+f,M=b*b,C=b*2,B=L.source,z=L.target,O;if(N.edgeType==="segments"||N.edgeType==="straight"||N.edgeType==="haystack"){for(var S=N.allpts,R=0;R+3<S.length;R+=2)if(vp(t,e,S[R],S[R+1],S[R+2],S[R+3],C)&&M>(O=pp(t,e,S[R],S[R+1],S[R+2],S[R+3])))return m(D,O),!0}else if(N.edgeType==="bezier"||N.edgeType==="multibezier"||N.edgeType==="self"||N.edgeType==="compound"){for(var S=N.allpts,R=0;R+5<N.allpts.length;R+=4)if(hp(t,e,S[R],S[R+1],S[R+2],S[R+3],S[R+4],S[R+5],C)&&M>(O=gp(t,e,S[R],S[R+1],S[R+2],S[R+3],S[R+4],S[R+5])))return m(D,O),!0}for(var B=B||L.source,z=z||L.target,G=n.getArrowWidth(A,P),k=[{name:"source",x:N.arrowStartX,y:N.arrowStartY,angle:N.srcArrowAngle},{name:"target",x:N.arrowEndX,y:N.arrowEndY,angle:N.tgtArrowAngle},{name:"mid-source",x:N.midX,y:N.midY,angle:N.midsrcArrowAngle},{name:"mid-target",x:N.midX,y:N.midY,angle:N.midtgtArrowAngle}],R=0;R<k.length;R++){var H=k[R],$=o.arrowShapes[D.pstyle(H.name+"-arrow-shape").value],V=D.pstyle("width").pfValue;if($.roughCollide(t,e,G,H.angle,{x:H.x,y:H.y},V,f)&&$.collide(t,e,G,H.angle,{x:H.x,y:H.y},V,f))return m(D),!0}s&&l.length>0&&(p(B),p(z))}function E(D,L,N){return Ft(D,L,N)}function T(D,L){var N=D._private,A=h,P;L?P=L+"-":P="",D.boundingBox();var b=N.labelBounds[L||"main"],M=D.pstyle(P+"label").value,C=D.pstyle("text-events").strValue==="yes";if(!(!C||!M)){var O=E(N.rscratch,"labelX",L),S=E(N.rscratch,"labelY",L),R=E(N.rscratch,"labelAngle",L),B=D.pstyle(P+"text-margin-x").pfValue,z=D.pstyle(P+"text-margin-y").pfValue,G=b.x1-A-B,k=b.x2+A-B,H=b.y1-A-z,$=b.y2+A-z;if(R){var V=Math.cos(R),X=Math.sin(R),U=function(Ce,Q){return Ce=Ce-O,Q=Q-S,{x:Ce*V-Q*X+O,y:Ce*X+Q*V+S}},F=U(G,H),Y=U(G,$),q=U(k,H),K=U(k,$),j=[F.x+B,F.y+z,q.x+B,q.y+z,K.x+B,K.y+z,Y.x+B,Y.y+z];if(St(t,e,j))return m(D),!0}else if(Zr(b,t,e))return m(D),!0}}for(var w=i.length-1;w>=0;w--){var x=i[w];x.isNode()?p(x)||T(x):y(x)||T(x)||T(x,"source")||T(x,"target")}return l};Sr.getAllInBox=function(t,e,r,a){var n=this.getCachedZSortedEles().interactive,o=[],i=Math.min(t,r),l=Math.max(t,r),u=Math.min(e,a),s=Math.max(e,a);t=i,r=l,e=u,a=s;for(var f=Lt({x1:t,y1:e,x2:r,y2:a}),v=0;v<n.length;v++){var h=n[v];if(h.isNode()){var c=h,g=c.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Ai(f,g)&&!qu(g,f)&&o.push(c)}else{var d=h,m=d._private,p=m.rscratch;if(p.startX!=null&&p.startY!=null&&!Zr(f,p.startX,p.startY)||p.endX!=null&&p.endY!=null&&!Zr(f,p.endX,p.endY))continue;if(p.edgeType==="bezier"||p.edgeType==="multibezier"||p.edgeType==="self"||p.edgeType==="compound"||p.edgeType==="segments"||p.edgeType==="haystack"){for(var y=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,E=!0,T=0;T<y.length;T++)if(!fp(f,y[T])){E=!1;break}E&&o.push(d)}else(p.edgeType==="haystack"||p.edgeType==="straight")&&o.push(d)}}return o};var Tn={};Tn.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",a=e.edgeType==="bezier",n=e.edgeType==="multibezier",o=e.edgeType==="segments",i=e.edgeType==="compound",l=e.edgeType==="self",u,s,f,v,h,c,p,y;if(r?(f=e.haystackPts[0],v=e.haystackPts[1],h=e.haystackPts[2],c=e.haystackPts[3]):(f=e.arrowStartX,v=e.arrowStartY,h=e.arrowEndX,c=e.arrowEndY),p=e.midX,y=e.midY,o)u=f-e.segpts[0],s=v-e.segpts[1];else if(n||i||l||a){var g=e.allpts,d=vt(g[0],g[2],g[4],.1),m=vt(g[1],g[3],g[5],.1);u=f-d,s=v-m}else u=f-p,s=v-y;e.srcArrowAngle=ja(u,s);var p=e.midX,y=e.midY;if(r&&(p=(f+h)/2,y=(v+c)/2),u=h-f,s=c-v,o){var g=e.allpts;if(g.length/2%2===0){var E=g.length/2,T=E-2;u=g[E]-g[T],s=g[E+1]-g[T+1]}else{var E=g.length/2-1,T=E-2,w=E+2;u=g[E]-g[T],s=g[E+1]-g[T+1]}}else if(n||i||l){var g=e.allpts,x=e.ctrlpts,D,L,N,A;if(x.length/2%2===0){var P=g.length/2-1,b=P+2,M=b+2;D=vt(g[P],g[b],g[M],0),L=vt(g[P+1],g[b+1],g[M+1],0),N=vt(g[P],g[b],g[M],1e-4),A=vt(g[P+1],g[b+1],g[M+1],1e-4)}else{var b=g.length/2-1,P=b-2,M=b+2;D=vt(g[P],g[b],g[M],.4999),L=vt(g[P+1],g[b+1],g[M+1],.4999),N=vt(g[P],g[b],g[M],.5),A=vt(g[P+1],g[b+1],g[M+1],.5)}u=N-D,s=A-L}if(e.midtgtArrowAngle=ja(u,s),e.midDispX=u,e.midDispY=s,u*=-1,s*=-1,o){var g=e.allpts;if(g.length/2%2!==0){var E=g.length/2-1,w=E+2;u=-(g[w]-g[E]),s=-(g[w+1]-g[E+1])}}if(e.midsrcArrowAngle=ja(u,s),o)u=h-e.segpts[e.segpts.length-2],s=c-e.segpts[e.segpts.length-1];else if(n||i||l||a){var g=e.allpts,C=g.length,d=vt(g[C-6],g[C-4],g[C-2],.9),m=vt(g[C-5],g[C-3],g[C-1],.9);u=h-d,s=c-m}else u=h-p,s=c-y;e.tgtArrowAngle=ja(u,s)};Tn.getArrowWidth=Tn.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},a=r[t+", "+e];return a||(a=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=a,a)};var Tt={};Tt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],a=r._private,n=a.rscratch;if(!n.haystack){var o=Math.random()*2*Math.PI;n.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,n.target={x:Math.cos(o),y:Math.sin(o)}}var i=a.source,l=a.target,u=i.position(),s=l.position(),f=i.width(),v=l.width(),h=i.height(),c=l.height(),g=r.pstyle("haystack-radius").value,d=g/2;n.haystackPts=n.allpts=[n.source.x*f*d+u.x,n.source.y*h*d+u.y,n.target.x*v*d+s.x,n.target.y*c*d+s.y],n.midX=(n.allpts[0]+n.allpts[2])/2,n.midY=(n.allpts[1]+n.allpts[3])/2,n.edgeType="haystack",n.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Tt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,a=e.posPts,n=e.intersectionPts,o=e.vectorNormInverse,i=t.pstyle("edge-distances").value,l=t.pstyle("segment-weights"),u=t.pstyle("segment-distances"),s=Math.min(l.pfValue.length,u.pfValue.length);r.edgeType="segments",r.segpts=[];for(var f=0;f<s;f++){var v=l.pfValue[f],h=u.pfValue[f],c=1-v,g=v,d=i==="node-position"?a:n,m={x:d.x1*c+d.x2*g,y:d.y1*c+d.y2*g};r.segpts.push(m.x+o.x*h,m.y+o.y*h)}};Tt.findLoopPoints=function(t,e,r,a){var n=t._private.rscratch,o=e.dirCounts,i=e.srcPos,l=t.pstyle("control-point-distances"),u=l?l.pfValue[0]:void 0,s=t.pstyle("loop-direction").pfValue,f=t.pstyle("loop-sweep").pfValue,v=t.pstyle("control-point-step-size").pfValue;n.edgeType="self";var h=r,c=v;a&&(h=0,c=u);var g=s-Math.PI/2,d=g-f/2,m=g+f/2,p=s+"_"+f;h=o[p]===void 0?o[p]=0:++o[p],n.ctrlpts=[i.x+Math.cos(d)*1.4*c*(h/3+1),i.y+Math.sin(d)*1.4*c*(h/3+1),i.x+Math.cos(m)*1.4*c*(h/3+1),i.y+Math.sin(m)*1.4*c*(h/3+1)]};Tt.findCompoundLoopPoints=function(t,e,r,a){var n=t._private.rscratch;n.edgeType="compound";var o=e.srcPos,i=e.tgtPos,l=e.srcW,u=e.srcH,s=e.tgtW,f=e.tgtH,v=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),c=h?h.pfValue[0]:void 0,g=r,d=v;a&&(g=0,d=c);var m=50,p={x:o.x-l/2,y:o.y-u/2},y={x:i.x-s/2,y:i.y-f/2},E={x:Math.min(p.x,y.x),y:Math.min(p.y,y.y)},T=.5,w=Math.max(T,Math.log(l*.01)),x=Math.max(T,Math.log(s*.01));n.ctrlpts=[E.x,E.y-(1+Math.pow(m,1.12)/100)*d*(g/3+1)*w,E.x-(1+Math.pow(m,1.12)/100)*d*(g/3+1)*x,E.y]};Tt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Tt.findBezierPoints=function(t,e,r,a,n){var o=t._private.rscratch,i=e.vectorNormInverse,l=e.posPts,u=e.intersectionPts,s=t.pstyle("edge-distances").value,f=t.pstyle("control-point-step-size").pfValue,v=t.pstyle("control-point-distances"),h=t.pstyle("control-point-weights"),c=v&&h?Math.min(v.value.length,h.value.length):1,g=v?v.pfValue[0]:void 0,d=h.value[0],m=a;o.edgeType=m?"multibezier":"bezier",o.ctrlpts=[];for(var p=0;p<c;p++){var y=(.5-e.eles.length/2+r)*f*(n?-1:1),E=void 0,T=Yu(y);m&&(g=v?v.pfValue[p]:f,d=h.value[p]),a?E=g:E=g!==void 0?T*g:void 0;var w=E!==void 0?E:y,x=1-d,D=d,L=s==="node-position"?l:u,N={x:L.x1*x+L.x2*D,y:L.y1*x+L.y2*D};o.ctrlpts.push(N.x+i.x*w,N.y+i.y*w)}};Tt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var a="vertical",n="horizontal",o="leftward",i="rightward",l="downward",u="upward",s="auto",f=e.posPts,v=e.srcW,h=e.srcH,c=e.tgtW,g=e.tgtH,d=t.pstyle("edge-distances").value,m=d!=="node-position",p=t.pstyle("taxi-direction").value,y=p,E=t.pstyle("taxi-turn"),T=E.units==="%",w=E.pfValue,x=w<0,D=t.pstyle("taxi-turn-min-distance").pfValue,L=m?(v+c)/2:0,N=m?(h+g)/2:0,A=f.x2-f.x1,P=f.y2-f.y1,b=function(J,ne){return J>0?Math.max(J-ne,0):Math.min(J+ne,0)},M=b(A,L),C=b(P,N),O=!1;y===s?p=Math.abs(M)>Math.abs(C)?n:a:y===u||y===l?(p=a,O=!0):(y===o||y===i)&&(p=n,O=!0);var S=p===a,R=S?C:M,B=S?P:A,z=Yu(B),G=!1;!(O&&(T||x))&&(y===l&&B<0||y===u&&B>0||y===o&&B>0||y===i&&B<0)&&(z*=-1,R=z*Math.abs(R),G=!0);var k;if(T){var H=w<0?1+w:w;k=H*R}else{var $=w<0?R:0;k=$+w*z}var V=function(J){return Math.abs(J)<D||Math.abs(J)>=Math.abs(R)},X=V(k),U=V(Math.abs(R)-Math.abs(k)),F=X||U;if(F&&!G)if(S){var Y=Math.abs(B)<=h/2,q=Math.abs(A)<=c/2;if(Y){var K=(f.x1+f.x2)/2,j=f.y1,ge=f.y2;r.segpts=[K,j,K,ge]}else if(q){var Ce=(f.y1+f.y2)/2,Q=f.x1,le=f.x2;r.segpts=[Q,Ce,le,Ce]}else r.segpts=[f.x1,f.y2]}else{var de=Math.abs(B)<=v/2,ie=Math.abs(P)<=g/2;if(de){var _=(f.y1+f.y2)/2,ue=f.x1,Ee=f.x2;r.segpts=[ue,_,Ee,_]}else if(ie){var me=(f.x1+f.x2)/2,pe=f.y1,re=f.y2;r.segpts=[me,pe,me,re]}else r.segpts=[f.x2,f.y1]}else if(S){var I=f.y1+k+(m?h/2*z:0),Z=f.x1,oe=f.x2;r.segpts=[Z,I,oe,I]}else{var ee=f.x1+k+(m?v/2*z:0),te=f.y1,Le=f.y2;r.segpts=[ee,te,ee,Le]}};Tt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var a=e.srcPos,n=e.tgtPos,o=e.srcW,i=e.srcH,l=e.tgtW,u=e.tgtH,s=e.srcShape,f=e.tgtShape,v=!ye(r.startX)||!ye(r.startY),h=!ye(r.arrowStartX)||!ye(r.arrowStartY),c=!ye(r.endX)||!ye(r.endY),g=!ye(r.arrowEndX)||!ye(r.arrowEndY),d=3,m=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,p=d*m,y=wr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),E=y<p,T=wr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),w=T<p,x=!1;if(v||h||E){x=!0;var D={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},L=Math.sqrt(D.x*D.x+D.y*D.y),N={x:D.x/L,y:D.y/L},A=Math.max(o,i),P={x:r.ctrlpts[0]+N.x*2*A,y:r.ctrlpts[1]+N.y*2*A},b=s.intersectLine(a.x,a.y,o,i,P.x,P.y,0);E?(r.ctrlpts[0]=r.ctrlpts[0]+N.x*(p-y),r.ctrlpts[1]=r.ctrlpts[1]+N.y*(p-y)):(r.ctrlpts[0]=b[0]+N.x*p,r.ctrlpts[1]=b[1]+N.y*p)}if(c||g||w){x=!0;var M={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},C=Math.sqrt(M.x*M.x+M.y*M.y),O={x:M.x/C,y:M.y/C},S=Math.max(o,i),R={x:r.ctrlpts[0]+O.x*2*S,y:r.ctrlpts[1]+O.y*2*S},B=f.intersectLine(n.x,n.y,l,u,R.x,R.y,0);w?(r.ctrlpts[0]=r.ctrlpts[0]+O.x*(p-T),r.ctrlpts[1]=r.ctrlpts[1]+O.y*(p-T)):(r.ctrlpts[0]=B[0]+O.x*p,r.ctrlpts[1]=B[1]+O.y*p)}x&&this.findEndpoints(t)}};Tt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var a,n;e.ctrlpts.length/2%2===0?(a=e.allpts.length/2-1,e.midX=e.allpts[a],e.midY=e.allpts[a+1]):(a=e.allpts.length/2-3,n=.5,e.midX=vt(e.allpts[a],e.allpts[a+2],e.allpts[a+4],n),e.midY=vt(e.allpts[a+1],e.allpts[a+3],e.allpts[a+5],n))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var o=e.segpts.length/2,i=o-2;e.midX=(e.segpts[i]+e.segpts[o])/2,e.midY=(e.segpts[i+1]+e.segpts[o+1])/2}else{var l=e.segpts.length/2-1;e.midX=e.segpts[l],e.midY=e.segpts[l+1]}};Tt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ye(e.startX)&&ye(e.startY)&&ye(e.endX)&&ye(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,We("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Tt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,a=r.cy,n=a.hasCompoundNodes(),o={map:new zt,get:function(D){var L=this.map.get(D[0]);return L!=null?L.get(D[1]):null},set:function(D,L){var N=this.map.get(D[0]);N==null&&(N=new zt,this.map.set(D[0],N)),N.set(D[1],L)}},i=[],l=[],u=0;u<t.length;u++){var s=t[u],f=s._private,v=s.pstyle("curve-style").value;if(!(s.removed()||!s.takesUpSpace())){if(v==="haystack"){l.push(s);continue}var h=v==="unbundled-bezier"||v==="segments"||v==="straight"||v==="straight-triangle"||v==="taxi",c=v==="unbundled-bezier"||v==="bezier",g=f.source,d=f.target,m=g.poolIndex(),p=d.poolIndex(),y=[m,p].sort(),E=o.get(y);E==null&&(E={eles:[]},o.set(y,E),i.push(y)),E.eles.push(s),h&&(E.hasUnbundled=!0),c&&(E.hasBezier=!0)}}for(var T=function(D){var L=i[D],N=o.get(L),A=void 0;if(!N.hasUnbundled){var P=N.eles[0].parallelEdges().filter(function(re){return re.isBundledBezier()});Ni(N.eles),P.forEach(function(re){return N.eles.push(re)}),N.eles.sort(function(re,I){return re.poolIndex()-I.poolIndex()})}var b=N.eles[0],M=b.source(),C=b.target();if(M.poolIndex()>C.poolIndex()){var O=M;M=C,C=O}var S=N.srcPos=M.position(),R=N.tgtPos=C.position(),B=N.srcW=M.outerWidth(),z=N.srcH=M.outerHeight(),G=N.tgtW=C.outerWidth(),k=N.tgtH=C.outerHeight(),H=N.srcShape=r.nodeShapes[e.getNodeShape(M)],$=N.tgtShape=r.nodeShapes[e.getNodeShape(C)];N.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var V=0;V<N.eles.length;V++){var X=N.eles[V],U=X[0]._private.rscratch,F=X.pstyle("curve-style").value,Y=F==="unbundled-bezier"||F==="segments"||F==="taxi",q=!M.same(X.source());if(!N.calculatedIntersection&&M!==C&&(N.hasBezier||N.hasUnbundled)){N.calculatedIntersection=!0;var K=H.intersectLine(S.x,S.y,B,z,R.x,R.y,0),j=N.srcIntn=K,ge=$.intersectLine(R.x,R.y,G,k,S.x,S.y,0),Ce=N.tgtIntn=ge,Q=N.intersectionPts={x1:K[0],x2:ge[0],y1:K[1],y2:ge[1]},le=N.posPts={x1:S.x,x2:R.x,y1:S.y,y2:R.y},de=ge[1]-K[1],ie=ge[0]-K[0],_=Math.sqrt(ie*ie+de*de),ue=N.vector={x:ie,y:de},Ee=N.vectorNorm={x:ue.x/_,y:ue.y/_},me={x:-Ee.y,y:Ee.x};N.nodesOverlap=!ye(_)||$.checkPoint(K[0],K[1],0,G,k,R.x,R.y)||H.checkPoint(ge[0],ge[1],0,B,z,S.x,S.y),N.vectorNormInverse=me,A={nodesOverlap:N.nodesOverlap,dirCounts:N.dirCounts,calculatedIntersection:!0,hasBezier:N.hasBezier,hasUnbundled:N.hasUnbundled,eles:N.eles,srcPos:R,tgtPos:S,srcW:G,srcH:k,tgtW:B,tgtH:z,srcIntn:Ce,tgtIntn:j,srcShape:$,tgtShape:H,posPts:{x1:le.x2,y1:le.y2,x2:le.x1,y2:le.y1},intersectionPts:{x1:Q.x2,y1:Q.y2,x2:Q.x1,y2:Q.y1},vector:{x:-ue.x,y:-ue.y},vectorNorm:{x:-Ee.x,y:-Ee.y},vectorNormInverse:{x:-me.x,y:-me.y}}}var pe=q?A:N;U.nodesOverlap=pe.nodesOverlap,U.srcIntn=pe.srcIntn,U.tgtIntn=pe.tgtIntn,n&&(M.isParent()||M.isChild()||C.isParent()||C.isChild())&&(M.parents().anySame(C)||C.parents().anySame(M)||M.same(C)&&M.isParent())?e.findCompoundLoopPoints(X,pe,V,Y):M===C?e.findLoopPoints(X,pe,V,Y):F==="segments"?e.findSegmentsPoints(X,pe):F==="taxi"?e.findTaxiPoints(X,pe):F==="straight"||!Y&&N.eles.length%2===1&&V===Math.floor(N.eles.length/2)?e.findStraightEdgePoints(X):e.findBezierPoints(X,pe,V,Y,q),e.findEndpoints(X),e.tryToCorrectInvalidPoints(X,pe),e.checkForInvalidEdgeWarning(X),e.storeAllpts(X),e.storeEdgeProjections(X),e.calculateArrowAngles(X),e.recalculateEdgeLabelProjections(X),e.calculateLabelAngles(X)}},w=0;w<i.length;w++)T(w);this.findHaystackPoints(l)}};function Rf(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var a=t[r],n=t[r+1];e.push({x:a,y:n})}return e}}Tt.getSegmentPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="segments")return this.recalculateRenderedStyle(t),Rf(e.segpts)};Tt.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return this.recalculateRenderedStyle(t),Rf(e.ctrlpts)};Tt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Ya={};Ya.manualEndptToPx=function(t,e){var r=this,a=t.position(),n=t.outerWidth(),o=t.outerHeight();if(e.value.length===2){var i=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(i[0]=i[0]*n),e.units[1]==="%"&&(i[1]=i[1]*o),i[0]+=a.x,i[1]+=a.y,i}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(n,o),s=[a.x+Math.cos(l)*u,a.y+Math.sin(l)*u];return r.nodeShapes[this.getNodeShape(t)].intersectLine(a.x,a.y,n,o,s[0],s[1],0)}};Ya.findEndpoints=function(t){var e=this,r,a=t.source()[0],n=t.target()[0],o=a.position(),i=n.position(),l=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,s=t.pstyle("target-distance-from-node").pfValue,f=t.pstyle("source-distance-from-node").pfValue,v=t.pstyle("curve-style").value,h=t._private.rscratch,c=h.edgeType,g=v==="taxi",d=c==="self"||c==="compound",m=c==="bezier"||c==="multibezier"||d,p=c!=="bezier",y=c==="straight"||c==="segments",E=c==="segments",T=m||p||y,w=d||g,x=t.pstyle("source-endpoint"),D=w?"outside-to-node":x.value,L=t.pstyle("target-endpoint"),N=w?"outside-to-node":L.value;h.srcManEndpt=x,h.tgtManEndpt=L;var A,P,b,M;if(m){var C=[h.ctrlpts[0],h.ctrlpts[1]],O=p?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:C;A=O,P=C}else if(y){var S=E?h.segpts.slice(0,2):[i.x,i.y],R=E?h.segpts.slice(h.segpts.length-2):[o.x,o.y];A=R,P=S}if(N==="inside-to-node")r=[i.x,i.y];else if(L.units)r=this.manualEndptToPx(n,L);else if(N==="outside-to-line")r=h.tgtIntn;else if(N==="outside-to-node"||N==="outside-to-node-or-label"?b=A:(N==="outside-to-line"||N==="outside-to-line-or-label")&&(b=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),b[0],b[1],0),N==="outside-to-node-or-label"||N==="outside-to-line-or-label"){var B=n._private.rscratch,z=B.labelWidth,G=B.labelHeight,k=B.labelX,H=B.labelY,$=z/2,V=G/2,X=n.pstyle("text-valign").value;X==="top"?H-=V:X==="bottom"&&(H+=V);var U=n.pstyle("text-halign").value;U==="left"?k-=$:U==="right"&&(k+=$);var F=Oa(b[0],b[1],[k-$,H-V,k+$,H-V,k+$,H+V,k-$,H+V],i.x,i.y);if(F.length>0){var Y=o,q=yr(Y,Yr(r)),K=yr(Y,Yr(F)),j=q;if(K<q&&(r=F,j=K),F.length>2){var ge=yr(Y,{x:F[2],y:F[3]});ge<j&&(r=[F[2],F[3]])}}}var Ce=en(r,A,e.arrowShapes[l].spacing(t)+s),Q=en(r,A,e.arrowShapes[l].gap(t)+s);if(h.endX=Q[0],h.endY=Q[1],h.arrowEndX=Ce[0],h.arrowEndY=Ce[1],D==="inside-to-node")r=[o.x,o.y];else if(x.units)r=this.manualEndptToPx(a,x);else if(D==="outside-to-line")r=h.srcIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?M=P:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(M=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),M[0],M[1],0),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var le=a._private.rscratch,de=le.labelWidth,ie=le.labelHeight,_=le.labelX,ue=le.labelY,Ee=de/2,me=ie/2,pe=a.pstyle("text-valign").value;pe==="top"?ue-=me:pe==="bottom"&&(ue+=me);var re=a.pstyle("text-halign").value;re==="left"?_-=Ee:re==="right"&&(_+=Ee);var I=Oa(M[0],M[1],[_-Ee,ue-me,_+Ee,ue-me,_+Ee,ue+me,_-Ee,ue+me],o.x,o.y);if(I.length>0){var Z=i,oe=yr(Z,Yr(r)),ee=yr(Z,Yr(I)),te=oe;if(ee<oe&&(r=[I[0],I[1]],te=ee),I.length>2){var Le=yr(Z,{x:I[2],y:I[3]});Le<te&&(r=[I[2],I[3]])}}}var W=en(r,P,e.arrowShapes[u].spacing(t)+f),J=en(r,P,e.arrowShapes[u].gap(t)+f);h.startX=J[0],h.startY=J[1],h.arrowStartX=W[0],h.arrowStartY=W[1],T&&(!ye(h.startX)||!ye(h.startY)||!ye(h.endX)||!ye(h.endY)?h.badLine=!0:h.badLine=!1)};Ya.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Ya.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Vi={};function Um(t,e,r){for(var a=function(s,f,v,h){return vt(s,f,v,h)},n=e._private,o=n.rstyle.bezierPts,i=0;i<t.bezierProjPcts.length;i++){var l=t.bezierProjPcts[i];o.push({x:a(r[0],r[2],r[4],l),y:a(r[1],r[3],r[5],l)})}}Vi.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,a=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,a==="multibezier"||a==="bezier"||a==="self"||a==="compound"){e.rstyle.bezierPts=[];for(var n=0;n+5<r.allpts.length;n+=4)Um(this,t,r.allpts.slice(n,n+6))}else if(a==="segments")for(var o=e.rstyle.linePts=[],n=0;n+1<r.allpts.length;n+=2)o.push({x:r.allpts[n],y:r.allpts[n+1]});else if(a==="haystack"){var i=r.haystackPts;e.rstyle.haystackPts=[{x:i[0],y:i[1]},{x:i[2],y:i[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};Vi.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Vt={};Vt.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!lr(e)){var r,a,n=t._private,o=t.width(),i=t.height(),l=t.padding(),u=t.position(),s=t.pstyle("text-halign").strValue,f=t.pstyle("text-valign").strValue,v=n.rscratch,h=n.rstyle;switch(s){case"left":r=u.x-o/2-l;break;case"right":r=u.x+o/2+l;break;default:r=u.x}switch(f){case"top":a=u.y-i/2-l;break;case"bottom":a=u.y+i/2+l;break;default:a=u.y}v.labelX=r,v.labelY=a,h.labelX=r,h.labelY=a,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var Pf=function(e,r){var a=Math.atan(r/e);return e===0&&a<0&&(a=a*-1),a},If=function(e,r){var a=r.x-e.x,n=r.y-e.y;return Pf(a,n)},Ym=function(e,r,a,n){var o=Aa(0,n-.001,1),i=Aa(0,n+.001,1),l=Wr(e,r,a,o),u=Wr(e,r,a,i);return If(l,u)};Vt.recalculateEdgeLabelProjections=function(t){var e,r=t._private,a=r.rscratch,n=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:a.midX,y:a.midY};var i=function(v,h,c){nr(r.rscratch,v,h,c),nr(r.rstyle,v,h,c)};i("labelX",null,e.x),i("labelY",null,e.y);var l=Pf(a.midDispX,a.midDispY);i("labelAutoAngle",null,l);var u=function f(){if(f.cache)return f.cache;for(var v=[],h=0;h+5<a.allpts.length;h+=4){var c={x:a.allpts[h],y:a.allpts[h+1]},g={x:a.allpts[h+2],y:a.allpts[h+3]},d={x:a.allpts[h+4],y:a.allpts[h+5]};v.push({p0:c,p1:g,p2:d,startDist:0,length:0,segments:[]})}var m=r.rstyle.bezierPts,p=n.bezierProjPcts.length;function y(D,L,N,A,P){var b=wr(L,N),M=D.segments[D.segments.length-1],C={p0:L,p1:N,t0:A,t1:P,startDist:M?M.startDist+M.length:0,length:b};D.segments.push(C),D.length+=b}for(var E=0;E<v.length;E++){var T=v[E],w=v[E-1];w&&(T.startDist=w.startDist+w.length),y(T,T.p0,m[E*p],0,n.bezierProjPcts[0]);for(var x=0;x<p-1;x++)y(T,m[E*p+x],m[E*p+x+1],n.bezierProjPcts[x],n.bezierProjPcts[x+1]);y(T,m[E*p+p-1],T.p2,n.bezierProjPcts[p-1],1)}return f.cache=v},s=function(v){var h,c=v==="source";if(o[v]){var g=t.pstyle(v+"-text-offset").pfValue;switch(a.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var d=u(),m,p=0,y=0,E=0;E<d.length;E++){for(var T=d[c?E:d.length-1-E],w=0;w<T.segments.length;w++){var x=T.segments[c?w:T.segments.length-1-w],D=E===d.length-1&&w===T.segments.length-1;if(p=y,y+=x.length,y>=g||D){m={cp:T,segment:x};break}}if(m)break}var L=m.cp,N=m.segment,A=(g-p)/N.length,P=N.t1-N.t0,b=c?N.t0+P*A:N.t1-P*A;b=Aa(0,b,1),e=Wr(L.p0,L.p1,L.p2,b),h=Ym(L.p0,L.p1,L.p2,b);break}case"straight":case"segments":case"haystack":{for(var M=0,C,O,S,R,B=a.allpts.length,z=0;z+3<B&&(c?(S={x:a.allpts[z],y:a.allpts[z+1]},R={x:a.allpts[z+2],y:a.allpts[z+3]}):(S={x:a.allpts[B-2-z],y:a.allpts[B-1-z]},R={x:a.allpts[B-4-z],y:a.allpts[B-3-z]}),C=wr(S,R),O=M,M+=C,!(M>=g));z+=2);var G=g-O,k=G/C;k=Aa(0,k,1),e=ip(S,R,k),h=If(S,R);break}}i("labelX",v,e.x),i("labelY",v,e.y),i("labelAutoAngle",v,h)}};s("source"),s("target"),this.applyLabelDimensions(t)}};Vt.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Vt.applyPrefixedLabelDimensions=function(t,e){var r=t._private,a=this.getLabelText(t,e),n=this.calculateLabelDimensions(t,a),o=t.pstyle("line-height").pfValue,i=t.pstyle("text-wrap").strValue,l=Ft(r.rscratch,"labelWrapCachedLines",e)||[],u=i!=="wrap"?1:Math.max(l.length,1),s=n.height/u,f=s*o,v=n.width,h=n.height+(u-1)*(o-1)*s;nr(r.rstyle,"labelWidth",e,v),nr(r.rscratch,"labelWidth",e,v),nr(r.rstyle,"labelHeight",e,h),nr(r.rscratch,"labelHeight",e,h),nr(r.rscratch,"labelLineHeight",e,f)};Vt.getLabelText=function(t,e){var r=t._private,a=e?e+"-":"",n=t.pstyle(a+"label").strValue,o=t.pstyle("text-transform").value,i=function(G,k){return k?(nr(r.rscratch,G,e,k),k):Ft(r.rscratch,G,e)};if(!n)return"";o=="none"||(o=="uppercase"?n=n.toUpperCase():o=="lowercase"&&(n=n.toLowerCase()));var l=t.pstyle("text-wrap").value;if(l==="wrap"){var u=i("labelKey");if(u!=null&&i("labelWrapKey")===u)return i("labelWrapCachedText");for(var s="\u200B",f=n.split(`
`),v=t.pstyle("text-max-width").pfValue,h=t.pstyle("text-overflow-wrap").value,c=h==="anywhere",g=[],d=/[\s\u200b]+/,m=c?"":" ",p=0;p<f.length;p++){var y=f[p],E=this.calculateLabelDimensions(t,y),T=E.width;if(c){var w=y.split("").join(s);y=w}if(T>v){for(var x=y.split(d),D="",L=0;L<x.length;L++){var N=x[L],A=D.length===0?N:D+m+N,P=this.calculateLabelDimensions(t,A),b=P.width;b<=v?D+=N+m:(D&&g.push(D),D=N+m)}D.match(/^[\s\u200b]+$/)||g.push(D)}else g.push(y)}i("labelWrapCachedLines",g),n=i("labelWrapCachedText",g.join(`
`)),i("labelWrapKey",u)}else if(l==="ellipsis"){var M=t.pstyle("text-max-width").pfValue,C="",O="\u2026",S=!1;if(this.calculateLabelDimensions(t,n).width<M)return n;for(var R=0;R<n.length;R++){var B=this.calculateLabelDimensions(t,C+n[R]+O).width;if(B>M)break;C+=n[R],R===n.length-1&&(S=!0)}return S||(C+=O),C}return n};Vt.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Vt.calculateLabelDimensions=function(t,e){var r=this,a=br(e,t._private.labelDimsKey),n=r.labelDimCache||(r.labelDimCache=[]),o=n[a];if(o!=null)return o;var i=0,l=t.pstyle("font-style").strValue,u=t.pstyle("font-size").pfValue,s=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,v=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!v){v=this.labelCalcCanvas=document.createElement("canvas"),h=this.labelCalcCanvasContext=v.getContext("2d");var c=v.style;c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none"}h.font="".concat(l," ").concat(f," ").concat(u,"px ").concat(s);for(var g=0,d=0,m=e.split(`
`),p=0;p<m.length;p++){var y=m[p],E=h.measureText(y),T=Math.ceil(E.width),w=u;g=Math.max(T,g),d+=w}return g+=i,d+=i,n[a]={width:g,height:d}};Vt.calculateLabelAngle=function(t,e){var r=t._private,a=r.rscratch,n=t.isEdge(),o=e?e+"-":"",i=t.pstyle(o+"text-rotation"),l=i.strValue;return l==="none"?0:n&&l==="autorotate"?a.labelAutoAngle:l==="autorotate"?0:i.pfValue};Vt.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),a=t._private,n=a.rscratch;n.labelAngle=e.calculateLabelAngle(t),r&&(n.sourceLabelAngle=e.calculateLabelAngle(t,"source"),n.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Ff={},gu=28,pu=!1;Ff.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<gu||t.height()<gu))return pu||(We("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),pu=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var a=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(a).name}return r};var zn={};zn.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,a=function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(i),l)for(var u=0;u<i.length;u++){var s=i[u],f=s._private,v=f.rstyle;v.clean=!1,v.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(i){var l=i.target;a(l)}).on("style.* background.*",function(i){var l=i.target;a(l,!1)});var n=function(i){if(i){var l=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var s=e[u],f=s._private.rstyle;s.isNode()&&!f.cleanConnected&&(a(s.connectedEdges()),f.cleanConnected=!0)}if(l)for(var v=0;v<l.length;v++){var h=l[v];h(i,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){n(!0)},r.beforeRender(n,r.beforeRenderPriorities.eleCalcs)};zn.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};zn.recalculateRenderedStyle=function(t,e){var r=function(T){return T._private.rstyle.cleanConnected},a=[],n=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<t.length;o++){var i=t[o],l=i._private,u=l.rstyle;i.isEdge()&&(!r(i.source())||!r(i.target()))&&(u.clean=!1),!(e&&u.clean||i.removed())&&i.pstyle("display").value!=="none"&&(l.group==="nodes"?n.push(i):a.push(i),u.clean=!0)}for(var s=0;s<n.length;s++){var f=n[s],v=f._private,h=v.rstyle,c=f.position();this.recalculateNodeLabelProjection(f),h.nodeX=c.x,h.nodeY=c.y,h.nodeW=f.pstyle("width").pfValue,h.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(a);for(var g=0;g<a.length;g++){var d=a[g],m=d._private,p=m.rstyle,y=m.rscratch;p.srcX=y.arrowStartX,p.srcY=y.arrowStartY,p.tgtX=y.arrowEndX,p.tgtY=y.arrowEndY,p.midX=y.midX,p.midY=y.midY,p.labelAngle=y.labelAngle,p.sourceLabelAngle=y.sourceLabelAngle,p.targetLabelAngle=y.targetLabelAngle}}};var Gn={};Gn.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var a=t[r],n=a._private.rscratch;a.grabbed()&&!a.isParent()?e.push(a):n.inDragLayer?t.drag.push(a):t.nondrag.push(a)}for(var r=0;r<e.length;r++){var a=e[r];t.drag.push(a)}}};Gn.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Gn.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(wf),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Bf={};[Sr,Tn,Tt,Ya,Vi,Vt,Ff,zn,Gn].forEach(function(t){Ie(Bf,t)});var kf={};kf.getCachedImage=function(t,e,r){var a=this,n=a.imageCache=a.imageCache||{},o=n[t];if(o)return o.image.complete||o.image.addEventListener("load",r),o.image;o=n[t]=n[t]||{};var i=o.image=new Image;i.addEventListener("load",r),i.addEventListener("error",function(){i.error=!0});var l="data:",u=t.substring(0,l.length).toLowerCase()===l;return u||(i.crossOrigin=e),i.src=t,i};var ra={};ra.registerBinding=function(t,e,r,a){var n=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,n)};ra.binder=function(t){var e=this,r=t===window||t===document||t===document.body||fg(t);if(e.supportsPassiveEvents==null){var a=!1;try{var n=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});window.addEventListener("test",null,n)}catch{}e.supportsPassiveEvents=a}var o=function(l,u,s){var f=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(f[2]={capture:s??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};ra.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};ra.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};ra.load=function(){var t=this,e=function(I){return I.selected()},r=function(I,Z,oe,ee){I==null&&(I=t.cy);for(var te=0;te<Z.length;te++){var Le=Z[te];I.emit({originalEvent:oe,type:Le,position:ee})}},a=function(I){return I.shiftKey||I.metaKey||I.ctrlKey},n=function(I,Z){var oe=!0;if(t.cy.hasCompoundNodes()&&I&&I.pannable())for(var ee=0;Z&&ee<Z.length;ee++){var I=Z[ee];if(I.isNode()&&I.isParent()&&!I.pannable()){oe=!1;break}}else oe=!0;return oe},o=function(I){I[0]._private.grabbed=!0},i=function(I){I[0]._private.grabbed=!1},l=function(I){I[0]._private.rscratch.inDragLayer=!0},u=function(I){I[0]._private.rscratch.inDragLayer=!1},s=function(I){I[0]._private.rscratch.isGrabTarget=!0},f=function(I){I[0]._private.rscratch.isGrabTarget=!1},v=function(I,Z){var oe=Z.addToList,ee=oe.has(I);!ee&&I.grabbable()&&!I.locked()&&(oe.merge(I),o(I))},h=function(I,Z){if(I.cy().hasCompoundNodes()&&!(Z.inDragLayer==null&&Z.addToList==null)){var oe=I.descendants();Z.inDragLayer&&(oe.forEach(l),oe.connectedEdges().forEach(l)),Z.addToList&&v(oe,Z)}},c=function(I,Z){Z=Z||{};var oe=I.cy().hasCompoundNodes();Z.inDragLayer&&(I.forEach(l),I.neighborhood().stdFilter(function(ee){return!oe||ee.isEdge()}).forEach(l)),Z.addToList&&I.forEach(function(ee){v(ee,Z)}),h(I,Z),m(I,{inDragLayer:Z.inDragLayer}),t.updateCachedGrabbedEles()},g=c,d=function(I){I&&(t.getCachedZSortedEles().forEach(function(Z){i(Z),u(Z),f(Z)}),t.updateCachedGrabbedEles())},m=function(I,Z){if(!(Z.inDragLayer==null&&Z.addToList==null)&&I.cy().hasCompoundNodes()){var oe=I.ancestors().orphans();if(!oe.same(I)){var ee=oe.descendants().spawnSelf().merge(oe).unmerge(I).unmerge(I.descendants()),te=ee.connectedEdges();Z.inDragLayer&&(te.forEach(l),ee.forEach(l)),Z.addToList&&ee.forEach(function(Le){v(Le,Z)})}}},p=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},y=typeof MutationObserver<"u",E=typeof ResizeObserver<"u";y?(t.removeObserver=new MutationObserver(function(re){for(var I=0;I<re.length;I++){var Z=re[I],oe=Z.removedNodes;if(oe)for(var ee=0;ee<oe.length;ee++){var te=oe[ee];if(te===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(re){t.destroy()});var T=Sn.default(function(){t.cy.resize()},100);y&&(t.styleObserver=new MutationObserver(T),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",T),E&&(t.resizeObserver=new ResizeObserver(T),t.resizeObserver.observe(t.container));var w=function(I,Z){for(;I!=null;)Z(I),I=I.parentNode},x=function(){t.invalidateContainerClientCoordsCache()};w(t.container,function(re){t.registerBinding(re,"transitionend",x),t.registerBinding(re,"animationend",x),t.registerBinding(re,"scroll",x)}),t.registerBinding(t.container,"contextmenu",function(re){re.preventDefault()});var D=function(){return t.selection[4]!==0},L=function(I){for(var Z=t.findContainerClientCoords(),oe=Z[0],ee=Z[1],te=Z[2],Le=Z[3],W=I.touches?I.touches:[I],J=!1,ne=0;ne<W.length;ne++){var se=W[ne];if(oe<=se.clientX&&se.clientX<=oe+te&&ee<=se.clientY&&se.clientY<=ee+Le){J=!0;break}}if(!J)return!1;for(var ae=t.container,fe=I.target,ce=fe.parentNode,he=!1;ce;){if(ce===ae){he=!0;break}ce=ce.parentNode}return!!he};t.registerBinding(t.container,"mousedown",function(I){if(L(I)){I.preventDefault(),p(),t.hoverData.capture=!0,t.hoverData.which=I.which;var Z=t.cy,oe=[I.clientX,I.clientY],ee=t.projectIntoViewport(oe[0],oe[1]),te=t.selection,Le=t.findNearestElements(ee[0],ee[1],!0,!1),W=Le[0],J=t.dragData.possibleDragElements;t.hoverData.mdownPos=ee,t.hoverData.mdownGPos=oe;var ne=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var ve=t.hoverData.down;ve?ve.emit({originalEvent:I,type:"taphold",position:{x:ee[0],y:ee[1]}}):Z.emit({originalEvent:I,type:"taphold",position:{x:ee[0],y:ee[1]}})}},t.tapholdDuration)};if(I.which==3){t.hoverData.cxtStarted=!0;var se={originalEvent:I,type:"cxttapstart",position:{x:ee[0],y:ee[1]}};W?(W.activate(),W.emit(se),t.hoverData.down=W):Z.emit(se),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(I.which==1){W&&W.activate();{if(W!=null&&t.nodeIsGrabbable(W)){var ae=function(ve){return{originalEvent:I,type:ve,position:{x:ee[0],y:ee[1]}}},fe=function(ve){ve.emit(ae("grab"))};if(s(W),!W.selected())J=t.dragData.possibleDragElements=Z.collection(),g(W,{addToList:J}),W.emit(ae("grabon")).emit(ae("grab"));else{J=t.dragData.possibleDragElements=Z.collection();var ce=Z.$(function(he){return he.isNode()&&he.selected()&&t.nodeIsGrabbable(he)});c(ce,{addToList:J}),W.emit(ae("grabon")),ce.forEach(fe)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=W,t.hoverData.downs=Le,t.hoverData.downTime=new Date().getTime()}r(W,["mousedown","tapstart","vmousedown"],I,{x:ee[0],y:ee[1]}),W==null?(te[4]=1,t.data.bgActivePosistion={x:ee[0],y:ee[1]},t.redrawHint("select",!0),t.redraw()):W.pannable()&&(te[4]=1),ne()}te[0]=te[2]=ee[0],te[1]=te[3]=ee[1]}},!1),t.registerBinding(window,"mousemove",function(I){var Z=t.hoverData.capture;if(!(!Z&&!L(I))){var oe=!1,ee=t.cy,te=ee.zoom(),Le=[I.clientX,I.clientY],W=t.projectIntoViewport(Le[0],Le[1]),J=t.hoverData.mdownPos,ne=t.hoverData.mdownGPos,se=t.selection,ae=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(ae=t.findNearestElement(W[0],W[1],!0,!1));var fe=t.hoverData.last,ce=t.hoverData.down,he=[W[0]-se[2],W[1]-se[3]],ve=t.dragData.possibleDragElements,Te;if(ne){var Oe=Le[0]-ne[0],be=Oe*Oe,Ne=Le[1]-ne[1],ke=Ne*Ne,De=be+ke;t.hoverData.isOverThresholdDrag=Te=De>=t.desktopTapThreshold2}var we=a(I);Te&&(t.hoverData.tapholdCancelled=!0);var Pe=function(){var Qe=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Qe.length===0?(Qe.push(he[0]),Qe.push(he[1])):(Qe[0]+=he[0],Qe[1]+=he[1])};oe=!0,r(ae,["mousemove","vmousemove","tapdrag"],I,{x:W[0],y:W[1]});var Me=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||ee.emit({originalEvent:I,type:"boxstart",position:{x:W[0],y:W[1]}}),se[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(Te){var Ae={originalEvent:I,type:"cxtdrag",position:{x:W[0],y:W[1]}};ce?ce.emit(Ae):ee.emit(Ae),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||ae!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:I,type:"cxtdragout",position:{x:W[0],y:W[1]}}),t.hoverData.cxtOver=ae,ae&&ae.emit({originalEvent:I,type:"cxtdragover",position:{x:W[0],y:W[1]}}))}}else if(t.hoverData.dragging){if(oe=!0,ee.panningEnabled()&&ee.userPanningEnabled()){var $e;if(t.hoverData.justStartedPan){var Ye=t.hoverData.mdownPos;$e={x:(W[0]-Ye[0])*te,y:(W[1]-Ye[1])*te},t.hoverData.justStartedPan=!1}else $e={x:he[0]*te,y:he[1]*te};ee.panBy($e),ee.emit("dragpan"),t.hoverData.dragged=!0}W=t.projectIntoViewport(I.clientX,I.clientY)}else if(se[4]==1&&(ce==null||ce.pannable())){if(Te){if(!t.hoverData.dragging&&ee.boxSelectionEnabled()&&(we||!ee.panningEnabled()||!ee.userPanningEnabled()))Me();else if(!t.hoverData.selecting&&ee.panningEnabled()&&ee.userPanningEnabled()){var ot=n(ce,t.hoverData.downs);ot&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,se[4]=0,t.data.bgActivePosistion=Yr(J),t.redrawHint("select",!0),t.redraw())}ce&&ce.pannable()&&ce.active()&&ce.unactivate()}}else{if(ce&&ce.pannable()&&ce.active()&&ce.unactivate(),(!ce||!ce.grabbed())&&ae!=fe&&(fe&&r(fe,["mouseout","tapdragout"],I,{x:W[0],y:W[1]}),ae&&r(ae,["mouseover","tapdragover"],I,{x:W[0],y:W[1]}),t.hoverData.last=ae),ce)if(Te){if(ee.boxSelectionEnabled()&&we)ce&&ce.grabbed()&&(d(ve),ce.emit("freeon"),ve.emit("free"),t.dragData.didDrag&&(ce.emit("dragfreeon"),ve.emit("dragfree"))),Me();else if(ce&&ce.grabbed()&&t.nodeIsDraggable(ce)){var Be=!t.dragData.didDrag;Be&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||c(ve,{inDragLayer:!0});var Fe={x:0,y:0};if(ye(he[0])&&ye(he[1])&&(Fe.x+=he[0],Fe.y+=he[1],Be)){var _e=t.hoverData.dragDelta;_e&&ye(_e[0])&&ye(_e[1])&&(Fe.x+=_e[0],Fe.y+=_e[1])}t.hoverData.draggingEles=!0,ve.silentShift(Fe).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Pe();oe=!0}if(se[2]=W[0],se[3]=W[1],oe)return I.stopPropagation&&I.stopPropagation(),I.preventDefault&&I.preventDefault(),!1}},!1);var N,A,P;t.registerBinding(window,"mouseup",function(I){var Z=t.hoverData.capture;if(Z){t.hoverData.capture=!1;var oe=t.cy,ee=t.projectIntoViewport(I.clientX,I.clientY),te=t.selection,Le=t.findNearestElement(ee[0],ee[1],!0,!1),W=t.dragData.possibleDragElements,J=t.hoverData.down,ne=a(I);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,J&&J.unactivate(),t.hoverData.which===3){var se={originalEvent:I,type:"cxttapend",position:{x:ee[0],y:ee[1]}};if(J?J.emit(se):oe.emit(se),!t.hoverData.cxtDragged){var ae={originalEvent:I,type:"cxttap",position:{x:ee[0],y:ee[1]}};J?J.emit(ae):oe.emit(ae)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(r(Le,["mouseup","tapend","vmouseup"],I,{x:ee[0],y:ee[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(r(J,["click","tap","vclick"],I,{x:ee[0],y:ee[1]}),A=!1,I.timeStamp-P<=oe.multiClickDebounceTime()?(N&&clearTimeout(N),A=!0,P=null,r(J,["dblclick","dbltap","vdblclick"],I,{x:ee[0],y:ee[1]})):(N=setTimeout(function(){A||r(J,["oneclick","onetap","voneclick"],I,{x:ee[0],y:ee[1]})},oe.multiClickDebounceTime()),P=I.timeStamp)),J==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!a(I)&&(oe.$(e).unselect(["tapunselect"]),W.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=W=oe.collection()),Le==J&&!t.dragData.didDrag&&!t.hoverData.selecting&&Le!=null&&Le._private.selectable&&(t.hoverData.dragging||(oe.selectionType()==="additive"||ne?Le.selected()?Le.unselect(["tapunselect"]):Le.select(["tapselect"]):ne||(oe.$(e).unmerge(Le).unselect(["tapunselect"]),Le.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var fe=oe.collection(t.getAllInBox(te[0],te[1],te[2],te[3]));t.redrawHint("select",!0),fe.length>0&&t.redrawHint("eles",!0),oe.emit({type:"boxend",originalEvent:I,position:{x:ee[0],y:ee[1]}});var ce=function(Te){return Te.selectable()&&!Te.selected()};oe.selectionType()==="additive"||ne||oe.$(e).unmerge(fe).unselect(),fe.emit("box").stdFilter(ce).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!te[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var he=J&&J.grabbed();d(W),he&&(J.emit("freeon"),W.emit("free"),t.dragData.didDrag&&(J.emit("dragfreeon"),W.emit("dragfree")))}}te[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var b=function(I){if(!t.scrollingPage){var Z=t.cy,oe=Z.zoom(),ee=Z.pan(),te=t.projectIntoViewport(I.clientX,I.clientY),Le=[te[0]*oe+ee.x,te[1]*oe+ee.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||D()){I.preventDefault();return}if(Z.panningEnabled()&&Z.userPanningEnabled()&&Z.zoomingEnabled()&&Z.userZoomingEnabled()){I.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var W;I.deltaY!=null?W=I.deltaY/-250:I.wheelDeltaY!=null?W=I.wheelDeltaY/1e3:W=I.wheelDelta/1e3,W=W*t.wheelSensitivity;var J=I.deltaMode===1;J&&(W*=33);var ne=Z.zoom()*Math.pow(10,W);I.type==="gesturechange"&&(ne=t.gestureStartZoom*I.scale),Z.zoom({level:ne,renderedPosition:{x:Le[0],y:Le[1]}}),Z.emit(I.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",b,!0),t.registerBinding(window,"scroll",function(I){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(I){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||I.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(re){t.hasTouchStarted||b(re)},!0),t.registerBinding(t.container,"mouseout",function(I){var Z=t.projectIntoViewport(I.clientX,I.clientY);t.cy.emit({originalEvent:I,type:"mouseout",position:{x:Z[0],y:Z[1]}})},!1),t.registerBinding(t.container,"mouseover",function(I){var Z=t.projectIntoViewport(I.clientX,I.clientY);t.cy.emit({originalEvent:I,type:"mouseover",position:{x:Z[0],y:Z[1]}})},!1);var M,C,O,S,R,B,z,G,k,H,$,V,X,U=function(I,Z,oe,ee){return Math.sqrt((oe-I)*(oe-I)+(ee-Z)*(ee-Z))},F=function(I,Z,oe,ee){return(oe-I)*(oe-I)+(ee-Z)*(ee-Z)},Y;t.registerBinding(t.container,"touchstart",Y=function(I){if(t.hasTouchStarted=!0,!!L(I)){p(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var Z=t.cy,oe=t.touchData.now,ee=t.touchData.earlier;if(I.touches[0]){var te=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);oe[0]=te[0],oe[1]=te[1]}if(I.touches[1]){var te=t.projectIntoViewport(I.touches[1].clientX,I.touches[1].clientY);oe[2]=te[0],oe[3]=te[1]}if(I.touches[2]){var te=t.projectIntoViewport(I.touches[2].clientX,I.touches[2].clientY);oe[4]=te[0],oe[5]=te[1]}if(I.touches[1]){t.touchData.singleTouchMoved=!0,d(t.dragData.touchDragEles);var Le=t.findContainerClientCoords();k=Le[0],H=Le[1],$=Le[2],V=Le[3],M=I.touches[0].clientX-k,C=I.touches[0].clientY-H,O=I.touches[1].clientX-k,S=I.touches[1].clientY-H,X=0<=M&&M<=$&&0<=O&&O<=$&&0<=C&&C<=V&&0<=S&&S<=V;var W=Z.pan(),J=Z.zoom();R=U(M,C,O,S),B=F(M,C,O,S),z=[(M+O)/2,(C+S)/2],G=[(z[0]-W.x)/J,(z[1]-W.y)/J];var ne=200,se=ne*ne;if(B<se&&!I.touches[2]){var ae=t.findNearestElement(oe[0],oe[1],!0,!0),fe=t.findNearestElement(oe[2],oe[3],!0,!0);ae&&ae.isNode()?(ae.activate().emit({originalEvent:I,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),t.touchData.start=ae):fe&&fe.isNode()?(fe.activate().emit({originalEvent:I,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),t.touchData.start=fe):Z.emit({originalEvent:I,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(I.touches[2])Z.boxSelectionEnabled()&&I.preventDefault();else if(!I.touches[1]){if(I.touches[0]){var ce=t.findNearestElements(oe[0],oe[1],!0,!0),he=ce[0];if(he!=null&&(he.activate(),t.touchData.start=he,t.touchData.starts=ce,t.nodeIsGrabbable(he))){var ve=t.dragData.touchDragEles=Z.collection(),Te=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),he.selected()?(Te=Z.$(function(De){return De.selected()&&t.nodeIsGrabbable(De)}),c(Te,{addToList:ve})):g(he,{addToList:ve}),s(he);var Oe=function(we){return{originalEvent:I,type:we,position:{x:oe[0],y:oe[1]}}};he.emit(Oe("grabon")),Te?Te.forEach(function(De){De.emit(Oe("grab"))}):he.emit(Oe("grab"))}r(he,["touchstart","tapstart","vmousedown"],I,{x:oe[0],y:oe[1]}),he==null&&(t.data.bgActivePosistion={x:te[0],y:te[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&r(t.touchData.start,["taphold"],I,{x:oe[0],y:oe[1]})},t.tapholdDuration)}}if(I.touches.length>=1){for(var be=t.touchData.startPosition=[],Ne=0;Ne<oe.length;Ne++)be[Ne]=ee[Ne]=oe[Ne];var ke=I.touches[0];t.touchData.startGPosition=[ke.clientX,ke.clientY]}}},!1);var q;t.registerBinding(window,"touchmove",q=function(I){var Z=t.touchData.capture;if(!(!Z&&!L(I))){var oe=t.selection,ee=t.cy,te=t.touchData.now,Le=t.touchData.earlier,W=ee.zoom();if(I.touches[0]){var J=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);te[0]=J[0],te[1]=J[1]}if(I.touches[1]){var J=t.projectIntoViewport(I.touches[1].clientX,I.touches[1].clientY);te[2]=J[0],te[3]=J[1]}if(I.touches[2]){var J=t.projectIntoViewport(I.touches[2].clientX,I.touches[2].clientY);te[4]=J[0],te[5]=J[1]}var ne=t.touchData.startGPosition,se;if(Z&&I.touches[0]&&ne){for(var ae=[],fe=0;fe<te.length;fe++)ae[fe]=te[fe]-Le[fe];var ce=I.touches[0].clientX-ne[0],he=ce*ce,ve=I.touches[0].clientY-ne[1],Te=ve*ve,Oe=he+Te;se=Oe>=t.touchTapThreshold2}if(Z&&t.touchData.cxt){I.preventDefault();var be=I.touches[0].clientX-k,Ne=I.touches[0].clientY-H,ke=I.touches[1].clientX-k,De=I.touches[1].clientY-H,we=F(be,Ne,ke,De),Pe=we/B,Me=150,Ae=Me*Me,$e=1.5,Ye=$e*$e;if(Pe>=Ye||we>=Ae){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var ot={originalEvent:I,type:"cxttapend",position:{x:te[0],y:te[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(ot),t.touchData.start=null):ee.emit(ot)}}if(Z&&t.touchData.cxt){var ot={originalEvent:I,type:"cxtdrag",position:{x:te[0],y:te[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(ot):ee.emit(ot),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Be=t.findNearestElement(te[0],te[1],!0,!0);(!t.touchData.cxtOver||Be!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:I,type:"cxtdragout",position:{x:te[0],y:te[1]}}),t.touchData.cxtOver=Be,Be&&Be.emit({originalEvent:I,type:"cxtdragover",position:{x:te[0],y:te[1]}}))}else if(Z&&I.touches[2]&&ee.boxSelectionEnabled())I.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||ee.emit({originalEvent:I,type:"boxstart",position:{x:te[0],y:te[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,oe[4]=1,!oe||oe.length===0||oe[0]===void 0?(oe[0]=(te[0]+te[2]+te[4])/3,oe[1]=(te[1]+te[3]+te[5])/3,oe[2]=(te[0]+te[2]+te[4])/3+1,oe[3]=(te[1]+te[3]+te[5])/3+1):(oe[2]=(te[0]+te[2]+te[4])/3,oe[3]=(te[1]+te[3]+te[5])/3),t.redrawHint("select",!0),t.redraw();else if(Z&&I.touches[1]&&!t.touchData.didSelect&&ee.zoomingEnabled()&&ee.panningEnabled()&&ee.userZoomingEnabled()&&ee.userPanningEnabled()){I.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Fe=t.dragData.touchDragEles;if(Fe){t.redrawHint("drag",!0);for(var _e=0;_e<Fe.length;_e++){var Ke=Fe[_e]._private;Ke.grabbed=!1,Ke.rscratch.inDragLayer=!1}}var Qe=t.touchData.start,be=I.touches[0].clientX-k,Ne=I.touches[0].clientY-H,ke=I.touches[1].clientX-k,De=I.touches[1].clientY-H,wt=U(be,Ne,ke,De),oa=wt/R;if(X){var Ut=be-M,Jt=Ne-C,_t=ke-O,Yt=De-S,Mr=(Ut+_t)/2,jt=(Jt+Yt)/2,At=ee.zoom(),Ar=At*oa,er=ee.pan(),sa=G[0]*At+er.x,Or=G[1]*At+er.y,Hn={x:-Ar/At*(sa-er.x-Mr)+sa,y:-Ar/At*(Or-er.y-jt)+Or};if(Qe&&Qe.active()){var Fe=t.dragData.touchDragEles;d(Fe),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Qe.unactivate().emit("freeon"),Fe.emit("free"),t.dragData.didDrag&&(Qe.emit("dragfreeon"),Fe.emit("dragfree"))}ee.viewport({zoom:Ar,pan:Hn,cancelOnFailedZoom:!0}),ee.emit("pinchzoom"),R=wt,M=be,C=Ne,O=ke,S=De,t.pinching=!0}if(I.touches[0]){var J=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);te[0]=J[0],te[1]=J[1]}if(I.touches[1]){var J=t.projectIntoViewport(I.touches[1].clientX,I.touches[1].clientY);te[2]=J[0],te[3]=J[1]}if(I.touches[2]){var J=t.projectIntoViewport(I.touches[2].clientX,I.touches[2].clientY);te[4]=J[0],te[5]=J[1]}}else if(I.touches[0]&&!t.touchData.didSelect){var xt=t.touchData.start,Rr=t.touchData.last,Be;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Be=t.findNearestElement(te[0],te[1],!0,!0)),Z&&xt!=null&&I.preventDefault(),Z&&xt!=null&&t.nodeIsDraggable(xt))if(se){var Fe=t.dragData.touchDragEles,la=!t.dragData.didDrag;la&&c(Fe,{inDragLayer:!0}),t.dragData.didDrag=!0;var qt={x:0,y:0};if(ye(ae[0])&&ye(ae[1])&&(qt.x+=ae[0],qt.y+=ae[1],la)){t.redrawHint("eles",!0);var Dt=t.touchData.dragDelta;Dt&&ye(Dt[0])&&ye(Dt[1])&&(qt.x+=Dt[0],qt.y+=Dt[1])}t.hoverData.draggingEles=!0,Fe.silentShift(qt).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Le[0]&&t.touchData.startPosition[1]==Le[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Dt=t.touchData.dragDelta=t.touchData.dragDelta||[];Dt.length===0?(Dt.push(ae[0]),Dt.push(ae[1])):(Dt[0]+=ae[0],Dt[1]+=ae[1])}if(r(xt||Be,["touchmove","tapdrag","vmousemove"],I,{x:te[0],y:te[1]}),(!xt||!xt.grabbed())&&Be!=Rr&&(Rr&&Rr.emit({originalEvent:I,type:"tapdragout",position:{x:te[0],y:te[1]}}),Be&&Be.emit({originalEvent:I,type:"tapdragover",position:{x:te[0],y:te[1]}})),t.touchData.last=Be,Z)for(var _e=0;_e<te.length;_e++)te[_e]&&t.touchData.startPosition[_e]&&se&&(t.touchData.singleTouchMoved=!0);if(Z&&(xt==null||xt.pannable())&&ee.panningEnabled()&&ee.userPanningEnabled()){var st=n(xt,t.touchData.starts);st&&(I.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Yr(t.touchData.startPosition)),t.swipePanning?(ee.panBy({x:ae[0]*W,y:ae[1]*W}),ee.emit("dragpan")):se&&(t.swipePanning=!0,ee.panBy({x:ce*W,y:ve*W}),ee.emit("dragpan"),xt&&(xt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var J=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);te[0]=J[0],te[1]=J[1]}}for(var fe=0;fe<te.length;fe++)Le[fe]=te[fe];Z&&I.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var K;t.registerBinding(window,"touchcancel",K=function(I){var Z=t.touchData.start;t.touchData.capture=!1,Z&&Z.unactivate()});var j,ge,Ce,Q;if(t.registerBinding(window,"touchend",j=function(I){var Z=t.touchData.start,oe=t.touchData.capture;if(oe)I.touches.length===0&&(t.touchData.capture=!1),I.preventDefault();else return;var ee=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var te=t.cy,Le=te.zoom(),W=t.touchData.now,J=t.touchData.earlier;if(I.touches[0]){var ne=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);W[0]=ne[0],W[1]=ne[1]}if(I.touches[1]){var ne=t.projectIntoViewport(I.touches[1].clientX,I.touches[1].clientY);W[2]=ne[0],W[3]=ne[1]}if(I.touches[2]){var ne=t.projectIntoViewport(I.touches[2].clientX,I.touches[2].clientY);W[4]=ne[0],W[5]=ne[1]}Z&&Z.unactivate();var se;if(t.touchData.cxt){if(se={originalEvent:I,type:"cxttapend",position:{x:W[0],y:W[1]}},Z?Z.emit(se):te.emit(se),!t.touchData.cxtDragged){var ae={originalEvent:I,type:"cxttap",position:{x:W[0],y:W[1]}};Z?Z.emit(ae):te.emit(ae)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!I.touches[2]&&te.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var fe=te.collection(t.getAllInBox(ee[0],ee[1],ee[2],ee[3]));ee[0]=void 0,ee[1]=void 0,ee[2]=void 0,ee[3]=void 0,ee[4]=0,t.redrawHint("select",!0),te.emit({type:"boxend",originalEvent:I,position:{x:W[0],y:W[1]}});var ce=function(Ae){return Ae.selectable()&&!Ae.selected()};fe.emit("box").stdFilter(ce).select().emit("boxselect"),fe.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(Z?.unactivate(),I.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!I.touches[1]){if(!I.touches[0]){if(!I.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var he=t.dragData.touchDragEles;if(Z!=null){var ve=Z._private.grabbed;d(he),t.redrawHint("drag",!0),t.redrawHint("eles",!0),ve&&(Z.emit("freeon"),he.emit("free"),t.dragData.didDrag&&(Z.emit("dragfreeon"),he.emit("dragfree"))),r(Z,["touchend","tapend","vmouseup","tapdragout"],I,{x:W[0],y:W[1]}),Z.unactivate(),t.touchData.start=null}else{var Te=t.findNearestElement(W[0],W[1],!0,!0);r(Te,["touchend","tapend","vmouseup","tapdragout"],I,{x:W[0],y:W[1]})}var Oe=t.touchData.startPosition[0]-W[0],be=Oe*Oe,Ne=t.touchData.startPosition[1]-W[1],ke=Ne*Ne,De=be+ke,we=De*Le*Le;t.touchData.singleTouchMoved||(Z||te.$(":selected").unselect(["tapunselect"]),r(Z,["tap","vclick"],I,{x:W[0],y:W[1]}),ge=!1,I.timeStamp-Q<=te.multiClickDebounceTime()?(Ce&&clearTimeout(Ce),ge=!0,Q=null,r(Z,["dbltap","vdblclick"],I,{x:W[0],y:W[1]})):(Ce=setTimeout(function(){ge||r(Z,["onetap","voneclick"],I,{x:W[0],y:W[1]})},te.multiClickDebounceTime()),Q=I.timeStamp)),Z!=null&&!t.dragData.didDrag&&Z._private.selectable&&we<t.touchTapThreshold2&&!t.pinching&&(te.selectionType()==="single"?(te.$(e).unmerge(Z).unselect(["tapunselect"]),Z.select(["tapselect"])):Z.selected()?Z.unselect(["tapunselect"]):Z.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Pe=0;Pe<W.length;Pe++)J[Pe]=W[Pe];t.dragData.didDrag=!1,I.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),I.touches.length<2&&(I.touches.length===1&&(t.touchData.startGPosition=[I.touches[0].clientX,I.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var le=[],de=function(I){return{clientX:I.clientX,clientY:I.clientY,force:1,identifier:I.pointerId,pageX:I.pageX,pageY:I.pageY,radiusX:I.width/2,radiusY:I.height/2,screenX:I.screenX,screenY:I.screenY,target:I.target}},ie=function(I){return{event:I,touch:de(I)}},_=function(I){le.push(ie(I))},ue=function(I){for(var Z=0;Z<le.length;Z++){var oe=le[Z];if(oe.event.pointerId===I.pointerId){le.splice(Z,1);return}}},Ee=function(I){var Z=le.filter(function(oe){return oe.event.pointerId===I.pointerId})[0];Z.event=I,Z.touch=de(I)},me=function(I){I.touches=le.map(function(Z){return Z.touch})},pe=function(I){return I.pointerType==="mouse"||I.pointerType===4};t.registerBinding(t.container,"pointerdown",function(re){pe(re)||(re.preventDefault(),_(re),me(re),Y(re))}),t.registerBinding(t.container,"pointerup",function(re){pe(re)||(ue(re),me(re),j(re))}),t.registerBinding(t.container,"pointercancel",function(re){pe(re)||(ue(re),me(re),K(re))}),t.registerBinding(t.container,"pointermove",function(re){pe(re)||(re.preventDefault(),Ee(re),me(re),q(re))})}};var Zt={};Zt.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(a,n,o,i,l){this.renderer.nodeShapeImpl("polygon",a,n,o,i,l,this.points)},intersectLine:function(a,n,o,i,l,u,s){return Oa(l,u,this.points,a,n,o/2,i/2,s)},checkPoint:function(a,n,o,i,l,u,s){return $t(a,n,this.points,u,s,i,l,[0,-1],o)}}};Zt.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,a,n,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,o)},intersectLine:function(e,r,a,n,o,i,l){return mp(o,i,e,r,a/2+l,n/2+l)},checkPoint:function(e,r,a,n,o,i,l){return Er(e,r,n,o,i,l,a)}}};Zt.generateRoundPolygon=function(t,e){for(var r=new Array(e.length*2),a=0;a<e.length/2;a++){var n=a*2,o=void 0;a<e.length/2-1?o=(a+1)*2:o=0,r[a*4]=e[n],r[a*4+1]=e[n+1];var i=e[o]-e[n],l=e[o+1]-e[n+1],u=Math.sqrt(i*i+l*l);r[a*4+2]=i/u,r[a*4+3]=l/u}return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(f,v,h,c,g){this.renderer.nodeShapeImpl("round-polygon",f,v,h,c,g,this.points)},intersectLine:function(f,v,h,c,g,d,m){return Ep(g,d,this.points,f,v,h,c)},checkPoint:function(f,v,h,c,g,d,m){return yp(f,v,this.points,d,m,c,g)}}};Zt.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ct(4,0),draw:function(e,r,a,n,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,o)},intersectLine:function(e,r,a,n,o,i,l){return Wu(o,i,e,r,a,n,l)},checkPoint:function(e,r,a,n,o,i,l){var u=Va(n,o),s=u*2;return!!($t(e,r,this.points,i,l,n,o-s,[0,-1],a)||$t(e,r,this.points,i,l,n-s,o,[0,-1],a)||Er(e,r,s,s,i-n/2+u,l-o/2+u,a)||Er(e,r,s,s,i+n/2-u,l-o/2+u,a)||Er(e,r,s,s,i+n/2-u,l+o/2-u,a)||Er(e,r,s,s,i-n/2+u,l+o/2-u,a))}}};Zt.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Zu(),points:Ct(4,0),draw:function(e,r,a,n,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,o)},generateCutTrianglePts:function(e,r,a,n){var o=this.cornerLength,i=r/2,l=e/2,u=a-l,s=a+l,f=n-i,v=n+i;return{topLeft:[u,f+o,u+o,f,u+o,f+o],topRight:[s-o,f,s,f+o,s-o,f+o],bottomRight:[s,v-o,s-o,v,s-o,v-o],bottomLeft:[u+o,v,u,v-o,u+o,v-o]}},intersectLine:function(e,r,a,n,o,i,l){var u=this.generateCutTrianglePts(a+2*l,n+2*l,e,r),s=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return Oa(o,i,s,e,r)},checkPoint:function(e,r,a,n,o,i,l){if($t(e,r,this.points,i,l,n,o-2*this.cornerLength,[0,-1],a)||$t(e,r,this.points,i,l,n-2*this.cornerLength,o,[0,-1],a))return!0;var u=this.generateCutTrianglePts(n,o,i,l);return St(e,r,u.topLeft)||St(e,r,u.topRight)||St(e,r,u.bottomRight)||St(e,r,u.bottomLeft)}}};Zt.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ct(4,0),draw:function(e,r,a,n,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,o)},intersectLine:function(e,r,a,n,o,i,l){var u=.15,s=.5,f=.85,v=this.generateBarrelBezierPts(a+2*l,n+2*l,e,r),h=function(d){var m=Wr({x:d[0],y:d[1]},{x:d[2],y:d[3]},{x:d[4],y:d[5]},u),p=Wr({x:d[0],y:d[1]},{x:d[2],y:d[3]},{x:d[4],y:d[5]},s),y=Wr({x:d[0],y:d[1]},{x:d[2],y:d[3]},{x:d[4],y:d[5]},f);return[d[0],d[1],m.x,m.y,p.x,p.y,y.x,y.y,d[4],d[5]]},c=[].concat(h(v.topLeft),h(v.topRight),h(v.bottomRight),h(v.bottomLeft));return Oa(o,i,c,e,r)},generateBarrelBezierPts:function(e,r,a,n){var o=r/2,i=e/2,l=a-i,u=a+i,s=n-o,f=n+o,v=vi(e,r),h=v.heightOffset,c=v.widthOffset,g=v.ctrlPtOffsetPct*e,d={topLeft:[l,s+h,l+g,s,l+c,s],topRight:[u-c,s,u-g,s,u,s+h],bottomRight:[u,f-h,u-g,f,u-c,f],bottomLeft:[l+c,f,l+g,f,l,f-h]};return d.topLeft.isTop=!0,d.topRight.isTop=!0,d.bottomLeft.isBottom=!0,d.bottomRight.isBottom=!0,d},checkPoint:function(e,r,a,n,o,i,l){var u=vi(n,o),s=u.heightOffset,f=u.widthOffset;if($t(e,r,this.points,i,l,n,o-2*s,[0,-1],a)||$t(e,r,this.points,i,l,n-2*f,o,[0,-1],a))return!0;for(var v=this.generateBarrelBezierPts(n,o,i,l),h=function(D,L,N){var A=N[4],P=N[2],b=N[0],M=N[5],C=N[1],O=Math.min(A,b),S=Math.max(A,b),R=Math.min(M,C),B=Math.max(M,C);if(O<=D&&D<=S&&R<=L&&L<=B){var z=bp(A,P,b),G=cp(z[0],z[1],z[2],D),k=G.filter(function(H){return 0<=H&&H<=1});if(k.length>0)return k[0]}return null},c=Object.keys(v),g=0;g<c.length;g++){var d=c[g],m=v[d],p=h(e,r,m);if(p!=null){var y=m[5],E=m[3],T=m[1],w=vt(y,E,T,p);if(m.isTop&&w<=r||m.isBottom&&r<=w)return!0}}return!1}}};Zt.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ct(4,0),draw:function(e,r,a,n,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,o)},intersectLine:function(e,r,a,n,o,i,l){var u=e-(a/2+l),s=r-(n/2+l),f=s,v=e+(a/2+l),h=ir(o,i,e,r,u,s,v,f,!1);return h.length>0?h:Wu(o,i,e,r,a,n,l)},checkPoint:function(e,r,a,n,o,i,l){var u=Va(n,o),s=2*u;if($t(e,r,this.points,i,l,n,o-s,[0,-1],a)||$t(e,r,this.points,i,l,n-s,o,[0,-1],a))return!0;var f=n/2+2*a,v=o/2+2*a,h=[i-f,l-v,i-f,l,i+f,l,i+f,l-v];return!!(St(e,r,h)||Er(e,r,s,s,i+n/2-u,l+o/2-u,a)||Er(e,r,s,s,i-n/2+u,l+o/2-u,a))}}};Zt.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Ct(3,0)),this.generateRoundPolygon("round-triangle",Ct(3,0)),this.generatePolygon("rectangle",Ct(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Ct(5,0)),this.generateRoundPolygon("round-pentagon",Ct(5,0)),this.generatePolygon("hexagon",Ct(6,0)),this.generateRoundPolygon("round-hexagon",Ct(6,0)),this.generatePolygon("heptagon",Ct(7,0)),this.generateRoundPolygon("round-heptagon",Ct(7,0)),this.generatePolygon("octagon",Ct(8,0)),this.generateRoundPolygon("round-octagon",Ct(8,0));var a=new Array(20);{var n=fi(5,0),o=fi(5,Math.PI/5),i=.5*(3-Math.sqrt(5));i*=1.57;for(var l=0;l<o.length/2;l++)o[l*2]*=i,o[l*2+1]*=i;for(var l=0;l<20/4;l++)a[l*4]=n[l*2],a[l*4+1]=n[l*2+1],a[l*4+2]=o[l*2],a[l*4+3]=o[l*2+1]}a=Ku(a),this.generatePolygon("star",a),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(s){var f=s.join("$"),v="polygon-"+f,h;return(h=this[v])?h:e.generatePolygon(v,s)}};var qa={};qa.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};qa.redraw=function(t){t=t||Hu();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};qa.beforeRender=function(t,e){if(!this.destroyed){e==null&&nt("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(a,n){return n.priority-a.priority})}};var yu=function(e,r,a){for(var n=e.beforeRenderCallbacks,o=0;o<n.length;o++)n[o].fn(r,a)};qa.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function a(n){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){yu(t,!0,n);var o=Xt();t.render(t.renderOptions);var i=t.lastDrawTime=Xt();t.averageRedrawTime===void 0&&(t.averageRedrawTime=i-o),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var l=i-o;t.redrawTotalTime+=l,t.lastRedrawTime=l,t.averageRedrawTime=t.averageRedrawTime/2+l/2,t.requestedFrame=!1}else yu(t,!1,n);t.skipFrame=!1,mn(a)}};mn(r)}};var qm=function(e){this.init(e)},zf=qm,aa=zf.prototype;aa.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];aa.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container();if(rt){var a=rt.document,n=a.head,o="__________cytoscape_stylesheet",i="__________cytoscape_container",l=a.getElementById(o)!=null;if(r.className.indexOf(i)<0&&(r.className=(r.className||"")+" "+i),!l){var u=a.createElement("style");u.id=o,u.innerHTML="."+i+" { position: relative; }",n.insertBefore(u,n.children[0])}var s=rt.getComputedStyle(r),f=s.getPropertyValue("position");f==="static"&&We("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ye(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};aa.notify=function(t,e){var r=this,a=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&a.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};aa.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],a=r,n=a.target;(n.off||n.removeEventListener).apply(n,a.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};aa.isHeadless=function(){return!1};[Gi,Bf,kf,ra,Zt,qa].forEach(function(t){Ie(aa,t)});var li=1e3/60,Gf={setupDequeueing:function(e){return function(){var a=this,n=this.renderer;if(!a.dequeueingSetup){a.dequeueingSetup=!0;var o=Sn.default(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),i=function(s,f){var v=Xt(),h=n.averageRedrawTime,c=n.lastRedrawTime,g=[],d=n.cy.extent(),m=n.getPixelRatio();for(s||n.flushRenderedStyleQueue();;){var p=Xt(),y=p-v,E=p-f;if(c<li){var T=li-(s?h:0);if(E>=e.deqFastCost*T)break}else if(s){if(y>=e.deqCost*c||y>=e.deqAvgCost*h)break}else if(E>=e.deqNoDrawCost*li)break;var w=e.deq(a,m,d);if(w.length>0)for(var x=0;x<w.length;x++)g.push(w[x]);else break}g.length>0&&(e.onDeqd(a,g),!s&&e.shouldRedraw(a,g,m,d)&&o())},l=e.priority||Li;n.beforeRender(i,l(a))}}}},Wm=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:En;xi(this,t),this.idsByKey=new zt,this.keyForId=new zt,this.cachesByLvl=new zt,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Ci(t,[{key:"getIdsFor",value:function(r){r==null&&nt("Can not get id list for null key");var a=this.idsByKey,n=this.idsByKey.get(r);return n||(n=new _r,a.set(r,n)),n}},{key:"addIdForKey",value:function(r,a){r!=null&&this.getIdsFor(r).add(a)}},{key:"deleteIdForKey",value:function(r,a){r!=null&&this.getIdsFor(r).delete(a)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var a=r.id(),n=this.keyForId.get(a),o=this.getKey(r);this.deleteIdForKey(n,a),this.addIdForKey(o,a),this.keyForId.set(a,o)}},{key:"deleteKeyMappingFor",value:function(r){var a=r.id(),n=this.keyForId.get(a);this.deleteIdForKey(n,a),this.keyForId.delete(a)}},{key:"keyHasChangedFor",value:function(r){var a=r.id(),n=this.keyForId.get(a),o=this.getKey(r);return n!==o}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var a=this.cachesByLvl,n=this.lvls,o=a.get(r);return o||(o=new zt,a.set(r,o),n.push(r)),o}},{key:"getCache",value:function(r,a){return this.getCachesAt(a).get(r)}},{key:"get",value:function(r,a){var n=this.getKey(r),o=this.getCache(n,a);return o!=null&&this.updateKeyMappingFor(r),o}},{key:"getForCachedKey",value:function(r,a){var n=this.keyForId.get(r.id()),o=this.getCache(n,a);return o}},{key:"hasCache",value:function(r,a){return this.getCachesAt(a).has(r)}},{key:"has",value:function(r,a){var n=this.getKey(r);return this.hasCache(n,a)}},{key:"setCache",value:function(r,a,n){n.key=r,this.getCachesAt(a).set(r,n)}},{key:"set",value:function(r,a,n){var o=this.getKey(r);this.setCache(o,a,n),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,a){this.getCachesAt(a).delete(r)}},{key:"delete",value:function(r,a){var n=this.getKey(r);this.deleteCache(n,a)}},{key:"invalidateKey",value:function(r){var a=this;this.lvls.forEach(function(n){return a.deleteCache(r,n)})}},{key:"invalidate",value:function(r){var a=r.id(),n=this.keyForId.get(a);this.deleteKeyMappingFor(r);var o=this.doesEleInvalidateKey(r);return o&&this.invalidateKey(n),o||this.getNumberOfIdsForKey(n)===0}}]),t}(),mu=25,un=50,pn=-4,mi=3,Xm=7.99,$m=8,Km=1024,Zm=1024,Qm=1024,Jm=.2,_m=.8,jm=10,e0=.15,t0=.1,r0=.9,a0=.9,n0=100,i0=1,qr={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},o0=gt({getKey:null,doesEleInvalidateKey:En,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:zu,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ca=function(e,r){var a=this;a.renderer=e,a.onDequeues=[];var n=o0(r);Ie(a,n),a.lookup=new Wm(n.getKey,n.doesEleInvalidateKey),a.setupDequeueing()},ft=Ca.prototype;ft.reasons=qr;ft.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};ft.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},a=r[t]=r[t]||[];return a};ft.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new ka.default(function(r,a){return a.reqs-r.reqs});return e};ft.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};ft.getElement=function(t,e,r,a,n){var o=this,i=this.renderer,l=i.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(a==null&&(a=Math.ceil(Mi(l*r))),a<pn)a=pn;else if(l>=Xm||a>mi)return null;var s=Math.pow(2,a),f=e.h*s,v=e.w*s,h=i.eleTextBiggerThanMin(t,s);if(!this.isVisible(t,h))return null;var c=u.get(t,a);if(c&&c.invalidated&&(c.invalidated=!1,c.texture.invalidatedWidth-=c.width),c)return c;var g;if(f<=mu?g=mu:f<=un?g=un:g=Math.ceil(f/un)*un,f>Qm||v>Zm)return null;var d=o.getTextureQueue(g),m=d[d.length-2],p=function(){return o.recycleTexture(g,v)||o.addTexture(g,v)};m||(m=d[d.length-1]),m||(m=p()),m.width-m.usedWidth<v&&(m=p());for(var y=function(S){return S&&S.scaledLabelShown===h},E=n&&n===qr.dequeue,T=n&&n===qr.highQuality,w=n&&n===qr.downscale,x,D=a+1;D<=mi;D++){var L=u.get(t,D);if(L){x=L;break}}var N=x&&x.level===a+1?x:null,A=function(){m.context.drawImage(N.texture.canvas,N.x,0,N.width,N.height,m.usedWidth,0,v,f)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,v,g),y(N))A();else if(y(x))if(T){for(var P=x.level;P>a;P--)N=o.getElement(t,e,r,P,qr.downscale);A()}else return o.queueElement(t,x.level-1),x;else{var b;if(!E&&!T&&!w)for(var M=a-1;M>=pn;M--){var C=u.get(t,M);if(C){b=C;break}}if(y(b))return o.queueElement(t,a),b;m.context.translate(m.usedWidth,0),m.context.scale(s,s),this.drawElement(m.context,t,e,h,!1),m.context.scale(1/s,1/s),m.context.translate(-m.usedWidth,0)}return c={x:m.usedWidth,texture:m,level:a,scale:s,width:v,height:f,scaledLabelShown:h},m.usedWidth+=Math.ceil(v+$m),m.eleCaches.push(c),u.set(t,a,c),o.checkTextureFullness(m),c};ft.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};ft.invalidateElement=function(t){var e=this,r=e.lookup,a=[],n=r.isInvalid(t);if(n){for(var o=pn;o<=mi;o++){var i=r.getForCachedKey(t,o);i&&a.push(i)}var l=r.invalidate(t);if(l)for(var u=0;u<a.length;u++){var s=a[u],f=s.texture;f.invalidatedWidth+=s.width,s.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(t)}};ft.checkTextureUtility=function(t){t.invalidatedWidth>=Jm*t.width&&this.retireTexture(t)};ft.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>_m&&t.fullnessChecks>=jm?ur(r,t):t.fullnessChecks++};ft.retireTexture=function(t){var e=this,r=t.height,a=e.getTextureQueue(r),n=this.lookup;ur(a,t),t.retired=!0;for(var o=t.eleCaches,i=0;i<o.length;i++){var l=o[i];n.deleteCache(l.key,l.level)}Ni(o);var u=e.getRetiredTextureQueue(r);u.push(t)};ft.addTexture=function(t,e){var r=this,a=r.getTextureQueue(t),n={};return a.push(n),n.eleCaches=[],n.height=t,n.width=Math.max(Km,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=r.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n};ft.recycleTexture=function(t,e){for(var r=this,a=r.getTextureQueue(t),n=r.getRetiredTextureQueue(t),o=0;o<n.length;o++){var i=n[o];if(i.width>=e)return i.retired=!1,i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,Ni(i.eleCaches),i.context.setTransform(1,0,0,1,0,0),i.context.clearRect(0,0,i.width,i.height),ur(n,i),a.push(i),i}};ft.queueElement=function(t,e){var r=this,a=r.getElementQueue(),n=r.getElementKeyToQueue(),o=this.getKey(t),i=n[o];if(i)i.level=Math.max(i.level,e),i.eles.merge(t),i.reqs++,a.updateItem(i);else{var l={eles:t.spawn().merge(t),level:e,reqs:1,key:o};a.push(l),n[o]=l}};ft.dequeue=function(t){for(var e=this,r=e.getElementQueue(),a=e.getElementKeyToQueue(),n=[],o=e.lookup,i=0;i<i0&&r.size()>0;i++){var l=r.pop(),u=l.key,s=l.eles[0],f=o.hasCache(s,l.level);if(a[u]=null,f)continue;n.push(l);var v=e.getBoundingBox(s);e.getElement(s,v,t,l.level,qr.dequeue)}return n};ft.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),a=e.getElementKeyToQueue(),n=this.getKey(t),o=a[n];o!=null&&(o.eles.length===1?(o.reqs=Si,r.updateItem(o),r.pop(),a[n]=null):o.eles.unmerge(t))};ft.onDequeue=function(t){this.onDequeues.push(t)};ft.offDequeue=function(t){ur(this.onDequeues,t)};ft.setupDequeueing=Gf.setupDequeueing({deqRedrawThreshold:n0,deqCost:e0,deqAvgCost:t0,deqNoDrawCost:r0,deqFastCost:a0,deq:function(e,r,a){return e.dequeue(r,a)},onDeqd:function(e,r){for(var a=0;a<e.onDequeues.length;a++){var n=e.onDequeues[a];n(r)}},shouldRedraw:function(e,r,a,n){for(var o=0;o<r.length;o++)for(var i=r[o].eles,l=0;l<i.length;l++){var u=i[l].boundingBox();if(Ai(u,n))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var s0=1,Da=-4,Dn=2,l0=3.99,u0=50,f0=50,v0=.15,h0=.1,c0=.9,d0=.9,g0=1,Eu=250,p0=4e3*4e3,y0=!0,Vf=function(e){var r=this,a=r.renderer=e,n=a.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Xt()-2*Eu,r.skipping=!1,r.eleTxrDeqs=n.collection(),r.scheduleElementRefinement=Sn.default(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},f0),a.beforeRender(function(i,l){l-r.lastInvalidationTime<=Eu?r.skipping=!0:r.skipping=!1},a.beforeRenderPriorities.lyrTxrSkip);var o=function(l,u){return u.reqs-l.reqs};r.layersQueue=new ka.default(o),r.setupDequeueing()},pt=Vf.prototype,bu=0,m0=Math.pow(2,53)-1;pt.makeLayer=function(t,e){var r=Math.pow(2,e),a=Math.ceil(t.w*r),n=Math.ceil(t.h*r),o=this.renderer.makeOffscreenCanvas(a,n),i={id:bu=++bu%m0,bb:t,level:e,width:a,height:n,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=i.context,u=-i.bb.x1,s=-i.bb.y1;return l.scale(r,r),l.translate(u,s),i};pt.getLayers=function(t,e,r){var a=this,n=a.renderer,o=n.cy,i=o.zoom(),l=a.firstGet;if(a.firstGet=!1,r==null){if(r=Math.ceil(Mi(i*e)),r<Da)r=Da;else if(i>=l0||r>Dn)return null}a.validateLayersElesOrdering(r,t);var u=a.layersByLevel,s=Math.pow(2,r),f=u[r]=u[r]||[],v,h=a.levelIsComplete(r,t),c,g=function(){var A=function(O){if(a.validateLayersElesOrdering(O,t),a.levelIsComplete(O,t))return c=u[O],!0},P=function(O){if(!c)for(var S=r+O;Da<=S&&S<=Dn&&!A(S);S+=O);};P(1),P(-1);for(var b=f.length-1;b>=0;b--){var M=f[b];M.invalid&&ur(f,M)}};if(!h)g();else return f;var d=function(){if(!v){v=Lt();for(var A=0;A<t.length;A++)lp(v,t[A].boundingBox())}return v},m=function(A){A=A||{};var P=A.after;d();var b=v.w*s*(v.h*s);if(b>p0)return null;var M=a.makeLayer(v,r);if(P!=null){var C=f.indexOf(P)+1;f.splice(C,0,M)}else(A.insert===void 0||A.insert)&&f.unshift(M);return M};if(a.skipping&&!l)return null;for(var p=null,y=t.length/s0,E=!l,T=0;T<t.length;T++){var w=t[T],x=w._private.rscratch,D=x.imgLayerCaches=x.imgLayerCaches||{},L=D[r];if(L){p=L;continue}if((!p||p.eles.length>=y||!qu(p.bb,w.boundingBox()))&&(p=m({insert:!0,after:p}),!p))return null;c||E?a.queueLayer(p,w):a.drawEleInLayer(p,w,r,e),p.eles.push(w),D[r]=p}return c||(E?null:f)};pt.getEleLevelForLayerLevel=function(t,e){return t};pt.drawEleInLayer=function(t,e,r,a){var n=this,o=this.renderer,i=t.context,l=e.boundingBox();l.w===0||l.h===0||!e.visible()||(r=n.getEleLevelForLayerLevel(r,a),o.setImgSmoothing(i,!1),o.drawCachedElement(i,e,null,null,r,y0),o.setImgSmoothing(i,!0))};pt.levelIsComplete=function(t,e){var r=this,a=r.layersByLevel[t];if(!a||a.length===0)return!1;for(var n=0,o=0;o<a.length;o++){var i=a[o];if(i.reqs>0||i.invalid)return!1;n+=i.eles.length}return n===e.length};pt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var a=0;a<r.length;a++){for(var n=r[a],o=-1,i=0;i<e.length;i++)if(n.eles[0]===e[i]){o=i;break}if(o<0){this.invalidateLayer(n);continue}for(var l=o,i=0;i<n.eles.length;i++)if(n.eles[i]!==e[l+i]){this.invalidateLayer(n);break}}};pt.updateElementsInLayers=function(t,e){for(var r=this,a=Ga(t[0]),n=0;n<t.length;n++)for(var o=a?null:t[n],i=a?t[n]:t[n].ele,l=i._private.rscratch,u=l.imgLayerCaches=l.imgLayerCaches||{},s=Da;s<=Dn;s++){var f=u[s];f&&(o&&r.getEleLevelForLayerLevel(f.level)!==o.level||e(f,i,o))}};pt.haveLayers=function(){for(var t=this,e=!1,r=Da;r<=Dn;r++){var a=t.layersByLevel[r];if(a&&a.length>0){e=!0;break}}return e};pt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Xt(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(a,n,o){e.invalidateLayer(a)}))};pt.invalidateLayer=function(t){if(this.lastInvalidationTime=Xt(),!t.invalid){var e=t.level,r=t.eles,a=this.layersByLevel[e];ur(a,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var n=0;n<r.length;n++){var o=r[n]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};pt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(a,n,o){var i=a.replacement;if(i||(i=a.replacement=e.makeLayer(a.bb,a.level),i.replaces=a,i.eles=a.eles),!i.reqs)for(var l=0;l<i.eles.length;l++)e.queueLayer(i,i.eles[l])})};pt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};pt.queueLayer=function(t,e){var r=this,a=r.layersQueue,n=t.elesQueue,o=n.hasId=n.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;n.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,a.updateItem(t)):(t.reqs=1,a.push(t))}};pt.dequeue=function(t){for(var e=this,r=e.layersQueue,a=[],n=0;n<g0&&r.size()!==0;){var o=r.peek();if(o.replacement){r.pop();continue}if(o.replaces&&o!==o.replaces.replacement){r.pop();continue}if(o.invalid){r.pop();continue}var i=o.elesQueue.shift();i&&(e.drawEleInLayer(o,i,o.level,t),n++),a.length===0&&a.push(!0),o.elesQueue.length===0&&(r.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return a};pt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],a=t.replaces,n=r.indexOf(a);if(!(n<0||a.invalid)){r[n]=t;for(var o=0;o<t.eles.length;o++){var i=t.eles[o]._private,l=i.imgLayerCaches=i.imgLayerCaches||{};l&&(l[t.level]=t)}e.requestRedraw()}};pt.requestRedraw=Sn.default(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);pt.setupDequeueing=Gf.setupDequeueing({deqRedrawThreshold:u0,deqCost:v0,deqAvgCost:h0,deqNoDrawCost:c0,deqFastCost:d0,deq:function(e,r){return e.dequeue(r)},onDeqd:Li,shouldRedraw:zu,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Hf={},wu;function E0(t,e){for(var r=0;r<e.length;r++){var a=e[r];t.lineTo(a.x,a.y)}}function b0(t,e,r){for(var a,n=0;n<e.length;n++){var o=e[n];n===0&&(a=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(r.x,r.y,a.x,a.y)}function xu(t,e,r){t.beginPath&&t.beginPath();for(var a=e,n=0;n<a.length;n++){var o=a[n];t.lineTo(o.x,o.y)}var i=r,l=r[0];t.moveTo(l.x,l.y);for(var n=1;n<i.length;n++){var o=i[n];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()}function w0(t,e,r,a,n){t.beginPath&&t.beginPath(),t.arc(r,a,n,0,Math.PI*2,!1);var o=e,i=o[0];t.moveTo(i.x,i.y);for(var l=0;l<o.length;l++){var u=o[l];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function x0(t,e,r,a){t.arc(e,r,a,0,Math.PI*2,!1)}Hf.arrowShapeImpl=function(t){return(wu||(wu={polygon:E0,"triangle-backcurve":b0,"triangle-tee":xu,"circle-triangle":w0,"triangle-cross":xu,circle:x0}))[t]};var Ht={};Ht.drawElement=function(t,e,r,a,n,o){var i=this;e.isNode()?i.drawNode(t,e,r,a,n,o):i.drawEdge(t,e,r,a,n,o)};Ht.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Ht.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Ht.drawCachedElementPortion=function(t,e,r,a,n,o,i,l){var u=this,s=r.getBoundingBox(e);if(!(s.w===0||s.h===0)){var f=r.getElement(e,s,a,n,o);if(f!=null){var v=l(u,e);if(v===0)return;var h=i(u,e),c=s.x1,g=s.y1,d=s.w,m=s.h,p,y,E,T,w;if(h!==0){var x=r.getRotationPoint(e);E=x.x,T=x.y,t.translate(E,T),t.rotate(h),w=u.getImgSmoothing(t),w||u.setImgSmoothing(t,!0);var D=r.getRotationOffset(e);p=D.x,y=D.y}else p=c,y=g;var L;v!==1&&(L=t.globalAlpha,t.globalAlpha=L*v),t.drawImage(f.texture.canvas,f.x,0,f.width,f.height,p,y,d,m),v!==1&&(t.globalAlpha=L),h!==0&&(t.rotate(-h),t.translate(-E,-T),w||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var C0=function(){return 0},T0=function(e,r){return e.getTextAngle(r,null)},D0=function(e,r){return e.getTextAngle(r,"source")},S0=function(e,r){return e.getTextAngle(r,"target")},L0=function(e,r){return r.effectiveOpacity()},ui=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Ht.drawCachedElement=function(t,e,r,a,n,o){var i=this,l=i.data,u=l.eleTxrCache,s=l.lblTxrCache,f=l.slbTxrCache,v=l.tlbTxrCache,h=e.boundingBox(),c=o===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!a||Ai(h,a))){var g=e.isEdge(),d=e.element()._private.rscratch.badLine;i.drawElementUnderlay(t,e),i.drawCachedElementPortion(t,e,u,r,n,c,C0,L0),(!g||!d)&&i.drawCachedElementPortion(t,e,s,r,n,c,T0,ui),g&&!d&&(i.drawCachedElementPortion(t,e,f,r,n,c,D0,ui),i.drawCachedElementPortion(t,e,v,r,n,c,S0,ui)),i.drawElementOverlay(t,e)}};Ht.drawElements=function(t,e){for(var r=this,a=0;a<e.length;a++){var n=e[a];r.drawElement(t,n)}};Ht.drawCachedElements=function(t,e,r,a){for(var n=this,o=0;o<e.length;o++){var i=e[o];n.drawCachedElement(t,i,r,a)}};Ht.drawCachedNodes=function(t,e,r,a){for(var n=this,o=0;o<e.length;o++){var i=e[o];i.isNode()&&n.drawCachedElement(t,i,r,a)}};Ht.drawLayeredElements=function(t,e,r,a){var n=this,o=n.data.lyrTxrCache.getLayers(e,r);if(o)for(var i=0;i<o.length;i++){var l=o[i],u=l.bb;u.w===0||u.h===0||t.drawImage(l.canvas,u.x1,u.y1,u.w,u.h)}else n.drawCachedElements(t,e,r,a)};var Qt={};Qt.drawEdge=function(t,e,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this,l=e._private.rscratch;if(!(o&&!e.visible())&&!(l.badLine||l.allpts==null||isNaN(l.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var s=o?e.pstyle("opacity").value:1,f=o?e.pstyle("line-opacity").value:1,v=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,c=e.pstyle("width").pfValue,g=e.pstyle("line-cap").value,d=s*f,m=s*f,p=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d;v==="straight-triangle"?(i.eleStrokeStyle(t,e,b),i.drawEdgeTrianglePath(e,t,l.allpts)):(t.lineWidth=c,t.lineCap=g,i.eleStrokeStyle(t,e,b),i.drawEdgePath(e,t,l.allpts,h),t.lineCap="butt")},y=function(){n&&i.drawEdgeOverlay(t,e)},E=function(){n&&i.drawEdgeUnderlay(t,e)},T=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;i.drawArrowheads(t,e,b)},w=function(){i.drawElementText(t,e,null,a)};t.lineJoin="round";var x=e.pstyle("ghost").value==="yes";if(x){var D=e.pstyle("ghost-offset-x").pfValue,L=e.pstyle("ghost-offset-y").pfValue,N=e.pstyle("ghost-opacity").value,A=d*N;t.translate(D,L),p(A),T(A),t.translate(-D,-L)}E(),p(),T(),y(),w(),r&&t.translate(u.x1,u.y1)}};var Uf=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,a){if(a.visible()){var n=a.pstyle("".concat(e,"-opacity")).value;if(n!==0){var o=this,i=o.usePaths(),l=a._private.rscratch,u=a.pstyle("".concat(e,"-padding")).pfValue,s=2*u,f=a.pstyle("".concat(e,"-color")).value;r.lineWidth=s,l.edgeType==="self"&&!i?r.lineCap="butt":r.lineCap="round",o.colorStrokeStyle(r,f[0],f[1],f[2],n),o.drawEdgePath(a,r,l.allpts,"solid")}}}};Qt.drawEdgeOverlay=Uf("overlay");Qt.drawEdgeUnderlay=Uf("underlay");Qt.drawEdgePath=function(t,e,r,a){var n=t._private.rscratch,o=e,i,l=!1,u=this.usePaths(),s=t.pstyle("line-dash-pattern").pfValue,f=t.pstyle("line-dash-offset").pfValue;if(u){var v=r.join("$"),h=n.pathCacheKey&&n.pathCacheKey===v;h?(i=e=n.pathCache,l=!0):(i=e=new Path2D,n.pathCacheKey=v,n.pathCache=i)}if(o.setLineDash)switch(a){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(s),o.lineDashOffset=f;break;case"solid":o.setLineDash([]);break}if(!l&&!n.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),n.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var c=2;c+3<r.length;c+=4)e.quadraticCurveTo(r[c],r[c+1],r[c+2],r[c+3]);break;case"straight":case"segments":case"haystack":for(var g=2;g+1<r.length;g+=2)e.lineTo(r[g],r[g+1]);break}e=o,u?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])};Qt.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var a=t.pstyle("width").pfValue,n=0;n+1<r.length;n+=2){var o=[r[n+2]-r[n],r[n+3]-r[n+1]],i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=[o[1]/i,-o[0]/i],u=[l[0]*a/2,l[1]*a/2];e.beginPath(),e.moveTo(r[n]-u[0],r[n+1]-u[1]),e.lineTo(r[n]+u[0],r[n+1]+u[1]),e.lineTo(r[n+2],r[n+3]),e.closePath(),e.fill()}};Qt.drawArrowheads=function(t,e,r){var a=e._private.rscratch,n=a.edgeType==="haystack";n||this.drawArrowhead(t,e,"source",a.arrowStartX,a.arrowStartY,a.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",a.midX,a.midY,a.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",a.midX,a.midY,a.midsrcArrowAngle,r),n||this.drawArrowhead(t,e,"target",a.arrowEndX,a.arrowEndY,a.tgtArrowAngle,r)};Qt.drawArrowhead=function(t,e,r,a,n,o,i){if(!(isNaN(a)||a==null||isNaN(n)||n==null||isNaN(o)||o==null)){var l=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var s=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(r+"-arrow-fill").value,v=e.pstyle("width").pfValue,h=e.pstyle("opacity").value;i===void 0&&(i=h);var c=t.globalCompositeOperation;(i!==1||f==="hollow")&&(t.globalCompositeOperation="destination-out",l.colorFillStyle(t,255,255,255,1),l.colorStrokeStyle(t,255,255,255,1),l.drawArrowShape(e,t,s,v,u,a,n,o),t.globalCompositeOperation=c);var g=e.pstyle(r+"-arrow-color").value;l.colorFillStyle(t,g[0],g[1],g[2],i),l.colorStrokeStyle(t,g[0],g[1],g[2],i),l.drawArrowShape(e,t,f,v,u,a,n,o)}}};Qt.drawArrowShape=function(t,e,r,a,n,o,i,l){var u=this,s=this.usePaths()&&n!=="triangle-cross",f=!1,v,h=e,c={x:o,y:i},g=t.pstyle("arrow-scale").value,d=this.getArrowWidth(a,g),m=u.arrowShapes[n];if(s){var p=u.arrowPathCache=u.arrowPathCache||[],y=br(n),E=p[y];E!=null?(v=e=E,f=!0):(v=e=new Path2D,p[y]=v)}f||(e.beginPath&&e.beginPath(),s?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,d,l,c,a),e.closePath&&e.closePath()),e=h,s&&(e.translate(o,i),e.rotate(l),e.scale(d,d)),(r==="filled"||r==="both")&&(s?e.fill(v):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=(m.matchEdgeWidth?a:1)/(s?d:1),e.lineJoin="miter",s?e.stroke(v):e.stroke()),s&&(e.scale(1/d,1/d),e.rotate(-l),e.translate(-o,-i))};var Hi={};Hi.safeDrawImage=function(t,e,r,a,n,o,i,l,u,s){if(!(n<=0||o<=0||u<=0||s<=0))try{t.drawImage(e,r,a,n,o,i,l,u,s)}catch(f){We(f)}};Hi.drawInscribedImage=function(t,e,r,a,n){var o=this,i=r.position(),l=i.x,u=i.y,s=r.cy().style(),f=s.getIndexedStyle.bind(s),v=f(r,"background-fit","value",a),h=f(r,"background-repeat","value",a),c=r.width(),g=r.height(),d=r.padding()*2,m=c+(f(r,"background-width-relative-to","value",a)==="inner"?0:d),p=g+(f(r,"background-height-relative-to","value",a)==="inner"?0:d),y=r._private.rscratch,E=f(r,"background-clip","value",a),T=E==="node",w=f(r,"background-image-opacity","value",a)*n,x=f(r,"background-image-smoothing","value",a),D=e.width||e.cachedW,L=e.height||e.cachedH;(D==null||L==null)&&(document.body.appendChild(e),D=e.cachedW=e.width||e.offsetWidth,L=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var N=D,A=L;if(f(r,"background-width","value",a)!=="auto"&&(f(r,"background-width","units",a)==="%"?N=f(r,"background-width","pfValue",a)*m:N=f(r,"background-width","pfValue",a)),f(r,"background-height","value",a)!=="auto"&&(f(r,"background-height","units",a)==="%"?A=f(r,"background-height","pfValue",a)*p:A=f(r,"background-height","pfValue",a)),!(N===0||A===0)){if(v==="contain"){var P=Math.min(m/N,p/A);N*=P,A*=P}else if(v==="cover"){var P=Math.max(m/N,p/A);N*=P,A*=P}var b=l-m/2,M=f(r,"background-position-x","units",a),C=f(r,"background-position-x","pfValue",a);M==="%"?b+=(m-N)*C:b+=C;var O=f(r,"background-offset-x","units",a),S=f(r,"background-offset-x","pfValue",a);O==="%"?b+=(m-N)*S:b+=S;var R=u-p/2,B=f(r,"background-position-y","units",a),z=f(r,"background-position-y","pfValue",a);B==="%"?R+=(p-A)*z:R+=z;var G=f(r,"background-offset-y","units",a),k=f(r,"background-offset-y","pfValue",a);G==="%"?R+=(p-A)*k:R+=k,y.pathCache&&(b-=l,R-=u,l=0,u=0);var H=t.globalAlpha;t.globalAlpha=w;var $=o.getImgSmoothing(t),V=!1;if(x==="no"&&$?(o.setImgSmoothing(t,!1),V=!0):x==="yes"&&!$&&(o.setImgSmoothing(t,!0),V=!0),h==="no-repeat")T&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(r)].draw(t,l,u,m,p),t.clip())),o.safeDrawImage(t,e,0,0,D,L,b,R,N,A),T&&t.restore();else{var X=t.createPattern(e,h);t.fillStyle=X,o.nodeShapes[o.getNodeShape(r)].draw(t,l,u,m,p),t.translate(b,R),t.fill(),t.translate(-b,-R)}t.globalAlpha=H,V&&o.setImgSmoothing(t,$)}};var Lr={};Lr.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),a=this.getPixelRatio(),n=Math.ceil(Mi(r*a));e=Math.pow(2,n)}var o=t.pstyle("font-size").pfValue*e,i=t.pstyle("min-zoomed-font-size").pfValue;return!(o<i)};Lr.drawElementText=function(t,e,r,a,n){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this;if(a==null){if(o&&!i.eleTextBiggerThanMin(e))return}else if(a===!1)return;if(e.isNode()){var l=e.pstyle("label");if(!l||!l.value)return;var u=i.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var s=e.element()._private.rscratch.badLine,f=e.pstyle("label"),v=e.pstyle("source-label"),h=e.pstyle("target-label");if(s||(!f||!f.value)&&(!v||!v.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var c=!r,g;r&&(g=r,t.translate(-g.x1,-g.y1)),n==null?(i.drawText(t,e,null,c,o),e.isEdge()&&(i.drawText(t,e,"source",c,o),i.drawText(t,e,"target",c,o))):i.drawText(t,e,n,c,o),r&&t.translate(g.x1,g.y1)};Lr.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Lr.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=e.pstyle("font-style").strValue,n=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,i=e.pstyle("font-weight").strValue,l=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*l,s=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;t.font=a+" "+i+" "+n+" "+o,t.lineJoin="round",this.colorFillStyle(t,s[0],s[1],s[2],l),this.colorStrokeStyle(t,f[0],f[1],f[2],u)};function N0(t,e,r,a,n){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;t.beginPath(),t.moveTo(e+o,r),t.lineTo(e+a-o,r),t.quadraticCurveTo(e+a,r,e+a,r+o),t.lineTo(e+a,r+n-o),t.quadraticCurveTo(e+a,r+n,e+a-o,r+n),t.lineTo(e+o,r+n),t.quadraticCurveTo(e,r+n,e,r+n-o),t.lineTo(e,r+o),t.quadraticCurveTo(e,r,e+o,r),t.closePath(),t.fill()}Lr.getTextAngle=function(t,e){var r,a=t._private,n=a.rscratch,o=e?e+"-":"",i=t.pstyle(o+"text-rotation"),l=Ft(n,"labelAngle",e);return i.strValue==="autorotate"?r=t.isEdge()?l:0:i.strValue==="none"?r=0:r=i.pfValue,r};Lr.drawText=function(t,e,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,i=o.rscratch,l=n?e.effectiveOpacity():1;if(!(n&&(l===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Ft(i,"labelX",r),s=Ft(i,"labelY",r),f,v,h=this.getLabelText(e,r);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(s)){this.setupTextStyle(t,e,n);var c=r?r+"-":"",g=Ft(i,"labelWidth",r),d=Ft(i,"labelHeight",r),m=e.pstyle(c+"text-margin-x").pfValue,p=e.pstyle(c+"text-margin-y").pfValue,y=e.isEdge(),E=e.pstyle("text-halign").value,T=e.pstyle("text-valign").value;y&&(E="center",T="center"),u+=m,s+=p;var w;switch(a?w=this.getTextAngle(e,r):w=0,w!==0&&(f=u,v=s,t.translate(f,v),t.rotate(w),u=0,s=0),T){case"top":break;case"center":s+=d/2;break;case"bottom":s+=d;break}var x=e.pstyle("text-background-opacity").value,D=e.pstyle("text-border-opacity").value,L=e.pstyle("text-border-width").pfValue,N=e.pstyle("text-background-padding").pfValue;if(x>0||L>0&&D>0){var A=u-N;switch(E){case"left":A-=g;break;case"center":A-=g/2;break}var P=s-d-N,b=g+2*N,M=d+2*N;if(x>0){var C=t.fillStyle,O=e.pstyle("text-background-color").value;t.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+x*l+")";var S=e.pstyle("text-background-shape").strValue;S.indexOf("round")===0?N0(t,A,P,b,M,2):t.fillRect(A,P,b,M),t.fillStyle=C}if(L>0&&D>0){var R=t.strokeStyle,B=t.lineWidth,z=e.pstyle("text-border-color").value,G=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+z[0]+","+z[1]+","+z[2]+","+D*l+")",t.lineWidth=L,t.setLineDash)switch(G){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=L/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(t.strokeRect(A,P,b,M),G==="double"){var k=L/2;t.strokeRect(A+k,P+k,b-k*2,M-k*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=B,t.strokeStyle=R}}var H=2*e.pstyle("text-outline-width").pfValue;if(H>0&&(t.lineWidth=H),e.pstyle("text-wrap").value==="wrap"){var $=Ft(i,"labelWrapCachedLines",r),V=Ft(i,"labelLineHeight",r),X=g/2,U=this.getLabelJustification(e);switch(U==="auto"||(E==="left"?U==="left"?u+=-g:U==="center"&&(u+=-X):E==="center"?U==="left"?u+=-X:U==="right"&&(u+=X):E==="right"&&(U==="center"?u+=X:U==="right"&&(u+=g))),T){case"top":s-=($.length-1)*V;break;case"center":case"bottom":s-=($.length-1)*V;break}for(var F=0;F<$.length;F++)H>0&&t.strokeText($[F],u,s),t.fillText($[F],u,s),s+=V}else H>0&&t.strokeText(h,u,s),t.fillText(h,u,s);w!==0&&(t.rotate(-w),t.translate(-f,-v))}}};var na={};na.drawNode=function(t,e,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this,l,u,s=e._private,f=s.rscratch,v=e.position();if(!(!ye(v.x)||!ye(v.y))&&!(o&&!e.visible())){var h=o?e.effectiveOpacity():1,c=i.usePaths(),g,d=!1,m=e.padding();l=e.width()+2*m,u=e.height()+2*m;var p;r&&(p=r,t.translate(-p.x1,-p.y1));for(var y=e.pstyle("background-image"),E=y.value,T=new Array(E.length),w=new Array(E.length),x=0,D=0;D<E.length;D++){var L=E[D],N=T[D]=L!=null&&L!=="none";if(N){var A=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",D);x++,w[D]=i.getCachedImage(L,A,function(){s.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var P=e.pstyle("background-blacken").value,b=e.pstyle("border-width").pfValue,M=e.pstyle("background-opacity").value*h,C=e.pstyle("border-color").value,O=e.pstyle("border-style").value,S=e.pstyle("border-opacity").value*h;t.lineJoin="miter";var R=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;i.eleFillStyle(t,e,_)},B=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;i.colorStrokeStyle(t,C[0],C[1],C[2],_)},z=e.pstyle("shape").strValue,G=e.pstyle("shape-polygon-points").pfValue;if(c){t.translate(v.x,v.y);var k=i.nodePathCache=i.nodePathCache||[],H=ku(z==="polygon"?z+","+G.join(","):z,""+u,""+l),$=k[H];$!=null?(g=$,d=!0,f.pathCache=g):(g=new Path2D,k[H]=f.pathCache=g)}var V=function(){if(!d){var _=v;c&&(_={x:0,y:0}),i.nodeShapes[i.getNodeShape(e)].draw(g||t,_.x,_.y,l,u)}c?t.fill(g):t.fill()},X=function(){for(var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ee=s.backgrounding,me=0,pe=0;pe<w.length;pe++){var re=e.cy().style().getIndexedStyle(e,"background-image-containment","value",pe);if(ue&&re==="over"||!ue&&re==="inside"){me++;continue}T[pe]&&w[pe].complete&&!w[pe].error&&(me++,i.drawInscribedImage(t,w[pe],e,pe,_))}s.backgrounding=me!==x,Ee!==s.backgrounding&&e.updateStyle(!1)},U=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;i.hasPie(e)&&(i.drawPie(t,e,ue),_&&(c||i.nodeShapes[i.getNodeShape(e)].draw(t,v.x,v.y,l,u)))},F=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,ue=(P>0?P:-P)*_,Ee=P>0?0:255;P!==0&&(i.colorFillStyle(t,Ee,Ee,Ee,ue),c?t.fill(g):t.fill())},Y=function(){if(b>0){if(t.lineWidth=b,t.lineCap="butt",t.setLineDash)switch(O){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}if(c?t.stroke(g):t.stroke(),O==="double"){t.lineWidth=b/3;var _=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",c?t.stroke(g):t.stroke(),t.globalCompositeOperation=_}t.setLineDash&&t.setLineDash([])}},q=function(){n&&i.drawNodeOverlay(t,e,v,l,u)},K=function(){n&&i.drawNodeUnderlay(t,e,v,l,u)},j=function(){i.drawElementText(t,e,null,a)},ge=e.pstyle("ghost").value==="yes";if(ge){var Ce=e.pstyle("ghost-offset-x").pfValue,Q=e.pstyle("ghost-offset-y").pfValue,le=e.pstyle("ghost-opacity").value,de=le*h;t.translate(Ce,Q),R(le*M),V(),X(de,!0),B(le*S),Y(),U(P!==0||b!==0),X(de,!1),F(de),t.translate(-Ce,-Q)}c&&t.translate(-v.x,-v.y),K(),c&&t.translate(v.x,v.y),R(),V(),X(h,!0),B(),Y(),U(P!==0||b!==0),X(h,!1),F(),c&&t.translate(-v.x,-v.y),j(),q(),r&&t.translate(p.x1,p.y1)}};var Yf=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,a,n,o,i){var l=this;if(a.visible()){var u=a.pstyle("".concat(e,"-padding")).pfValue,s=a.pstyle("".concat(e,"-opacity")).value,f=a.pstyle("".concat(e,"-color")).value,v=a.pstyle("".concat(e,"-shape")).value;if(s>0){if(n=n||a.position(),o==null||i==null){var h=a.padding();o=a.width()+2*h,i=a.height()+2*h}l.colorFillStyle(r,f[0],f[1],f[2],s),l.nodeShapes[v].draw(r,n.x,n.y,o+u*2,i+u*2),r.fill()}}}};na.drawNodeOverlay=Yf("overlay");na.drawNodeUnderlay=Yf("underlay");na.hasPie=function(t){return t=t[0],t._private.hasPie};na.drawPie=function(t,e,r,a){e=e[0],a=a||e.position();var n=e.cy().style(),o=e.pstyle("pie-size"),i=a.x,l=a.y,u=e.width(),s=e.height(),f=Math.min(u,s)/2,v=0,h=this.usePaths();h&&(i=0,l=0),o.units==="%"?f=f*o.pfValue:o.pfValue!==void 0&&(f=o.pfValue/2);for(var c=1;c<=n.pieBackgroundN;c++){var g=e.pstyle("pie-"+c+"-background-size").value,d=e.pstyle("pie-"+c+"-background-color").value,m=e.pstyle("pie-"+c+"-background-opacity").value*r,p=g/100;p+v>1&&(p=1-v);var y=1.5*Math.PI+2*Math.PI*v,E=2*Math.PI*p,T=y+E;g===0||v>=1||v+p>1||(t.beginPath(),t.moveTo(i,l),t.arc(i,l,f,y,T),t.closePath(),this.colorFillStyle(t,d[0],d[1],d[2],m),t.fill(),v+=p)}};var Mt={},M0=100;Mt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Mt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,a,n=0;n<e.length;n++)if(a=e[n],a.context===t){r=!1;break}return r&&(a={context:t},e.push(a)),a};Mt.createGradientStyleFor=function(t,e,r,a,n){var o,i=this.usePaths(),l=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(a==="radial-gradient")if(r.isEdge()){var s=r.sourceEndpoint(),f=r.targetEndpoint(),v=r.midpoint(),h=wr(s,v),c=wr(f,v);o=t.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(h,c))}else{var g=i?{x:0,y:0}:r.position(),d=r.paddedWidth(),m=r.paddedHeight();o=t.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(d,m))}else if(r.isEdge()){var p=r.sourceEndpoint(),y=r.targetEndpoint();o=t.createLinearGradient(p.x,p.y,y.x,y.y)}else{var E=i?{x:0,y:0}:r.position(),T=r.paddedWidth(),w=r.paddedHeight(),x=T/2,D=w/2,L=r.pstyle("background-gradient-direction").value;switch(L){case"to-bottom":o=t.createLinearGradient(E.x,E.y-D,E.x,E.y+D);break;case"to-top":o=t.createLinearGradient(E.x,E.y+D,E.x,E.y-D);break;case"to-left":o=t.createLinearGradient(E.x+x,E.y,E.x-x,E.y);break;case"to-right":o=t.createLinearGradient(E.x-x,E.y,E.x+x,E.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(E.x-x,E.y-D,E.x+x,E.y+D);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(E.x-x,E.y+D,E.x+x,E.y-D);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(E.x+x,E.y-D,E.x-x,E.y+D);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(E.x+x,E.y+D,E.x-x,E.y-D);break}}if(!o)return null;for(var N=u.length===l.length,A=l.length,P=0;P<A;P++)o.addColorStop(N?u[P]:P/(A-1),"rgba("+l[P][0]+","+l[P][1]+","+l[P][2]+","+n+")");return o};Mt.gradientFillStyle=function(t,e,r,a){var n=this.createGradientStyleFor(t,"background",e,r,a);if(!n)return null;t.fillStyle=n};Mt.colorFillStyle=function(t,e,r,a,n){t.fillStyle="rgba("+e+","+r+","+a+","+n+")"};Mt.eleFillStyle=function(t,e,r){var a=e.pstyle("background-fill").value;if(a==="linear-gradient"||a==="radial-gradient")this.gradientFillStyle(t,e,a,r);else{var n=e.pstyle("background-color").value;this.colorFillStyle(t,n[0],n[1],n[2],r)}};Mt.gradientStrokeStyle=function(t,e,r,a){var n=this.createGradientStyleFor(t,"line",e,r,a);if(!n)return null;t.strokeStyle=n};Mt.colorStrokeStyle=function(t,e,r,a,n){t.strokeStyle="rgba("+e+","+r+","+a+","+n+")"};Mt.eleStrokeStyle=function(t,e,r){var a=e.pstyle("line-fill").value;if(a==="linear-gradient"||a==="radial-gradient")this.gradientStrokeStyle(t,e,a,r);else{var n=e.pstyle("line-color").value;this.colorStrokeStyle(t,n[0],n[1],n[2],r)}};Mt.matchCanvasSize=function(t){var e=this,r=e.data,a=e.findContainerClientCoords(),n=a[2],o=a[3],i=e.getPixelRatio(),l=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(i=l);var u=n*i,s=o*i,f;if(!(u===e.canvasWidth&&s===e.canvasHeight)){e.fontCaches=null;var v=r.canvasContainer;v.style.width=n+"px",v.style.height=o+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)f=r.canvases[h],f.width=u,f.height=s,f.style.width=n+"px",f.style.height=o+"px";for(var h=0;h<e.BUFFER_COUNT;h++)f=r.bufferCanvases[h],f.width=u,f.height=s,f.style.width=n+"px",f.style.height=o+"px";e.textureMult=1,i<=1&&(f=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=u*e.textureMult,f.height=s*e.textureMult),e.canvasWidth=u,e.canvasHeight=s}};Mt.renderTo=function(t,e,r,a){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:a})};Mt.render=function(t){t=t||Hu();var e=t.forcedContext,r=t.drawAllLayers,a=t.drawOnlyNodeLayer,n=t.forcedZoom,o=t.forcedPan,i=this,l=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=i.cy,s=i.data,f=s.canvasNeedsRedraw,v=i.textureOnViewport&&!e&&(i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming),h=t.motionBlur!==void 0?t.motionBlur:i.motionBlur,c=i.motionBlurPxRatio,g=u.hasCompoundNodes(),d=i.hoverData.draggingEles,m=!!(i.hoverData.selecting||i.touchData.selecting);h=h&&!e&&i.motionBlurEnabled&&!m;var p=h;e||(i.prevPxRatio!==l&&(i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.container),i.redrawHint("eles",!0),i.redrawHint("drag",!0)),i.prevPxRatio=l),!e&&i.motionBlurTimeout&&clearTimeout(i.motionBlurTimeout),h&&(i.mbFrames==null&&(i.mbFrames=0),i.mbFrames++,i.mbFrames<3&&(p=!1),i.mbFrames>i.minMbLowQualFrames&&(i.motionBlurPxRatio=i.mbPxRBlurry)),i.clearingMotionBlur&&(i.motionBlurPxRatio=1),i.textureDrawLastFrame&&!v&&(f[i.NODE]=!0,f[i.SELECT_BOX]=!0);var y=u.style(),E=u.zoom(),T=n!==void 0?n:E,w=u.pan(),x={x:w.x,y:w.y},D={zoom:E,pan:{x:w.x,y:w.y}},L=i.prevViewport,N=L===void 0||D.zoom!==L.zoom||D.pan.x!==L.pan.x||D.pan.y!==L.pan.y;!N&&!(d&&!g)&&(i.motionBlurPxRatio=1),o&&(x=o),T*=l,x.x*=l,x.y*=l;var A=i.getCachedZSortedEles();function P(Q,le,de,ie,_){var ue=Q.globalCompositeOperation;Q.globalCompositeOperation="destination-out",i.colorFillStyle(Q,255,255,255,i.motionBlurTransparency),Q.fillRect(le,de,ie,_),Q.globalCompositeOperation=ue}function b(Q,le){var de,ie,_,ue;!i.clearingMotionBlur&&(Q===s.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]||Q===s.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG])?(de={x:w.x*c,y:w.y*c},ie=E*c,_=i.canvasWidth*c,ue=i.canvasHeight*c):(de=x,ie=T,_=i.canvasWidth,ue=i.canvasHeight),Q.setTransform(1,0,0,1,0,0),le==="motionBlur"?P(Q,0,0,_,ue):!e&&(le===void 0||le)&&Q.clearRect(0,0,_,ue),r||(Q.translate(de.x,de.y),Q.scale(ie,ie)),o&&Q.translate(o.x,o.y),n&&Q.scale(n,n)}if(v||(i.textureDrawLastFrame=!1),v){if(i.textureDrawLastFrame=!0,!i.textureCache){i.textureCache={},i.textureCache.bb=u.mutableElements().boundingBox(),i.textureCache.texture=i.data.bufferCanvases[i.TEXTURE_BUFFER];var M=i.data.bufferContexts[i.TEXTURE_BUFFER];M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,i.canvasWidth*i.textureMult,i.canvasHeight*i.textureMult),i.render({forcedContext:M,drawOnlyNodeLayer:!0,forcedPxRatio:l*i.textureMult});var D=i.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:i.canvasWidth,height:i.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}f[i.DRAG]=!1,f[i.NODE]=!1;var C=s.contexts[i.NODE],O=i.textureCache.texture,D=i.textureCache.viewport;C.setTransform(1,0,0,1,0,0),h?P(C,0,0,D.width,D.height):C.clearRect(0,0,D.width,D.height);var S=y.core("outside-texture-bg-color").value,R=y.core("outside-texture-bg-opacity").value;i.colorFillStyle(C,S[0],S[1],S[2],R),C.fillRect(0,0,D.width,D.height);var E=u.zoom();b(C,!1),C.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/l,D.height/D.zoom/l),C.drawImage(O,D.mpan.x,D.mpan.y,D.width/D.zoom/l,D.height/D.zoom/l)}else i.textureOnViewport&&!e&&(i.textureCache=null);var B=u.extent(),z=i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming||i.hoverData.draggingEles||i.cy.animated(),G=i.hideEdgesOnViewport&&z,k=[];if(k[i.NODE]=!f[i.NODE]&&h&&!i.clearedForMotionBlur[i.NODE]||i.clearingMotionBlur,k[i.NODE]&&(i.clearedForMotionBlur[i.NODE]=!0),k[i.DRAG]=!f[i.DRAG]&&h&&!i.clearedForMotionBlur[i.DRAG]||i.clearingMotionBlur,k[i.DRAG]&&(i.clearedForMotionBlur[i.DRAG]=!0),f[i.NODE]||r||a||k[i.NODE]){var H=h&&!k[i.NODE]&&c!==1,C=e||(H?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]:s.contexts[i.NODE]),$=h&&!H?"motionBlur":void 0;b(C,$),G?i.drawCachedNodes(C,A.nondrag,l,B):i.drawLayeredElements(C,A.nondrag,l,B),i.debug&&i.drawDebugPoints(C,A.nondrag),!r&&!h&&(f[i.NODE]=!1)}if(!a&&(f[i.DRAG]||r||k[i.DRAG])){var H=h&&!k[i.DRAG]&&c!==1,C=e||(H?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG]:s.contexts[i.DRAG]);b(C,h&&!H?"motionBlur":void 0),G?i.drawCachedNodes(C,A.drag,l,B):i.drawCachedElements(C,A.drag,l,B),i.debug&&i.drawDebugPoints(C,A.drag),!r&&!h&&(f[i.DRAG]=!1)}if(i.showFps||!a&&f[i.SELECT_BOX]&&!r){var C=e||s.contexts[i.SELECT_BOX];if(b(C),i.selection[4]==1&&(i.hoverData.selecting||i.touchData.selecting)){var E=i.cy.zoom(),V=y.core("selection-box-border-width").value/E;C.lineWidth=V,C.fillStyle="rgba("+y.core("selection-box-color").value[0]+","+y.core("selection-box-color").value[1]+","+y.core("selection-box-color").value[2]+","+y.core("selection-box-opacity").value+")",C.fillRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]),V>0&&(C.strokeStyle="rgba("+y.core("selection-box-border-color").value[0]+","+y.core("selection-box-border-color").value[1]+","+y.core("selection-box-border-color").value[2]+","+y.core("selection-box-opacity").value+")",C.strokeRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]))}if(s.bgActivePosistion&&!i.hoverData.selecting){var E=i.cy.zoom(),X=s.bgActivePosistion;C.fillStyle="rgba("+y.core("active-bg-color").value[0]+","+y.core("active-bg-color").value[1]+","+y.core("active-bg-color").value[2]+","+y.core("active-bg-opacity").value+")",C.beginPath(),C.arc(X.x,X.y,y.core("active-bg-size").pfValue/E,0,2*Math.PI),C.fill()}var U=i.lastRedrawTime;if(i.showFps&&U){U=Math.round(U);var F=Math.round(1e3/U);C.setTransform(1,0,0,1,0,0),C.fillStyle="rgba(255, 0, 0, 0.75)",C.strokeStyle="rgba(255, 0, 0, 0.75)",C.lineWidth=1,C.fillText("1 frame = "+U+" ms = "+F+" fps",0,20);var Y=60;C.strokeRect(0,30,250,20),C.fillRect(0,30,250*Math.min(F/Y,1),20)}r||(f[i.SELECT_BOX]=!1)}if(h&&c!==1){var q=s.contexts[i.NODE],K=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_NODE],j=s.contexts[i.DRAG],ge=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_DRAG],Ce=function(le,de,ie){le.setTransform(1,0,0,1,0,0),ie||!p?le.clearRect(0,0,i.canvasWidth,i.canvasHeight):P(le,0,0,i.canvasWidth,i.canvasHeight);var _=c;le.drawImage(de,0,0,i.canvasWidth*_,i.canvasHeight*_,0,0,i.canvasWidth,i.canvasHeight)};(f[i.NODE]||k[i.NODE])&&(Ce(q,K,k[i.NODE]),f[i.NODE]=!1),(f[i.DRAG]||k[i.DRAG])&&(Ce(j,ge,k[i.DRAG]),f[i.DRAG]=!1)}i.prevViewport=D,i.clearingMotionBlur&&(i.clearingMotionBlur=!1,i.motionBlurCleared=!0,i.motionBlur=!0),h&&(i.motionBlurTimeout=setTimeout(function(){i.motionBlurTimeout=null,i.clearedForMotionBlur[i.NODE]=!1,i.clearedForMotionBlur[i.DRAG]=!1,i.motionBlur=!1,i.clearingMotionBlur=!v,i.mbFrames=0,f[i.NODE]=!0,f[i.DRAG]=!0,i.redraw()},M0)),e||u.emit("render")};var dr={};dr.drawPolygonPath=function(t,e,r,a,n,o){var i=a/2,l=n/2;t.beginPath&&t.beginPath(),t.moveTo(e+i*o[0],r+l*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+i*o[u*2],r+l*o[u*2+1]);t.closePath()};dr.drawRoundPolygonPath=function(t,e,r,a,n,o){var i=a/2,l=n/2,u=Oi(a,n);t.beginPath&&t.beginPath();for(var s=0;s<o.length/4;s++){var f=void 0,v=void 0;s===0?f=o.length-2:f=s*4-2,v=s*4+2;var h=e+i*o[s*4],c=r+l*o[s*4+1],g=-o[f]*o[v]-o[f+1]*o[v+1],d=u/Math.tan(Math.acos(g)/2),m=h-d*o[f],p=c-d*o[f+1],y=h+d*o[v],E=c+d*o[v+1];s===0?t.moveTo(m,p):t.lineTo(m,p),t.arcTo(h,c,y,E,u)}t.closePath()};dr.drawRoundRectanglePath=function(t,e,r,a,n){var o=a/2,i=n/2,l=Va(a,n);t.beginPath&&t.beginPath(),t.moveTo(e,r-i),t.arcTo(e+o,r-i,e+o,r,l),t.arcTo(e+o,r+i,e,r+i,l),t.arcTo(e-o,r+i,e-o,r,l),t.arcTo(e-o,r-i,e,r-i,l),t.lineTo(e,r-i),t.closePath()};dr.drawBottomRoundRectanglePath=function(t,e,r,a,n){var o=a/2,i=n/2,l=Va(a,n);t.beginPath&&t.beginPath(),t.moveTo(e,r-i),t.lineTo(e+o,r-i),t.lineTo(e+o,r),t.arcTo(e+o,r+i,e,r+i,l),t.arcTo(e-o,r+i,e-o,r,l),t.lineTo(e-o,r-i),t.lineTo(e,r-i),t.closePath()};dr.drawCutRectanglePath=function(t,e,r,a,n){var o=a/2,i=n/2,l=Zu();t.beginPath&&t.beginPath(),t.moveTo(e-o+l,r-i),t.lineTo(e+o-l,r-i),t.lineTo(e+o,r-i+l),t.lineTo(e+o,r+i-l),t.lineTo(e+o-l,r+i),t.lineTo(e-o+l,r+i),t.lineTo(e-o,r+i-l),t.lineTo(e-o,r-i+l),t.closePath()};dr.drawBarrelPath=function(t,e,r,a,n){var o=a/2,i=n/2,l=e-o,u=e+o,s=r-i,f=r+i,v=vi(a,n),h=v.widthOffset,c=v.heightOffset,g=v.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(l,s+c),t.lineTo(l,f-c),t.quadraticCurveTo(l+g,f,l+h,f),t.lineTo(u-h,f),t.quadraticCurveTo(u-g,f,u,f-c),t.lineTo(u,s+c),t.quadraticCurveTo(u-g,s,u-h,s),t.lineTo(l+h,s),t.quadraticCurveTo(l+g,s,l,s+c),t.closePath()};var Cu=Math.sin(0),Tu=Math.cos(0),Ei={},bi={},qf=Math.PI/40;for(pr=0*Math.PI;pr<2*Math.PI;pr+=qf)Ei[pr]=Math.sin(pr),bi[pr]=Math.cos(pr);var pr;dr.drawEllipsePath=function(t,e,r,a,n){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,a/2,n/2,0,0,2*Math.PI);else for(var o,i,l=a/2,u=n/2,s=0*Math.PI;s<2*Math.PI;s+=qf)o=e-l*Ei[s]*Cu+l*bi[s]*Tu,i=r+u*bi[s]*Cu+u*Ei[s]*Tu,s===0?t.moveTo(o,i):t.lineTo(o,i);t.closePath()};var Wa={};Wa.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};Wa.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),a=r.boundingBox(),n=this.findContainerClientCoords(),o=t.full?Math.ceil(a.w):n[2],i=t.full?Math.ceil(a.h):n[3],l=ye(t.maxWidth)||ye(t.maxHeight),u=this.getPixelRatio(),s=1;if(t.scale!==void 0)o*=t.scale,i*=t.scale,s=t.scale;else if(l){var f=1/0,v=1/0;ye(t.maxWidth)&&(f=s*t.maxWidth/o),ye(t.maxHeight)&&(v=s*t.maxHeight/i),s=Math.min(f,v),o*=s,i*=s}l||(o*=u,i*=u,s*=u);var h=document.createElement("canvas");h.width=o,h.height=i,h.style.width=o+"px",h.style.height=i+"px";var c=h.getContext("2d");if(o>0&&i>0){c.clearRect(0,0,o,i),c.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(t.full)c.translate(-a.x1*s,-a.y1*s),c.scale(s,s),this.drawElements(c,g),c.scale(1/s,1/s),c.translate(a.x1*s,a.y1*s);else{var d=e.pan(),m={x:d.x*s,y:d.y*s};s*=e.zoom(),c.translate(m.x,m.y),c.scale(s,s),this.drawElements(c,g),c.scale(1/s,1/s),c.translate(-m.x,-m.y)}t.bg&&(c.globalCompositeOperation="destination-over",c.fillStyle=t.bg,c.rect(0,0,o,i),c.fill())}return h};function A0(t,e){for(var r=atob(t),a=new ArrayBuffer(r.length),n=new Uint8Array(a),o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return new Blob([a],{type:e})}function Du(t){var e=t.indexOf(",");return t.substr(e+1)}function Wf(t,e,r){var a=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new jr(function(n,o){try{e.toBlob(function(i){i!=null?n(i):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(i){o(i)}});case"blob":return A0(Du(a()),r);case"base64":return Du(a());case"base64uri":default:return a()}}Wa.png=function(t){return Wf(t,this.bufferCanvasImage(t),"image/png")};Wa.jpg=function(t){return Wf(t,this.bufferCanvasImage(t),"image/jpeg")};var Xf={};Xf.nodeShapeImpl=function(t,e,r,a,n,o,i){switch(t){case"ellipse":return this.drawEllipsePath(e,r,a,n,o);case"polygon":return this.drawPolygonPath(e,r,a,n,o,i);case"round-polygon":return this.drawRoundPolygonPath(e,r,a,n,o,i);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,a,n,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,a,n,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,a,n,o);case"barrel":return this.drawBarrelPath(e,r,a,n,o)}};var O0=$f,He=$f.prototype;He.CANVAS_LAYERS=3;He.SELECT_BOX=0;He.DRAG=1;He.NODE=2;He.BUFFER_COUNT=3;He.TEXTURE_BUFFER=0;He.MOTIONBLUR_BUFFER_NODE=1;He.MOTIONBLUR_BUFFER_DRAG=2;function $f(t){var e=this;e.data={canvases:new Array(He.CANVAS_LAYERS),contexts:new Array(He.CANVAS_LAYERS),canvasNeedsRedraw:new Array(He.CANVAS_LAYERS),bufferCanvases:new Array(He.BUFFER_COUNT),bufferContexts:new Array(He.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=a,n.position="relative",n.zIndex="0",n.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[r]=a;var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};cg()&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var l=0;l<He.CANVAS_LAYERS;l++){var u=e.data.canvases[l]=document.createElement("canvas");e.data.contexts[l]=u.getContext("2d"),Object.keys(i).forEach(function(U){u.style[U]=i[U]}),u.style.position="absolute",u.setAttribute("data-id","layer"+l),u.style.zIndex=String(He.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[He.NODE].setAttribute("data-id","layer"+He.NODE+"-node"),e.data.canvases[He.SELECT_BOX].setAttribute("data-id","layer"+He.SELECT_BOX+"-selectbox"),e.data.canvases[He.DRAG].setAttribute("data-id","layer"+He.DRAG+"-drag");for(var l=0;l<He.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=document.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var s=Lt(),f=function(F){return{x:(F.x1+F.x2)/2,y:(F.y1+F.y2)/2}},v=function(F){return{x:-F.w/2,y:-F.h/2}},h=function(F){var Y=F[0]._private,q=Y.oldBackgroundTimestamp===Y.backgroundTimestamp;return!q},c=function(F){return F[0]._private.nodeKey},g=function(F){return F[0]._private.labelStyleKey},d=function(F){return F[0]._private.sourceLabelStyleKey},m=function(F){return F[0]._private.targetLabelStyleKey},p=function(F,Y,q,K,j){return e.drawElement(F,Y,q,!1,!1,j)},y=function(F,Y,q,K,j){return e.drawElementText(F,Y,q,K,"main",j)},E=function(F,Y,q,K,j){return e.drawElementText(F,Y,q,K,"source",j)},T=function(F,Y,q,K,j){return e.drawElementText(F,Y,q,K,"target",j)},w=function(F){return F.boundingBox(),F[0]._private.bodyBounds},x=function(F){return F.boundingBox(),F[0]._private.labelBounds.main||s},D=function(F){return F.boundingBox(),F[0]._private.labelBounds.source||s},L=function(F){return F.boundingBox(),F[0]._private.labelBounds.target||s},N=function(F,Y){return Y},A=function(F){return f(w(F))},P=function(F,Y,q){var K=F?F+"-":"";return{x:Y.x+q.pstyle(K+"text-margin-x").pfValue,y:Y.y+q.pstyle(K+"text-margin-y").pfValue}},b=function(F,Y,q){var K=F[0]._private.rscratch;return{x:K[Y],y:K[q]}},M=function(F){return P("",b(F,"labelX","labelY"),F)},C=function(F){return P("source",b(F,"sourceLabelX","sourceLabelY"),F)},O=function(F){return P("target",b(F,"targetLabelX","targetLabelY"),F)},S=function(F){return v(w(F))},R=function(F){return v(D(F))},B=function(F){return v(L(F))},z=function(F){var Y=x(F),q=v(x(F));if(F.isNode()){switch(F.pstyle("text-halign").value){case"left":q.x=-Y.w;break;case"right":q.x=0;break}switch(F.pstyle("text-valign").value){case"top":q.y=-Y.h;break;case"bottom":q.y=0;break}}return q},G=e.data.eleTxrCache=new Ca(e,{getKey:c,doesEleInvalidateKey:h,drawElement:p,getBoundingBox:w,getRotationPoint:A,getRotationOffset:S,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),k=e.data.lblTxrCache=new Ca(e,{getKey:g,drawElement:y,getBoundingBox:x,getRotationPoint:M,getRotationOffset:z,isVisible:N}),H=e.data.slbTxrCache=new Ca(e,{getKey:d,drawElement:E,getBoundingBox:D,getRotationPoint:C,getRotationOffset:R,isVisible:N}),$=e.data.tlbTxrCache=new Ca(e,{getKey:m,drawElement:T,getBoundingBox:L,getRotationPoint:O,getRotationOffset:B,isVisible:N}),V=e.data.lyrTxrCache=new Vf(e);e.onUpdateEleCalcs(function(F,Y){G.invalidateElements(Y),k.invalidateElements(Y),H.invalidateElements(Y),$.invalidateElements(Y),V.invalidateElements(Y);for(var q=0;q<Y.length;q++){var K=Y[q]._private;K.oldBackgroundTimestamp=K.backgroundTimestamp}});var X=function(F){for(var Y=0;Y<F.length;Y++)V.enqueueElementRefinement(F[Y].ele)};G.onDequeue(X),k.onDequeue(X),H.onDequeue(X),$.onDequeue(X)}He.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[He.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[He.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[He.SELECT_BOX]=e;break}};var R0=typeof Path2D<"u";He.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};He.usePaths=function(){return R0&&this.pathsEnabled};He.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};He.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};He.makeOffscreenCanvas=function(t,e){var r;return(typeof OffscreenCanvas>"u"?"undefined":ut(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,e):(r=document.createElement("canvas"),r.width=t,r.height=e),r};[Hf,Ht,Qt,Hi,Lr,na,Mt,dr,Wa,Xf].forEach(function(t){Ie(He,t)});var P0=[{name:"null",impl:Of},{name:"base",impl:zf},{name:"canvas",impl:O0}],I0=[{type:"layout",extensions:Hm},{type:"renderer",extensions:P0}],Kf={},Zf={};function Qf(t,e,r){var a=r,n=function(L){We("Can not register `"+e+"` for `"+t+"` since `"+L+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Fa.prototype[e])return n(e);Fa.prototype[e]=r}else if(t==="collection"){if(dt.prototype[e])return n(e);dt.prototype[e]=r}else if(t==="layout"){for(var o=function(L){this.options=L,r.call(this,L),Ve(this._private)||(this._private={}),this._private.cy=L.cy,this._private.listeners=[],this.createEmitter()},i=o.prototype=Object.create(r.prototype),l=[],u=0;u<l.length;u++){var s=l[u];i[s]=i[s]||function(){return this}}i.start&&!i.run?i.run=function(){return this.start(),this}:!i.start&&i.run&&(i.start=function(){return this.run(),this});var f=r.prototype.stop;i.stop=function(){var D=this.options;if(D&&D.animate){var L=this.animations;if(L)for(var N=0;N<L.length;N++)L[N].stop()}return f?f.call(this):this.emit("layoutstop"),this},i.destroy||(i.destroy=function(){return this}),i.cy=function(){return this._private.cy};var v=function(L){return L._private.cy},h={addEventFields:function(L,N){N.layout=L,N.cy=v(L),N.target=L},bubble:function(){return!0},parent:function(L){return v(L)}};Ie(i,{createEmitter:function(){return this._private.emitter=new Rn(h,this),this},emitter:function(){return this._private.emitter},on:function(L,N){return this.emitter().on(L,N),this},one:function(L,N){return this.emitter().one(L,N),this},once:function(L,N){return this.emitter().one(L,N),this},removeListener:function(L,N){return this.emitter().removeListener(L,N),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(L,N){return this.emitter().emit(L,N),this}}),qe.eventAliasesOn(i),a=o}else if(t==="renderer"&&e!=="null"&&e!=="base"){var c=Jf("renderer","base"),g=c.prototype,d=r,m=r.prototype,p=function(){c.apply(this,arguments),d.apply(this,arguments)},y=p.prototype;for(var E in g){var T=g[E],w=m[E]!=null;if(w)return n(E);y[E]=T}for(var x in m)y[x]=m[x];g.clientFunctions.forEach(function(D){y[D]=y[D]||function(){nt("Renderer does not implement `renderer."+D+"()` on its prototype")}}),a=p}else if(t==="__proto__"||t==="constructor"||t==="prototype")return nt(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ru({map:Kf,keys:[t,e],value:a})}function Jf(t,e){return Pu({map:Kf,keys:[t,e]})}function F0(t,e,r,a,n){return Ru({map:Zf,keys:[t,e,r,a],value:n})}function B0(t,e,r,a){return Pu({map:Zf,keys:[t,e,r,a]})}var wi=function(){if(arguments.length===2)return Jf.apply(null,arguments);if(arguments.length===3)return Qf.apply(null,arguments);if(arguments.length===4)return B0.apply(null,arguments);if(arguments.length===5)return F0.apply(null,arguments);nt("Invalid extension access syntax")};Fa.prototype.extension=wi;I0.forEach(function(t){t.extensions.forEach(function(e){Qf(t.type,e.name,e.impl)})});var _f=function t(){if(!(this instanceof t))return new t;this.length=0},Tr=_f.prototype;Tr.instanceString=function(){return"stylesheet"};Tr.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Tr.css=function(t,e){var r=this.length-1;if(Re(t))this[r].properties.push({name:t,value:e});else if(Ve(t))for(var a=t,n=Object.keys(a),o=0;o<n.length;o++){var i=n[o],l=a[i];if(l!=null){var u=yt.properties[i]||yt.properties[Ln(i)];if(u!=null){var s=u.name,f=l;this[r].properties.push({name:s,value:f})}}}return this};Tr.style=Tr.css;Tr.generateStyle=function(t){var e=new yt(t);return this.appendToStyle(e)};Tr.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],a=r.selector,n=r.properties;t.selector(a);for(var o=0;o<n.length;o++){var i=n[o];t.css(i.name,i.value)}}return t};var k0="3.23.0",Dr=function(e){if(e===void 0&&(e={}),Ve(e))return new Fa(e);if(Re(e))return wi.apply(wi,arguments)};Dr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Dr),t.apply(null,e),this};Dr.warnings=function(t){return Gu(t)};Dr.version=k0;Dr.stylesheet=Dr.Stylesheet=_f;jf.exports=Dr});var Yi=xe((Xa,Ui)=>{(function(e,r){typeof Xa=="object"&&typeof Ui=="object"?Ui.exports=r():typeof define=="function"&&define.amd?define([],r):typeof Xa=="object"?Xa.layoutBase=r():e.layoutBase=r()})(Xa,function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.i=function(a){return a},r.d=function(a,n,o){r.o(a,n)||Object.defineProperty(a,n,{configurable:!1,enumerable:!0,get:o})},r.n=function(a){var n=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(n,"a",n),n},r.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)},r.p="",r(r.s=28)}([function(t,e,r){"use strict";function a(){}a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,t.exports=a},function(t,e,r){"use strict";var a=r(2),n=r(8),o=r(9);function i(u,s,f){a.call(this,f),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=f,this.bendpoints=[],this.source=u,this.target=s}i.prototype=Object.create(a.prototype);for(var l in a)i[l]=a[l];i.prototype.getSource=function(){return this.source},i.prototype.getTarget=function(){return this.target},i.prototype.isInterGraph=function(){return this.isInterGraph},i.prototype.getLength=function(){return this.length},i.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},i.prototype.getBendpoints=function(){return this.bendpoints},i.prototype.getLca=function(){return this.lca},i.prototype.getSourceInLca=function(){return this.sourceInLca},i.prototype.getTargetInLca=function(){return this.targetInLca},i.prototype.getOtherEnd=function(u){if(this.source===u)return this.target;if(this.target===u)return this.source;throw"Node is not incident with this edge"},i.prototype.getOtherEndInGraph=function(u,s){for(var f=this.getOtherEnd(u),v=s.getGraphManager().getRoot();;){if(f.getOwner()==s)return f;if(f.getOwner()==v)break;f=f.getOwner().getParent()}return null},i.prototype.updateLength=function(){var u=new Array(4);this.isOverlapingSourceAndTarget=n.getIntersection(this.target.getRect(),this.source.getRect(),u),this.isOverlapingSourceAndTarget||(this.lengthX=u[0]-u[2],this.lengthY=u[1]-u[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},i.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=i},function(t,e,r){"use strict";function a(n){this.vGraphObject=n}t.exports=a},function(t,e,r){"use strict";var a=r(2),n=r(10),o=r(13),i=r(0),l=r(16),u=r(5);function s(v,h,c,g){c==null&&g==null&&(g=h),a.call(this,g),v.graphManager!=null&&(v=v.graphManager),this.estimatedSize=n.MIN_VALUE,this.inclusionTreeDepth=n.MAX_VALUE,this.vGraphObject=g,this.edges=[],this.graphManager=v,c!=null&&h!=null?this.rect=new o(h.x,h.y,c.width,c.height):this.rect=new o}s.prototype=Object.create(a.prototype);for(var f in a)s[f]=a[f];s.prototype.getEdges=function(){return this.edges},s.prototype.getChild=function(){return this.child},s.prototype.getOwner=function(){return this.owner},s.prototype.getWidth=function(){return this.rect.width},s.prototype.setWidth=function(v){this.rect.width=v},s.prototype.getHeight=function(){return this.rect.height},s.prototype.setHeight=function(v){this.rect.height=v},s.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},s.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},s.prototype.getCenter=function(){return new u(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},s.prototype.getLocation=function(){return new u(this.rect.x,this.rect.y)},s.prototype.getRect=function(){return this.rect},s.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},s.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},s.prototype.setRect=function(v,h){this.rect.x=v.x,this.rect.y=v.y,this.rect.width=h.width,this.rect.height=h.height},s.prototype.setCenter=function(v,h){this.rect.x=v-this.rect.width/2,this.rect.y=h-this.rect.height/2},s.prototype.setLocation=function(v,h){this.rect.x=v,this.rect.y=h},s.prototype.moveBy=function(v,h){this.rect.x+=v,this.rect.y+=h},s.prototype.getEdgeListToNode=function(v){var h=[],c,g=this;return g.edges.forEach(function(d){if(d.target==v){if(d.source!=g)throw"Incorrect edge source!";h.push(d)}}),h},s.prototype.getEdgesBetween=function(v){var h=[],c,g=this;return g.edges.forEach(function(d){if(!(d.source==g||d.target==g))throw"Incorrect edge source and/or target";(d.target==v||d.source==v)&&h.push(d)}),h},s.prototype.getNeighborsList=function(){var v=new Set,h=this;return h.edges.forEach(function(c){if(c.source==h)v.add(c.target);else{if(c.target!=h)throw"Incorrect incidency!";v.add(c.source)}}),v},s.prototype.withChildren=function(){var v=new Set,h,c;if(v.add(this),this.child!=null)for(var g=this.child.getNodes(),d=0;d<g.length;d++)h=g[d],c=h.withChildren(),c.forEach(function(m){v.add(m)});return v},s.prototype.getNoOfChildren=function(){var v=0,h;if(this.child==null)v=1;else for(var c=this.child.getNodes(),g=0;g<c.length;g++)h=c[g],v+=h.getNoOfChildren();return v==0&&(v=1),v},s.prototype.getEstimatedSize=function(){if(this.estimatedSize==n.MIN_VALUE)throw"assert failed";return this.estimatedSize},s.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},s.prototype.scatter=function(){var v,h,c=-i.INITIAL_WORLD_BOUNDARY,g=i.INITIAL_WORLD_BOUNDARY;v=i.WORLD_CENTER_X+l.nextDouble()*(g-c)+c;var d=-i.INITIAL_WORLD_BOUNDARY,m=i.INITIAL_WORLD_BOUNDARY;h=i.WORLD_CENTER_Y+l.nextDouble()*(m-d)+d,this.rect.x=v,this.rect.y=h},s.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var v=this.getChild();if(v.updateBounds(!0),this.rect.x=v.getLeft(),this.rect.y=v.getTop(),this.setWidth(v.getRight()-v.getLeft()),this.setHeight(v.getBottom()-v.getTop()),i.NODE_DIMENSIONS_INCLUDE_LABELS){var h=v.getRight()-v.getLeft(),c=v.getBottom()-v.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(h+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>h?(this.rect.x-=(this.labelWidth-h)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(h+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(c+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>c?(this.rect.y-=(this.labelHeight-c)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(c+this.labelHeight))}}},s.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==n.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},s.prototype.transform=function(v){var h=this.rect.x;h>i.WORLD_BOUNDARY?h=i.WORLD_BOUNDARY:h<-i.WORLD_BOUNDARY&&(h=-i.WORLD_BOUNDARY);var c=this.rect.y;c>i.WORLD_BOUNDARY?c=i.WORLD_BOUNDARY:c<-i.WORLD_BOUNDARY&&(c=-i.WORLD_BOUNDARY);var g=new u(h,c),d=v.inverseTransformPoint(g);this.setLocation(d.x,d.y)},s.prototype.getLeft=function(){return this.rect.x},s.prototype.getRight=function(){return this.rect.x+this.rect.width},s.prototype.getTop=function(){return this.rect.y},s.prototype.getBottom=function(){return this.rect.y+this.rect.height},s.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},t.exports=s},function(t,e,r){"use strict";var a=r(0);function n(){}for(var o in a)n[o]=a[o];n.MAX_ITERATIONS=2500,n.DEFAULT_EDGE_LENGTH=50,n.DEFAULT_SPRING_STRENGTH=.45,n.DEFAULT_REPULSION_STRENGTH=4500,n.DEFAULT_GRAVITY_STRENGTH=.4,n.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,n.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,n.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,n.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,n.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,n.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,n.COOLING_ADAPTATION_FACTOR=.33,n.ADAPTATION_LOWER_NODE_LIMIT=1e3,n.ADAPTATION_UPPER_NODE_LIMIT=5e3,n.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,n.MAX_NODE_DISPLACEMENT=n.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,n.MIN_REPULSION_DIST=n.DEFAULT_EDGE_LENGTH/10,n.CONVERGENCE_CHECK_PERIOD=100,n.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,n.MIN_EDGE_LENGTH=1,n.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=n},function(t,e,r){"use strict";function a(n,o){n==null&&o==null?(this.x=0,this.y=0):(this.x=n,this.y=o)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(n){this.x=n},a.prototype.setY=function(n){this.y=n},a.prototype.getDifference=function(n){return new DimensionD(this.x-n.x,this.y-n.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(n){return this.x+=n.width,this.y+=n.height,this},t.exports=a},function(t,e,r){"use strict";var a=r(2),n=r(10),o=r(0),i=r(7),l=r(3),u=r(1),s=r(13),f=r(12),v=r(11);function h(g,d,m){a.call(this,m),this.estimatedSize=n.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=g,d!=null&&d instanceof i?this.graphManager=d:d!=null&&d instanceof Layout&&(this.graphManager=d.graphManager)}h.prototype=Object.create(a.prototype);for(var c in a)h[c]=a[c];h.prototype.getNodes=function(){return this.nodes},h.prototype.getEdges=function(){return this.edges},h.prototype.getGraphManager=function(){return this.graphManager},h.prototype.getParent=function(){return this.parent},h.prototype.getLeft=function(){return this.left},h.prototype.getRight=function(){return this.right},h.prototype.getTop=function(){return this.top},h.prototype.getBottom=function(){return this.bottom},h.prototype.isConnected=function(){return this.isConnected},h.prototype.add=function(g,d,m){if(d==null&&m==null){var p=g;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(p)>-1)throw"Node already in graph!";return p.owner=this,this.getNodes().push(p),p}else{var y=g;if(!(this.getNodes().indexOf(d)>-1&&this.getNodes().indexOf(m)>-1))throw"Source or target not in graph!";if(!(d.owner==m.owner&&d.owner==this))throw"Both owners must be this graph!";return d.owner!=m.owner?null:(y.source=d,y.target=m,y.isInterGraph=!1,this.getEdges().push(y),d.edges.push(y),m!=d&&m.edges.push(y),y)}},h.prototype.remove=function(g){var d=g;if(g instanceof l){if(d==null)throw"Node is null!";if(!(d.owner!=null&&d.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var m=d.edges.slice(),p,y=m.length,E=0;E<y;E++)p=m[E],p.isInterGraph?this.graphManager.remove(p):p.source.owner.remove(p);var T=this.nodes.indexOf(d);if(T==-1)throw"Node not in owner node list!";this.nodes.splice(T,1)}else if(g instanceof u){var p=g;if(p==null)throw"Edge is null!";if(!(p.source!=null&&p.target!=null))throw"Source and/or target is null!";if(!(p.source.owner!=null&&p.target.owner!=null&&p.source.owner==this&&p.target.owner==this))throw"Source and/or target owner is invalid!";var w=p.source.edges.indexOf(p),x=p.target.edges.indexOf(p);if(!(w>-1&&x>-1))throw"Source and/or target doesn't know this edge!";p.source.edges.splice(w,1),p.target!=p.source&&p.target.edges.splice(x,1);var T=p.source.owner.getEdges().indexOf(p);if(T==-1)throw"Not in owner's edge list!";p.source.owner.getEdges().splice(T,1)}},h.prototype.updateLeftTop=function(){for(var g=n.MAX_VALUE,d=n.MAX_VALUE,m,p,y,E=this.getNodes(),T=E.length,w=0;w<T;w++){var x=E[w];m=x.getTop(),p=x.getLeft(),g>m&&(g=m),d>p&&(d=p)}return g==n.MAX_VALUE?null:(E[0].getParent().paddingLeft!=null?y=E[0].getParent().paddingLeft:y=this.margin,this.left=d-y,this.top=g-y,new f(this.left,this.top))},h.prototype.updateBounds=function(g){for(var d=n.MAX_VALUE,m=-n.MAX_VALUE,p=n.MAX_VALUE,y=-n.MAX_VALUE,E,T,w,x,D,L=this.nodes,N=L.length,A=0;A<N;A++){var P=L[A];g&&P.child!=null&&P.updateBounds(),E=P.getLeft(),T=P.getRight(),w=P.getTop(),x=P.getBottom(),d>E&&(d=E),m<T&&(m=T),p>w&&(p=w),y<x&&(y=x)}var b=new s(d,p,m-d,y-p);d==n.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),L[0].getParent().paddingLeft!=null?D=L[0].getParent().paddingLeft:D=this.margin,this.left=b.x-D,this.right=b.x+b.width+D,this.top=b.y-D,this.bottom=b.y+b.height+D},h.calculateBounds=function(g){for(var d=n.MAX_VALUE,m=-n.MAX_VALUE,p=n.MAX_VALUE,y=-n.MAX_VALUE,E,T,w,x,D=g.length,L=0;L<D;L++){var N=g[L];E=N.getLeft(),T=N.getRight(),w=N.getTop(),x=N.getBottom(),d>E&&(d=E),m<T&&(m=T),p>w&&(p=w),y<x&&(y=x)}var A=new s(d,p,m-d,y-p);return A},h.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==n.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){for(var g=0,d=this.nodes,m=d.length,p=0;p<m;p++){var y=d[p];g+=y.calcEstimatedSize()}return g==0?this.estimatedSize=o.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=g/Math.sqrt(this.nodes.length),this.estimatedSize},h.prototype.updateConnected=function(){var g=this;if(this.nodes.length==0){this.isConnected=!0;return}var d=new v,m=new Set,p=this.nodes[0],y,E,T=p.withChildren();for(T.forEach(function(A){d.push(A),m.add(A)});d.length!==0;){p=d.shift(),y=p.getEdges();for(var w=y.length,x=0;x<w;x++){var D=y[x];if(E=D.getOtherEndInGraph(p,this),E!=null&&!m.has(E)){var L=E.withChildren();L.forEach(function(A){d.push(A),m.add(A)})}}}if(this.isConnected=!1,m.size>=this.nodes.length){var N=0;m.forEach(function(A){A.owner==g&&N++}),N==this.nodes.length&&(this.isConnected=!0)}},t.exports=h},function(t,e,r){"use strict";var a,n=r(1);function o(i){a=r(6),this.layout=i,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var i=this.layout.newGraph(),l=this.layout.newNode(null),u=this.add(i,l);return this.setRootGraph(u),this.rootGraph},o.prototype.add=function(i,l,u,s,f){if(u==null&&s==null&&f==null){if(i==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(i)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(i),i.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return i.parent=l,l.child=i,i}else{f=u,s=l,u=i;var v=s.getOwner(),h=f.getOwner();if(!(v!=null&&v.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(h!=null&&h.getGraphManager()==this))throw"Target not in this graph mgr!";if(v==h)return u.isInterGraph=!1,v.add(u,s,f);if(u.isInterGraph=!0,u.source=s,u.target=f,this.edges.indexOf(u)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(u),!(u.source!=null&&u.target!=null))throw"Edge source and/or target is null!";if(!(u.source.edges.indexOf(u)==-1&&u.target.edges.indexOf(u)==-1))throw"Edge already in source and/or target incidency list!";return u.source.edges.push(u),u.target.edges.push(u),u}},o.prototype.remove=function(i){if(i instanceof a){var l=i;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var u=[];u=u.concat(l.getEdges());for(var s,f=u.length,v=0;v<f;v++)s=u[v],l.remove(s);var h=[];h=h.concat(l.getNodes());var c;f=h.length;for(var v=0;v<f;v++)c=h[v],l.remove(c);l==this.rootGraph&&this.setRootGraph(null);var g=this.graphs.indexOf(l);this.graphs.splice(g,1),l.parent=null}else if(i instanceof n){if(s=i,s==null)throw"Edge is null!";if(!s.isInterGraph)throw"Not an inter-graph edge!";if(!(s.source!=null&&s.target!=null))throw"Source and/or target is null!";if(!(s.source.edges.indexOf(s)!=-1&&s.target.edges.indexOf(s)!=-1))throw"Source and/or target doesn't know this edge!";var g=s.source.edges.indexOf(s);if(s.source.edges.splice(g,1),g=s.target.edges.indexOf(s),s.target.edges.splice(g,1),!(s.source.owner!=null&&s.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(s.source.owner.getGraphManager().edges.indexOf(s)==-1)throw"Not in owner graph manager's edge list!";var g=s.source.owner.getGraphManager().edges.indexOf(s);s.source.owner.getGraphManager().edges.splice(g,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var i=[],l=this.getGraphs(),u=l.length,s=0;s<u;s++)i=i.concat(l[s].getNodes());this.allNodes=i}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){for(var i=[],l=this.getGraphs(),u=l.length,s=0;s<l.length;s++)i=i.concat(l[s].getEdges());i=i.concat(this.edges),this.allEdges=i}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(i){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=i},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(i){if(i.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=i,i.parent==null&&(i.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(i,l){if(!(i!=null&&l!=null))throw"assert failed";if(i==l)return!0;var u=i.getOwner(),s;do{if(s=u.getParent(),s==null)break;if(s==l)return!0;if(u=s.getOwner(),u==null)break}while(!0);u=l.getOwner();do{if(s=u.getParent(),s==null)break;if(s==i)return!0;if(u=s.getOwner(),u==null)break}while(!0);return!1},o.prototype.calcLowestCommonAncestors=function(){for(var i,l,u,s,f,v=this.getAllEdges(),h=v.length,c=0;c<h;c++){if(i=v[c],l=i.source,u=i.target,i.lca=null,i.sourceInLca=l,i.targetInLca=u,l==u){i.lca=l.getOwner();continue}for(s=l.getOwner();i.lca==null;){for(i.targetInLca=u,f=u.getOwner();i.lca==null;){if(f==s){i.lca=f;break}if(f==this.rootGraph)break;if(i.lca!=null)throw"assert failed";i.targetInLca=f.getParent(),f=i.targetInLca.getOwner()}if(s==this.rootGraph)break;i.lca==null&&(i.sourceInLca=s.getParent(),s=i.sourceInLca.getOwner())}if(i.lca==null)throw"assert failed"}},o.prototype.calcLowestCommonAncestor=function(i,l){if(i==l)return i.getOwner();var u=i.getOwner();do{if(u==null)break;var s=l.getOwner();do{if(s==null)break;if(s==u)return s;s=s.getParent().getOwner()}while(!0);u=u.getParent().getOwner()}while(!0);return u},o.prototype.calcInclusionTreeDepths=function(i,l){i==null&&l==null&&(i=this.rootGraph,l=1);for(var u,s=i.getNodes(),f=s.length,v=0;v<f;v++)u=s[v],u.inclusionTreeDepth=l,u.child!=null&&this.calcInclusionTreeDepths(u.child,l+1)},o.prototype.includesInvalidEdge=function(){for(var i,l=[],u=this.edges.length,s=0;s<u;s++)i=this.edges[s],this.isOneAncestorOfOther(i.source,i.target)&&l.push(i);for(var s=0;s<l.length;s++)this.remove(l[s]);return!1},t.exports=o},function(t,e,r){"use strict";var a=r(12);function n(){}n.calcSeparationAmount=function(o,i,l,u){if(!o.intersects(i))throw"assert failed";var s=new Array(2);this.decideDirectionsForOverlappingNodes(o,i,s),l[0]=Math.min(o.getRight(),i.getRight())-Math.max(o.x,i.x),l[1]=Math.min(o.getBottom(),i.getBottom())-Math.max(o.y,i.y),o.getX()<=i.getX()&&o.getRight()>=i.getRight()?l[0]+=Math.min(i.getX()-o.getX(),o.getRight()-i.getRight()):i.getX()<=o.getX()&&i.getRight()>=o.getRight()&&(l[0]+=Math.min(o.getX()-i.getX(),i.getRight()-o.getRight())),o.getY()<=i.getY()&&o.getBottom()>=i.getBottom()?l[1]+=Math.min(i.getY()-o.getY(),o.getBottom()-i.getBottom()):i.getY()<=o.getY()&&i.getBottom()>=o.getBottom()&&(l[1]+=Math.min(o.getY()-i.getY(),i.getBottom()-o.getBottom()));var f=Math.abs((i.getCenterY()-o.getCenterY())/(i.getCenterX()-o.getCenterX()));i.getCenterY()===o.getCenterY()&&i.getCenterX()===o.getCenterX()&&(f=1);var v=f*l[0],h=l[1]/f;l[0]<h?h=l[0]:v=l[1],l[0]=-1*s[0]*(h/2+u),l[1]=-1*s[1]*(v/2+u)},n.decideDirectionsForOverlappingNodes=function(o,i,l){o.getCenterX()<i.getCenterX()?l[0]=-1:l[0]=1,o.getCenterY()<i.getCenterY()?l[1]=-1:l[1]=1},n.getIntersection2=function(o,i,l){var u=o.getCenterX(),s=o.getCenterY(),f=i.getCenterX(),v=i.getCenterY();if(o.intersects(i))return l[0]=u,l[1]=s,l[2]=f,l[3]=v,!0;var h=o.getX(),c=o.getY(),g=o.getRight(),d=o.getX(),m=o.getBottom(),p=o.getRight(),y=o.getWidthHalf(),E=o.getHeightHalf(),T=i.getX(),w=i.getY(),x=i.getRight(),D=i.getX(),L=i.getBottom(),N=i.getRight(),A=i.getWidthHalf(),P=i.getHeightHalf(),b=!1,M=!1;if(u===f){if(s>v)return l[0]=u,l[1]=c,l[2]=f,l[3]=L,!1;if(s<v)return l[0]=u,l[1]=m,l[2]=f,l[3]=w,!1}else if(s===v){if(u>f)return l[0]=h,l[1]=s,l[2]=x,l[3]=v,!1;if(u<f)return l[0]=g,l[1]=s,l[2]=T,l[3]=v,!1}else{var C=o.height/o.width,O=i.height/i.width,S=(v-s)/(f-u),R=void 0,B=void 0,z=void 0,G=void 0,k=void 0,H=void 0;if(-C===S?u>f?(l[0]=d,l[1]=m,b=!0):(l[0]=g,l[1]=c,b=!0):C===S&&(u>f?(l[0]=h,l[1]=c,b=!0):(l[0]=p,l[1]=m,b=!0)),-O===S?f>u?(l[2]=D,l[3]=L,M=!0):(l[2]=x,l[3]=w,M=!0):O===S&&(f>u?(l[2]=T,l[3]=w,M=!0):(l[2]=N,l[3]=L,M=!0)),b&&M)return!1;if(u>f?s>v?(R=this.getCardinalDirection(C,S,4),B=this.getCardinalDirection(O,S,2)):(R=this.getCardinalDirection(-C,S,3),B=this.getCardinalDirection(-O,S,1)):s>v?(R=this.getCardinalDirection(-C,S,1),B=this.getCardinalDirection(-O,S,3)):(R=this.getCardinalDirection(C,S,2),B=this.getCardinalDirection(O,S,4)),!b)switch(R){case 1:G=c,z=u+-E/S,l[0]=z,l[1]=G;break;case 2:z=p,G=s+y*S,l[0]=z,l[1]=G;break;case 3:G=m,z=u+E/S,l[0]=z,l[1]=G;break;case 4:z=d,G=s+-y*S,l[0]=z,l[1]=G;break}if(!M)switch(B){case 1:H=w,k=f+-P/S,l[2]=k,l[3]=H;break;case 2:k=N,H=v+A*S,l[2]=k,l[3]=H;break;case 3:H=L,k=f+P/S,l[2]=k,l[3]=H;break;case 4:k=D,H=v+-A*S,l[2]=k,l[3]=H;break}}return!1},n.getCardinalDirection=function(o,i,l){return o>i?l:1+l%4},n.getIntersection=function(o,i,l,u){if(u==null)return this.getIntersection2(o,i,l);var s=o.x,f=o.y,v=i.x,h=i.y,c=l.x,g=l.y,d=u.x,m=u.y,p=void 0,y=void 0,E=void 0,T=void 0,w=void 0,x=void 0,D=void 0,L=void 0,N=void 0;return E=h-f,w=s-v,D=v*f-s*h,T=m-g,x=c-d,L=d*g-c*m,N=E*x-T*w,N===0?null:(p=(w*L-x*D)/N,y=(T*D-E*L)/N,new a(p,y))},n.angleOfVector=function(o,i,l,u){var s=void 0;return o!==l?(s=Math.atan((u-i)/(l-o)),l<o?s+=Math.PI:u<i&&(s+=this.TWO_PI)):u<i?s=this.ONE_AND_HALF_PI:s=this.HALF_PI,s},n.doIntersect=function(o,i,l,u){var s=o.x,f=o.y,v=i.x,h=i.y,c=l.x,g=l.y,d=u.x,m=u.y,p=(v-s)*(m-g)-(d-c)*(h-f);if(p===0)return!1;var y=((m-g)*(d-s)+(c-d)*(m-f))/p,E=((f-h)*(d-s)+(v-s)*(m-f))/p;return 0<y&&y<1&&0<E&&E<1},n.findCircleLineIntersections=function(o,i,l,u,s,f,v){var h=(l-o)*(l-o)+(u-i)*(u-i),c=2*((o-s)*(l-o)+(i-f)*(u-i)),g=(o-s)*(o-s)+(i-f)*(i-f)-v*v,d=c*c-4*h*g;if(d>=0){var m=(-c+Math.sqrt(c*c-4*h*g))/(2*h),p=(-c-Math.sqrt(c*c-4*h*g))/(2*h),y=null;return m>=0&&m<=1?[m]:p>=0&&p<=1?[p]:y}else return null},n.HALF_PI=.5*Math.PI,n.ONE_AND_HALF_PI=1.5*Math.PI,n.TWO_PI=2*Math.PI,n.THREE_PI=3*Math.PI,t.exports=n},function(t,e,r){"use strict";function a(){}a.sign=function(n){return n>0?1:n<0?-1:0},a.floor=function(n){return n<0?Math.ceil(n):Math.floor(n)},a.ceil=function(n){return n<0?Math.floor(n):Math.ceil(n)},t.exports=a},function(t,e,r){"use strict";function a(){}a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,t.exports=a},function(t,e,r){"use strict";var a=function(){function s(f,v){for(var h=0;h<v.length;h++){var c=v[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(f,v,h){return v&&s(f.prototype,v),h&&s(f,h),f}}();function n(s,f){if(!(s instanceof f))throw new TypeError("Cannot call a class as a function")}var o=function(f){return{value:f,next:null,prev:null}},i=function(f,v,h,c){return f!==null?f.next=v:c.head=v,h!==null?h.prev=v:c.tail=v,v.prev=f,v.next=h,c.length++,v},l=function(f,v){var h=f.prev,c=f.next;return h!==null?h.next=c:v.head=c,c!==null?c.prev=h:v.tail=h,f.prev=f.next=null,v.length--,f},u=function(){function s(f){var v=this;n(this,s),this.length=0,this.head=null,this.tail=null,f?.forEach(function(h){return v.push(h)})}return a(s,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(v,h){return i(h.prev,o(v),h,this)}},{key:"insertAfter",value:function(v,h){return i(h,o(v),h.next,this)}},{key:"insertNodeBefore",value:function(v,h){return i(h.prev,v,h,this)}},{key:"insertNodeAfter",value:function(v,h){return i(h,v,h.next,this)}},{key:"push",value:function(v){return i(this.tail,o(v),null,this)}},{key:"unshift",value:function(v){return i(null,o(v),this.head,this)}},{key:"remove",value:function(v){return l(v,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(v){if(v<=this.length()){for(var h=1,c=this.head;h<v;)c=c.next,h++;return c.value}}},{key:"set_object_at",value:function(v,h){if(v<=this.length()){for(var c=1,g=this.head;c<v;)g=g.next,c++;g.value=h}}}]),s}();t.exports=u},function(t,e,r){"use strict";function a(n,o,i){this.x=null,this.y=null,n==null&&o==null&&i==null?(this.x=0,this.y=0):typeof n=="number"&&typeof o=="number"&&i==null?(this.x=n,this.y=o):n.constructor.name=="Point"&&o==null&&i==null&&(i=n,this.x=i.x,this.y=i.y)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(n,o,i){n.constructor.name=="Point"&&o==null&&i==null?(i=n,this.setLocation(i.x,i.y)):typeof n=="number"&&typeof o=="number"&&i==null&&(parseInt(n)==n&&parseInt(o)==o?this.move(n,o):(this.x=Math.floor(n+.5),this.y=Math.floor(o+.5)))},a.prototype.move=function(n,o){this.x=n,this.y=o},a.prototype.translate=function(n,o){this.x+=n,this.y+=o},a.prototype.equals=function(n){if(n.constructor.name=="Point"){var o=n;return this.x==o.x&&this.y==o.y}return this==n},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=a},function(t,e,r){"use strict";function a(n,o,i,l){this.x=0,this.y=0,this.width=0,this.height=0,n!=null&&o!=null&&i!=null&&l!=null&&(this.x=n,this.y=o,this.width=i,this.height=l)}a.prototype.getX=function(){return this.x},a.prototype.setX=function(n){this.x=n},a.prototype.getY=function(){return this.y},a.prototype.setY=function(n){this.y=n},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(n){this.width=n},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(n){this.height=n},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(n){return!(this.getRight()<n.x||this.getBottom()<n.y||n.getRight()<this.x||n.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},t.exports=a},function(t,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function n(){}n.lastID=0,n.createID=function(o){return n.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=n.getString(),n.lastID++),o.uniqueID)},n.getString=function(o){return o==null&&(o=n.lastID),"Object#"+o},n.isPrimitive=function(o){var i=typeof o>"u"?"undefined":a(o);return o==null||i!="object"&&i!="function"},t.exports=n},function(t,e,r){"use strict";function a(c){if(Array.isArray(c)){for(var g=0,d=Array(c.length);g<c.length;g++)d[g]=c[g];return d}else return Array.from(c)}var n=r(0),o=r(7),i=r(3),l=r(1),u=r(6),s=r(5),f=r(17),v=r(29);function h(c){v.call(this),this.layoutQuality=n.QUALITY,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=n.DEFAULT_INCREMENTAL,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,c!=null&&(this.isRemoteUse=c)}h.RANDOM_SEED=1,h.prototype=Object.create(v.prototype),h.prototype.getGraphManager=function(){return this.graphManager},h.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},h.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},h.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},h.prototype.newGraphManager=function(){var c=new o(this);return this.graphManager=c,c},h.prototype.newGraph=function(c){return new u(null,this.graphManager,c)},h.prototype.newNode=function(c){return new i(this.graphManager,c)},h.prototype.newEdge=function(c){return new l(null,null,c)},h.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},h.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var c;return this.checkLayoutSuccess()?c=!1:c=this.layout(),n.ANIMATE==="during"?!1:(c&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,c)},h.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},h.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var c,g=this.graphManager.getAllEdges(),d=0;d<g.length;d++)c=g[d];for(var m,p=this.graphManager.getRoot().getNodes(),d=0;d<p.length;d++)m=p[d];this.update(this.graphManager.getRoot())}},h.prototype.update=function(c){if(c==null)this.update2();else if(c instanceof i){var g=c;if(g.getChild()!=null)for(var d=g.getChild().getNodes(),m=0;m<d.length;m++)update(d[m]);if(g.vGraphObject!=null){var p=g.vGraphObject;p.update(g)}}else if(c instanceof l){var y=c;if(y.vGraphObject!=null){var E=y.vGraphObject;E.update(y)}}else if(c instanceof u){var T=c;if(T.vGraphObject!=null){var w=T.vGraphObject;w.update(T)}}},h.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=n.QUALITY,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=n.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},h.prototype.transform=function(c){if(c==null)this.transform(new s(0,0));else{var g=new f,d=this.graphManager.getRoot().updateLeftTop();if(d!=null){g.setWorldOrgX(c.x),g.setWorldOrgY(c.y),g.setDeviceOrgX(d.x),g.setDeviceOrgY(d.y);for(var m=this.getAllNodes(),p,y=0;y<m.length;y++)p=m[y],p.transform(g)}}},h.prototype.positionNodesRandomly=function(c){if(c==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var g,d,m=c.getNodes(),p=0;p<m.length;p++)g=m[p],d=g.getChild(),d==null||d.getNodes().length==0?g.scatter():(this.positionNodesRandomly(d),g.updateBounds())},h.prototype.getFlatForest=function(){for(var c=[],g=!0,d=this.graphManager.getRoot().getNodes(),m=!0,p=0;p<d.length;p++)d[p].getChild()!=null&&(m=!1);if(!m)return c;var y=new Set,E=[],T=new Map,w=[];for(w=w.concat(d);w.length>0&&g;){for(E.push(w[0]);E.length>0&&g;){var x=E[0];E.splice(0,1),y.add(x);for(var D=x.getEdges(),p=0;p<D.length;p++){var L=D[p].getOtherEnd(x);if(T.get(x)!=L)if(!y.has(L))E.push(L),T.set(L,x);else{g=!1;break}}}if(!g)c=[];else{var N=[].concat(a(y));c.push(N);for(var p=0;p<N.length;p++){var A=N[p],P=w.indexOf(A);P>-1&&w.splice(P,1)}y=new Set,T=new Map}}return c},h.prototype.createDummyNodesForBendpoints=function(c){for(var g=[],d=c.source,m=this.graphManager.calcLowestCommonAncestor(c.source,c.target),p=0;p<c.bendpoints.length;p++){var y=this.newNode(null);y.setRect(new Point(0,0),new Dimension(1,1)),m.add(y);var E=this.newEdge(null);this.graphManager.add(E,d,y),g.add(y),d=y}var E=this.newEdge(null);return this.graphManager.add(E,d,c.target),this.edgeToDummyNodes.set(c,g),c.isInterGraph()?this.graphManager.remove(c):m.remove(c),g},h.prototype.createBendpointsFromDummyNodes=function(){var c=[];c=c.concat(this.graphManager.getAllEdges()),c=[].concat(a(this.edgeToDummyNodes.keys())).concat(c);for(var g=0;g<c.length;g++){var d=c[g];if(d.bendpoints.length>0){for(var m=this.edgeToDummyNodes.get(d),p=0;p<m.length;p++){var y=m[p],E=new s(y.getCenterX(),y.getCenterY()),T=d.bendpoints.get(p);T.x=E.x,T.y=E.y,y.getOwner().remove(y)}this.graphManager.add(d,d.source,d.target)}}},h.transform=function(c,g,d,m){if(d!=null&&m!=null){var p=g;if(c<=50){var y=g/d;p-=(g-y)/50*(50-c)}else{var E=g*m;p+=(E-g)/50*(c-50)}return p}else{var T,w;return c<=50?(T=9*g/500,w=g/10):(T=9*g/50,w=-8*g),T*c+w}},h.findCenterOfTree=function(c){var g=[];g=g.concat(c);var d=[],m=new Map,p=!1,y=null;(g.length==1||g.length==2)&&(p=!0,y=g[0]);for(var E=0;E<g.length;E++){var T=g[E],w=T.getNeighborsList().size;m.set(T,T.getNeighborsList().size),w==1&&d.push(T)}var x=[];for(x=x.concat(d);!p;){var D=[];D=D.concat(x),x=[];for(var E=0;E<g.length;E++){var T=g[E],L=g.indexOf(T);L>=0&&g.splice(L,1);var N=T.getNeighborsList();N.forEach(function(b){if(d.indexOf(b)<0){var M=m.get(b),C=M-1;C==1&&x.push(b),m.set(b,C)}})}d=d.concat(x),(g.length==1||g.length==2)&&(p=!0,y=g[0])}return y},h.prototype.setGraphManager=function(c){this.graphManager=c},t.exports=h},function(t,e,r){"use strict";function a(){}a.seed=1,a.x=0,a.nextDouble=function(){return a.x=Math.sin(a.seed++)*1e4,a.x-Math.floor(a.x)},t.exports=a},function(t,e,r){"use strict";var a=r(5);function n(o,i){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}n.prototype.getWorldOrgX=function(){return this.lworldOrgX},n.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},n.prototype.getWorldOrgY=function(){return this.lworldOrgY},n.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},n.prototype.getWorldExtX=function(){return this.lworldExtX},n.prototype.setWorldExtX=function(o){this.lworldExtX=o},n.prototype.getWorldExtY=function(){return this.lworldExtY},n.prototype.setWorldExtY=function(o){this.lworldExtY=o},n.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},n.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},n.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},n.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},n.prototype.getDeviceExtX=function(){return this.ldeviceExtX},n.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},n.prototype.getDeviceExtY=function(){return this.ldeviceExtY},n.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},n.prototype.transformX=function(o){var i=0,l=this.lworldExtX;return l!=0&&(i=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/l),i},n.prototype.transformY=function(o){var i=0,l=this.lworldExtY;return l!=0&&(i=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/l),i},n.prototype.inverseTransformX=function(o){var i=0,l=this.ldeviceExtX;return l!=0&&(i=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/l),i},n.prototype.inverseTransformY=function(o){var i=0,l=this.ldeviceExtY;return l!=0&&(i=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/l),i},n.prototype.inverseTransformPoint=function(o){var i=new a(this.inverseTransformX(o.x),this.inverseTransformY(o.y));return i},t.exports=n},function(t,e,r){"use strict";function a(v){if(Array.isArray(v)){for(var h=0,c=Array(v.length);h<v.length;h++)c[h]=v[h];return c}else return Array.from(v)}var n=r(15),o=r(4),i=r(0),l=r(8),u=r(9);function s(){n.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}s.prototype=Object.create(n.prototype);for(var f in n)s[f]=n[f];s.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},s.prototype.calcIdealEdgeLengths=function(){for(var v,h,c,g,d,m,p,y=this.getGraphManager().getAllEdges(),E=0;E<y.length;E++)v=y[E],h=v.idealLength,v.isInterGraph&&(g=v.getSource(),d=v.getTarget(),m=v.getSourceInLca().getEstimatedSize(),p=v.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(v.idealLength+=m+p-2*i.SIMPLE_NODE_SIZE),c=v.getLca().getInclusionTreeDepth(),v.idealLength+=h*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(g.getInclusionTreeDepth()+d.getInclusionTreeDepth()-2*c))},s.prototype.initSpringEmbedder=function(){var v=this.getAllNodes().length;this.incremental?(v>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(v-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(v>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(v-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},s.prototype.calcSpringForces=function(){for(var v=this.getAllEdges(),h,c=0;c<v.length;c++)h=v[c],this.calcSpringForce(h,h.idealLength)},s.prototype.calcRepulsionForces=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c,g,d,m,p=this.getAllNodes(),y;if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&v&&this.updateGrid(),y=new Set,c=0;c<p.length;c++)d=p[c],this.calculateRepulsionForceOfANode(d,y,v,h),y.add(d);else for(c=0;c<p.length;c++)for(d=p[c],g=c+1;g<p.length;g++)m=p[g],d.getOwner()==m.getOwner()&&this.calcRepulsionForce(d,m)},s.prototype.calcGravitationalForces=function(){for(var v,h=this.getAllNodesToApplyGravitation(),c=0;c<h.length;c++)v=h[c],this.calcGravitationalForce(v)},s.prototype.moveNodes=function(){for(var v=this.getAllNodes(),h,c=0;c<v.length;c++)h=v[c],h.move()},s.prototype.calcSpringForce=function(v,h){var c=v.getSource(),g=v.getTarget(),d,m,p,y;if(this.uniformLeafNodeSizes&&c.getChild()==null&&g.getChild()==null)v.updateLengthSimple();else if(v.updateLength(),v.isOverlapingSourceAndTarget)return;d=v.getLength(),d!=0&&(m=v.edgeElasticity*(d-h),p=m*(v.lengthX/d),y=m*(v.lengthY/d),c.springForceX+=p,c.springForceY+=y,g.springForceX-=p,g.springForceY-=y)},s.prototype.calcRepulsionForce=function(v,h){var c=v.getRect(),g=h.getRect(),d=new Array(2),m=new Array(4),p,y,E,T,w,x,D;if(c.intersects(g)){l.calcSeparationAmount(c,g,d,o.DEFAULT_EDGE_LENGTH/2),x=2*d[0],D=2*d[1];var L=v.noOfChildren*h.noOfChildren/(v.noOfChildren+h.noOfChildren);v.repulsionForceX-=L*x,v.repulsionForceY-=L*D,h.repulsionForceX+=L*x,h.repulsionForceY+=L*D}else this.uniformLeafNodeSizes&&v.getChild()==null&&h.getChild()==null?(p=g.getCenterX()-c.getCenterX(),y=g.getCenterY()-c.getCenterY()):(l.getIntersection(c,g,m),p=m[2]-m[0],y=m[3]-m[1]),Math.abs(p)<o.MIN_REPULSION_DIST&&(p=u.sign(p)*o.MIN_REPULSION_DIST),Math.abs(y)<o.MIN_REPULSION_DIST&&(y=u.sign(y)*o.MIN_REPULSION_DIST),E=p*p+y*y,T=Math.sqrt(E),w=(v.nodeRepulsion/2+h.nodeRepulsion/2)*v.noOfChildren*h.noOfChildren/E,x=w*p/T,D=w*y/T,v.repulsionForceX-=x,v.repulsionForceY-=D,h.repulsionForceX+=x,h.repulsionForceY+=D},s.prototype.calcGravitationalForce=function(v){var h,c,g,d,m,p,y,E;h=v.getOwner(),c=(h.getRight()+h.getLeft())/2,g=(h.getTop()+h.getBottom())/2,d=v.getCenterX()-c,m=v.getCenterY()-g,p=Math.abs(d)+v.getWidth()/2,y=Math.abs(m)+v.getHeight()/2,v.getOwner()==this.graphManager.getRoot()?(E=h.getEstimatedSize()*this.gravityRangeFactor,(p>E||y>E)&&(v.gravitationForceX=-this.gravityConstant*d,v.gravitationForceY=-this.gravityConstant*m)):(E=h.getEstimatedSize()*this.compoundGravityRangeFactor,(p>E||y>E)&&(v.gravitationForceX=-this.gravityConstant*d*this.compoundGravityConstant,v.gravitationForceY=-this.gravityConstant*m*this.compoundGravityConstant))},s.prototype.isConverged=function(){var v,h=!1;return this.totalIterations>this.maxIterations/3&&(h=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),v=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,v||h},s.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},s.prototype.calcNoOfChildrenForAllNodes=function(){for(var v,h=this.graphManager.getAllNodes(),c=0;c<h.length;c++)v=h[c],v.noOfChildren=v.getNoOfChildren()},s.prototype.calcGrid=function(v){var h=0,c=0;h=parseInt(Math.ceil((v.getRight()-v.getLeft())/this.repulsionRange)),c=parseInt(Math.ceil((v.getBottom()-v.getTop())/this.repulsionRange));for(var g=new Array(h),d=0;d<h;d++)g[d]=new Array(c);for(var d=0;d<h;d++)for(var m=0;m<c;m++)g[d][m]=new Array;return g},s.prototype.addNodeToGrid=function(v,h,c){var g=0,d=0,m=0,p=0;g=parseInt(Math.floor((v.getRect().x-h)/this.repulsionRange)),d=parseInt(Math.floor((v.getRect().width+v.getRect().x-h)/this.repulsionRange)),m=parseInt(Math.floor((v.getRect().y-c)/this.repulsionRange)),p=parseInt(Math.floor((v.getRect().height+v.getRect().y-c)/this.repulsionRange));for(var y=g;y<=d;y++)for(var E=m;E<=p;E++)this.grid[y][E].push(v),v.setGridCoordinates(g,d,m,p)},s.prototype.updateGrid=function(){var v,h,c=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),v=0;v<c.length;v++)h=c[v],this.addNodeToGrid(h,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},s.prototype.calculateRepulsionForceOfANode=function(v,h,c,g){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&c||g){var d=new Set;v.surrounding=new Array;for(var m,p=this.grid,y=v.startX-1;y<v.finishX+2;y++)for(var E=v.startY-1;E<v.finishY+2;E++)if(!(y<0||E<0||y>=p.length||E>=p[0].length)){for(var T=0;T<p[y][E].length;T++)if(m=p[y][E][T],!(v.getOwner()!=m.getOwner()||v==m)&&!h.has(m)&&!d.has(m)){var w=Math.abs(v.getCenterX()-m.getCenterX())-(v.getWidth()/2+m.getWidth()/2),x=Math.abs(v.getCenterY()-m.getCenterY())-(v.getHeight()/2+m.getHeight()/2);w<=this.repulsionRange&&x<=this.repulsionRange&&d.add(m)}}v.surrounding=[].concat(a(d))}for(y=0;y<v.surrounding.length;y++)this.calcRepulsionForce(v,v.surrounding[y])},s.prototype.calcRepulsionRange=function(){return 0},t.exports=s},function(t,e,r){"use strict";var a=r(1),n=r(4);function o(l,u,s){a.call(this,l,u,s),this.idealLength=n.DEFAULT_EDGE_LENGTH,this.edgeElasticity=n.DEFAULT_SPRING_STRENGTH}o.prototype=Object.create(a.prototype);for(var i in a)o[i]=a[i];t.exports=o},function(t,e,r){"use strict";var a=r(3),n=r(4);function o(l,u,s,f){a.call(this,l,u,s,f),this.nodeRepulsion=n.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}o.prototype=Object.create(a.prototype);for(var i in a)o[i]=a[i];o.prototype.setGridCoordinates=function(l,u,s,f){this.startX=l,this.finishX=u,this.startY=s,this.finishY=f},t.exports=o},function(t,e,r){"use strict";function a(n,o){this.width=0,this.height=0,n!==null&&o!==null&&(this.height=o,this.width=n)}a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(n){this.width=n},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(n){this.height=n},t.exports=a},function(t,e,r){"use strict";var a=r(14);function n(){this.map={},this.keys=[]}n.prototype.put=function(o,i){var l=a.createID(o);this.contains(l)||(this.map[l]=i,this.keys.push(o))},n.prototype.contains=function(o){var i=a.createID(o);return this.map[o]!=null},n.prototype.get=function(o){var i=a.createID(o);return this.map[i]},n.prototype.keySet=function(){return this.keys},t.exports=n},function(t,e,r){"use strict";var a=r(14);function n(){this.set={}}n.prototype.add=function(o){var i=a.createID(o);this.contains(i)||(this.set[i]=o)},n.prototype.remove=function(o){delete this.set[a.createID(o)]},n.prototype.clear=function(){this.set={}},n.prototype.contains=function(o){return this.set[a.createID(o)]==o},n.prototype.isEmpty=function(){return this.size()===0},n.prototype.size=function(){return Object.keys(this.set).length},n.prototype.addAllTo=function(o){for(var i=Object.keys(this.set),l=i.length,u=0;u<l;u++)o.push(this.set[i[u]])},n.prototype.size=function(){return Object.keys(this.set).length},n.prototype.addAll=function(o){for(var i=o.length,l=0;l<i;l++){var u=o[l];this.add(u)}},t.exports=n},function(t,e,r){"use strict";function a(){}a.multMat=function(n,o){for(var i=[],l=0;l<n.length;l++){i[l]=[];for(var u=0;u<o[0].length;u++){i[l][u]=0;for(var s=0;s<n[0].length;s++)i[l][u]+=n[l][s]*o[s][u]}}return i},a.transpose=function(n){for(var o=[],i=0;i<n[0].length;i++){o[i]=[];for(var l=0;l<n.length;l++)o[i][l]=n[l][i]}return o},a.multCons=function(n,o){for(var i=[],l=0;l<n.length;l++)i[l]=n[l]*o;return i},a.minusOp=function(n,o){for(var i=[],l=0;l<n.length;l++)i[l]=n[l]-o[l];return i},a.dotProduct=function(n,o){for(var i=0,l=0;l<n.length;l++)i+=n[l]*o[l];return i},a.mag=function(n){return Math.sqrt(this.dotProduct(n,n))},a.normalize=function(n){for(var o=[],i=this.mag(n),l=0;l<n.length;l++)o[l]=n[l]/i;return o},a.multGamma=function(n){for(var o=[],i=0,l=0;l<n.length;l++)i+=n[l];i*=-1/n.length;for(var u=0;u<n.length;u++)o[u]=i+n[u];return o},a.multL=function(n,o,i){for(var l=[],u=[],s=[],f=0;f<o[0].length;f++){for(var v=0,h=0;h<o.length;h++)v+=-.5*o[h][f]*n[h];u[f]=v}for(var c=0;c<i.length;c++){for(var g=0,d=0;d<i.length;d++)g+=i[c][d]*u[d];s[c]=g}for(var m=0;m<o.length;m++){for(var p=0,y=0;y<o[0].length;y++)p+=o[m][y]*s[y];l[m]=p}return l},t.exports=a},function(t,e,r){"use strict";var a=function(){function l(u,s){for(var f=0;f<s.length;f++){var v=s[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(u,v.key,v)}}return function(u,s,f){return s&&l(u.prototype,s),f&&l(u,f),u}}();function n(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=r(11),i=function(){function l(u,s){n(this,l),(s!==null||s!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var f=void 0;u instanceof o?f=u.size():f=u.length,this._quicksort(u,0,f-1)}return a(l,[{key:"_quicksort",value:function(s,f,v){if(f<v){var h=this._partition(s,f,v);this._quicksort(s,f,h),this._quicksort(s,h+1,v)}}},{key:"_partition",value:function(s,f,v){for(var h=this._get(s,f),c=f,g=v;;){for(;this.compareFunction(h,this._get(s,g));)g--;for(;this.compareFunction(this._get(s,c),h);)c++;if(c<g)this._swap(s,c,g),c++,g--;else return g}}},{key:"_get",value:function(s,f){return s instanceof o?s.get_object_at(f):s[f]}},{key:"_set",value:function(s,f,v){s instanceof o?s.set_object_at(f,v):s[f]=v}},{key:"_swap",value:function(s,f,v){var h=this._get(s,f);this._set(s,f,this._get(s,v)),this._set(s,v,h)}},{key:"_defaultCompareFunction",value:function(s,f){return f>s}}]),l}();t.exports=i},function(t,e,r){"use strict";function a(){}a.svd=function(n){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=n.length,this.n=n[0].length;var o=Math.min(this.m,this.n);this.s=function(Be){for(var Fe=[];Be-- >0;)Fe.push(0);return Fe}(Math.min(this.m+1,this.n)),this.U=function(Be){var Fe=function _e(Ke){if(Ke.length==0)return 0;for(var Qe=[],wt=0;wt<Ke[0];wt++)Qe.push(_e(Ke.slice(1)));return Qe};return Fe(Be)}([this.m,o]),this.V=function(Be){var Fe=function _e(Ke){if(Ke.length==0)return 0;for(var Qe=[],wt=0;wt<Ke[0];wt++)Qe.push(_e(Ke.slice(1)));return Qe};return Fe(Be)}([this.n,this.n]);for(var i=function(Be){for(var Fe=[];Be-- >0;)Fe.push(0);return Fe}(this.n),l=function(Be){for(var Fe=[];Be-- >0;)Fe.push(0);return Fe}(this.m),u=!0,s=!0,f=Math.min(this.m-1,this.n),v=Math.max(0,Math.min(this.n-2,this.m)),h=0;h<Math.max(f,v);h++){if(h<f){this.s[h]=0;for(var c=h;c<this.m;c++)this.s[h]=a.hypot(this.s[h],n[c][h]);if(this.s[h]!==0){n[h][h]<0&&(this.s[h]=-this.s[h]);for(var g=h;g<this.m;g++)n[g][h]/=this.s[h];n[h][h]+=1}this.s[h]=-this.s[h]}for(var d=h+1;d<this.n;d++){if(function(Be,Fe){return Be&&Fe}(h<f,this.s[h]!==0)){for(var m=0,p=h;p<this.m;p++)m+=n[p][h]*n[p][d];m=-m/n[h][h];for(var y=h;y<this.m;y++)n[y][d]+=m*n[y][h]}i[d]=n[h][d]}if(function(Be,Fe){return Be&&Fe}(u,h<f))for(var E=h;E<this.m;E++)this.U[E][h]=n[E][h];if(h<v){i[h]=0;for(var T=h+1;T<this.n;T++)i[h]=a.hypot(i[h],i[T]);if(i[h]!==0){i[h+1]<0&&(i[h]=-i[h]);for(var w=h+1;w<this.n;w++)i[w]/=i[h];i[h+1]+=1}if(i[h]=-i[h],function(Be,Fe){return Be&&Fe}(h+1<this.m,i[h]!==0)){for(var x=h+1;x<this.m;x++)l[x]=0;for(var D=h+1;D<this.n;D++)for(var L=h+1;L<this.m;L++)l[L]+=i[D]*n[L][D];for(var N=h+1;N<this.n;N++)for(var A=-i[N]/i[h+1],P=h+1;P<this.m;P++)n[P][N]+=A*l[P]}if(s)for(var b=h+1;b<this.n;b++)this.V[b][h]=i[b]}}var M=Math.min(this.n,this.m+1);if(f<this.n&&(this.s[f]=n[f][f]),this.m<M&&(this.s[M-1]=0),v+1<M&&(i[v]=n[v][M-1]),i[M-1]=0,u){for(var C=f;C<o;C++){for(var O=0;O<this.m;O++)this.U[O][C]=0;this.U[C][C]=1}for(var S=f-1;S>=0;S--)if(this.s[S]!==0){for(var R=S+1;R<o;R++){for(var B=0,z=S;z<this.m;z++)B+=this.U[z][S]*this.U[z][R];B=-B/this.U[S][S];for(var G=S;G<this.m;G++)this.U[G][R]+=B*this.U[G][S]}for(var k=S;k<this.m;k++)this.U[k][S]=-this.U[k][S];this.U[S][S]=1+this.U[S][S];for(var H=0;H<S-1;H++)this.U[H][S]=0}else{for(var $=0;$<this.m;$++)this.U[$][S]=0;this.U[S][S]=1}}if(s)for(var V=this.n-1;V>=0;V--){if(function(Be,Fe){return Be&&Fe}(V<v,i[V]!==0))for(var X=V+1;X<o;X++){for(var U=0,F=V+1;F<this.n;F++)U+=this.V[F][V]*this.V[F][X];U=-U/this.V[V+1][V];for(var Y=V+1;Y<this.n;Y++)this.V[Y][X]+=U*this.V[Y][V]}for(var q=0;q<this.n;q++)this.V[q][V]=0;this.V[V][V]=1}for(var K=M-1,j=0,ge=Math.pow(2,-52),Ce=Math.pow(2,-966);M>0;){var Q=void 0,le=void 0;for(Q=M-2;Q>=-1&&Q!==-1;Q--)if(Math.abs(i[Q])<=Ce+ge*(Math.abs(this.s[Q])+Math.abs(this.s[Q+1]))){i[Q]=0;break}if(Q===M-2)le=4;else{var de=void 0;for(de=M-1;de>=Q&&de!==Q;de--){var ie=(de!==M?Math.abs(i[de]):0)+(de!==Q+1?Math.abs(i[de-1]):0);if(Math.abs(this.s[de])<=Ce+ge*ie){this.s[de]=0;break}}de===Q?le=3:de===M-1?le=1:(le=2,Q=de)}switch(Q++,le){case 1:{var _=i[M-2];i[M-2]=0;for(var ue=M-2;ue>=Q;ue--){var Ee=a.hypot(this.s[ue],_),me=this.s[ue]/Ee,pe=_/Ee;if(this.s[ue]=Ee,ue!==Q&&(_=-pe*i[ue-1],i[ue-1]=me*i[ue-1]),s)for(var re=0;re<this.n;re++)Ee=me*this.V[re][ue]+pe*this.V[re][M-1],this.V[re][M-1]=-pe*this.V[re][ue]+me*this.V[re][M-1],this.V[re][ue]=Ee}}break;case 2:{var I=i[Q-1];i[Q-1]=0;for(var Z=Q;Z<M;Z++){var oe=a.hypot(this.s[Z],I),ee=this.s[Z]/oe,te=I/oe;if(this.s[Z]=oe,I=-te*i[Z],i[Z]=ee*i[Z],u)for(var Le=0;Le<this.m;Le++)oe=ee*this.U[Le][Z]+te*this.U[Le][Q-1],this.U[Le][Q-1]=-te*this.U[Le][Z]+ee*this.U[Le][Q-1],this.U[Le][Z]=oe}}break;case 3:{var W=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[M-1]),Math.abs(this.s[M-2])),Math.abs(i[M-2])),Math.abs(this.s[Q])),Math.abs(i[Q])),J=this.s[M-1]/W,ne=this.s[M-2]/W,se=i[M-2]/W,ae=this.s[Q]/W,fe=i[Q]/W,ce=((ne+J)*(ne-J)+se*se)/2,he=J*se*(J*se),ve=0;(function(Be,Fe){return Be||Fe})(ce!==0,he!==0)&&(ve=Math.sqrt(ce*ce+he),ce<0&&(ve=-ve),ve=he/(ce+ve));for(var Te=(ae+J)*(ae-J)+ve,Oe=ae*fe,be=Q;be<M-1;be++){var Ne=a.hypot(Te,Oe),ke=Te/Ne,De=Oe/Ne;if(be!==Q&&(i[be-1]=Ne),Te=ke*this.s[be]+De*i[be],i[be]=ke*i[be]-De*this.s[be],Oe=De*this.s[be+1],this.s[be+1]=ke*this.s[be+1],s)for(var we=0;we<this.n;we++)Ne=ke*this.V[we][be]+De*this.V[we][be+1],this.V[we][be+1]=-De*this.V[we][be]+ke*this.V[we][be+1],this.V[we][be]=Ne;if(Ne=a.hypot(Te,Oe),ke=Te/Ne,De=Oe/Ne,this.s[be]=Ne,Te=ke*i[be]+De*this.s[be+1],this.s[be+1]=-De*i[be]+ke*this.s[be+1],Oe=De*i[be+1],i[be+1]=ke*i[be+1],u&&be<this.m-1)for(var Pe=0;Pe<this.m;Pe++)Ne=ke*this.U[Pe][be]+De*this.U[Pe][be+1],this.U[Pe][be+1]=-De*this.U[Pe][be]+ke*this.U[Pe][be+1],this.U[Pe][be]=Ne}i[M-2]=Te,j=j+1}break;case 4:{if(this.s[Q]<=0&&(this.s[Q]=this.s[Q]<0?-this.s[Q]:0,s))for(var Me=0;Me<=K;Me++)this.V[Me][Q]=-this.V[Me][Q];for(;Q<K&&!(this.s[Q]>=this.s[Q+1]);){var Ae=this.s[Q];if(this.s[Q]=this.s[Q+1],this.s[Q+1]=Ae,s&&Q<this.n-1)for(var $e=0;$e<this.n;$e++)Ae=this.V[$e][Q+1],this.V[$e][Q+1]=this.V[$e][Q],this.V[$e][Q]=Ae;if(u&&Q<this.m-1)for(var Ye=0;Ye<this.m;Ye++)Ae=this.U[Ye][Q+1],this.U[Ye][Q+1]=this.U[Ye][Q],this.U[Ye][Q]=Ae;Q++}j=0,M--}break}}var ot={U:this.U,V:this.V,S:this.s};return ot},a.hypot=function(n,o){var i=void 0;return Math.abs(n)>Math.abs(o)?(i=o/n,i=Math.abs(n)*Math.sqrt(1+i*i)):o!=0?(i=n/o,i=Math.abs(o)*Math.sqrt(1+i*i)):i=0,i},t.exports=a},function(t,e,r){"use strict";var a=function(){function i(l,u){for(var s=0;s<u.length;s++){var f=u[s];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,u,s){return u&&i(l.prototype,u),s&&i(l,s),l}}();function n(i,l){if(!(i instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function(){function i(l,u){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;n(this,i),this.sequence1=l,this.sequence2=u,this.match_score=s,this.mismatch_penalty=f,this.gap_penalty=v,this.iMax=l.length+1,this.jMax=u.length+1,this.grid=new Array(this.iMax);for(var h=0;h<this.iMax;h++){this.grid[h]=new Array(this.jMax);for(var c=0;c<this.jMax;c++)this.grid[h][c]=0}this.tracebackGrid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.tracebackGrid[g]=new Array(this.jMax);for(var d=0;d<this.jMax;d++)this.tracebackGrid[g][d]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return a(i,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var u=1;u<this.jMax;u++)this.grid[0][u]=this.grid[0][u-1]+this.gap_penalty,this.tracebackGrid[0][u]=[!1,!1,!0];for(var s=1;s<this.iMax;s++)this.grid[s][0]=this.grid[s-1][0]+this.gap_penalty,this.tracebackGrid[s][0]=[!1,!0,!1];for(var f=1;f<this.iMax;f++)for(var v=1;v<this.jMax;v++){var h=void 0;this.sequence1[f-1]===this.sequence2[v-1]?h=this.grid[f-1][v-1]+this.match_score:h=this.grid[f-1][v-1]+this.mismatch_penalty;var c=this.grid[f-1][v]+this.gap_penalty,g=this.grid[f][v-1]+this.gap_penalty,d=[h,c,g],m=this.arrayAllMaxIndexes(d);this.grid[f][v]=d[m[0]],this.tracebackGrid[f][v]=[m.includes(0),m.includes(1),m.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var u=[];for(u.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});u[0];){var s=u[0],f=this.tracebackGrid[s.pos[0]][s.pos[1]];f[0]&&u.push({pos:[s.pos[0]-1,s.pos[1]-1],seq1:this.sequence1[s.pos[0]-1]+s.seq1,seq2:this.sequence2[s.pos[1]-1]+s.seq2}),f[1]&&u.push({pos:[s.pos[0]-1,s.pos[1]],seq1:this.sequence1[s.pos[0]-1]+s.seq1,seq2:"-"+s.seq2}),f[2]&&u.push({pos:[s.pos[0],s.pos[1]-1],seq1:"-"+s.seq1,seq2:this.sequence2[s.pos[1]-1]+s.seq2}),s.pos[0]===0&&s.pos[1]===0&&this.alignments.push({sequence1:s.seq1,sequence2:s.seq2}),u.shift()}return this.alignments}},{key:"getAllIndexes",value:function(u,s){for(var f=[],v=-1;(v=u.indexOf(s,v+1))!==-1;)f.push(v);return f}},{key:"arrayAllMaxIndexes",value:function(u){return this.getAllIndexes(u,Math.max.apply(null,u))}}]),i}();t.exports=o},function(t,e,r){"use strict";var a=function(){};a.FDLayout=r(18),a.FDLayoutConstants=r(4),a.FDLayoutEdge=r(19),a.FDLayoutNode=r(20),a.DimensionD=r(21),a.HashMap=r(22),a.HashSet=r(23),a.IGeometry=r(8),a.IMath=r(9),a.Integer=r(10),a.Point=r(12),a.PointD=r(5),a.RandomSeed=r(16),a.RectangleD=r(13),a.Transform=r(17),a.UniqueIDGeneretor=r(14),a.Quicksort=r(25),a.LinkedList=r(11),a.LGraphObject=r(2),a.LGraph=r(6),a.LEdge=r(1),a.LGraphManager=r(7),a.LNode=r(3),a.Layout=r(15),a.LayoutConstants=r(0),a.NeedlemanWunsch=r(27),a.Matrix=r(24),a.SVD=r(26),t.exports=a},function(t,e,r){"use strict";function a(){this.listeners=[]}var n=a.prototype;n.addListener=function(o,i){this.listeners.push({event:o,callback:i})},n.removeListener=function(o,i){for(var l=this.listeners.length;l>=0;l--){var u=this.listeners[l];u.event===o&&u.callback===i&&this.listeners.splice(l,1)}},n.emit=function(o,i){for(var l=0;l<this.listeners.length;l++){var u=this.listeners[l];o===u.event&&u.callback(i)}},t.exports=a}])})});var Wi=xe(($a,qi)=>{(function(e,r){typeof $a=="object"&&typeof qi=="object"?qi.exports=r(Yi()):typeof define=="function"&&define.amd?define(["layout-base"],r):typeof $a=="object"?$a.coseBase=r(Yi()):e.coseBase=r(e.layoutBase)})($a,function(t){return(()=>{"use strict";var e={45:(o,i,l)=>{var u={};u.layoutBase=l(551),u.CoSEConstants=l(806),u.CoSEEdge=l(767),u.CoSEGraph=l(880),u.CoSEGraphManager=l(578),u.CoSELayout=l(765),u.CoSENode=l(991),u.ConstraintHandler=l(902),o.exports=u},806:(o,i,l)=>{var u=l(551).FDLayoutConstants;function s(){}for(var f in u)s[f]=u[f];s.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,s.DEFAULT_RADIAL_SEPARATION=u.DEFAULT_EDGE_LENGTH,s.DEFAULT_COMPONENT_SEPERATION=60,s.TILE=!0,s.TILING_PADDING_VERTICAL=10,s.TILING_PADDING_HORIZONTAL=10,s.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,s.ENFORCE_CONSTRAINTS=!0,s.APPLY_LAYOUT=!0,s.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,s.TREE_REDUCTION_ON_INCREMENTAL=!0,s.PURE_INCREMENTAL=s.DEFAULT_INCREMENTAL,o.exports=s},767:(o,i,l)=>{var u=l(551).FDLayoutEdge;function s(v,h,c){u.call(this,v,h,c)}s.prototype=Object.create(u.prototype);for(var f in u)s[f]=u[f];o.exports=s},880:(o,i,l)=>{var u=l(551).LGraph;function s(v,h,c){u.call(this,v,h,c)}s.prototype=Object.create(u.prototype);for(var f in u)s[f]=u[f];o.exports=s},578:(o,i,l)=>{var u=l(551).LGraphManager;function s(v){u.call(this,v)}s.prototype=Object.create(u.prototype);for(var f in u)s[f]=u[f];o.exports=s},765:(o,i,l)=>{var u=l(551).FDLayout,s=l(578),f=l(880),v=l(991),h=l(767),c=l(806),g=l(902),d=l(551).FDLayoutConstants,m=l(551).LayoutConstants,p=l(551).Point,y=l(551).PointD,E=l(551).DimensionD,T=l(551).Layout,w=l(551).Integer,x=l(551).IGeometry,D=l(551).LGraph,L=l(551).Transform,N=l(551).LinkedList;function A(){u.call(this),this.toBeTiled={},this.constraints={}}A.prototype=Object.create(u.prototype);for(var P in u)A[P]=u[P];A.prototype.newGraphManager=function(){var b=new s(this);return this.graphManager=b,b},A.prototype.newGraph=function(b){return new f(null,this.graphManager,b)},A.prototype.newNode=function(b){return new v(this.graphManager,b)},A.prototype.newEdge=function(b){return new h(null,null,b)},A.prototype.initParameters=function(){u.prototype.initParameters.call(this,arguments),this.isSubLayout||(c.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=c.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=c.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=d.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=d.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=d.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},A.prototype.initSpringEmbedder=function(){u.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/d.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},A.prototype.layout=function(){var b=m.DEFAULT_CREATE_BENDS_AS_NEEDED;return b&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},A.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(c.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var M=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(R){return M.has(R)});this.graphManager.setAllNodesToApplyGravitation(C)}}else{var b=this.getFlatForest();if(b.length>0)this.positionNodesRadially(b);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var M=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(O){return M.has(O)});this.graphManager.setAllNodesToApplyGravitation(C),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(g.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),c.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},A.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%d.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var b=new Set(this.getAllNodes()),M=this.nodesWithGravity.filter(function(S){return b.has(S)});this.graphManager.setAllNodesToApplyGravitation(M),this.graphManager.updateBounds(),this.updateGrid(),c.PURE_INCREMENTAL?this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),c.PURE_INCREMENTAL?this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var C=!this.isTreeGrowing&&!this.isGrowthFinished,O=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(C,O),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},A.prototype.getPositionsData=function(){for(var b=this.graphManager.getAllNodes(),M={},C=0;C<b.length;C++){var O=b[C].rect,S=b[C].id;M[S]={id:S,x:O.getCenterX(),y:O.getCenterY(),w:O.width,h:O.height}}return M},A.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var b=!1;if(d.ANIMATE==="during")this.emit("layoutstarted");else{for(;!b;)b=this.tick();this.graphManager.updateBounds()}},A.prototype.moveNodes=function(){for(var b=this.getAllNodes(),M,C=0;C<b.length;C++)M=b[C],M.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var C=0;C<b.length;C++)M=b[C],M.move()},A.prototype.initConstraintVariables=function(){var b=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var M=this.graphManager.getAllNodes(),C=0;C<M.length;C++){var O=M[C];this.idToNodeMap.set(O.id,O)}var S=function F(Y){for(var q=Y.getChild().getNodes(),K,j=0,ge=0;ge<q.length;ge++)K=q[ge],K.getChild()==null?b.fixedNodeSet.has(K.id)&&(j+=100):j+=F(K);return j};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(q){b.fixedNodeSet.add(q.nodeId)});for(var M=this.graphManager.getAllNodes(),O,C=0;C<M.length;C++)if(O=M[C],O.getChild()!=null){var R=S(O);R>0&&(O.fixedNodeWeight=R)}}if(this.constraints.relativePlacementConstraint){var B=new Map,z=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(F){b.fixedNodesOnHorizontal.add(F),b.fixedNodesOnVertical.add(F)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var G=this.constraints.alignmentConstraint.vertical,C=0;C<G.length;C++)this.dummyToNodeForVerticalAlignment.set("dummy"+C,[]),G[C].forEach(function(Y){B.set(Y,"dummy"+C),b.dummyToNodeForVerticalAlignment.get("dummy"+C).push(Y),b.fixedNodeSet.has(Y)&&b.fixedNodesOnHorizontal.add("dummy"+C)});if(this.constraints.alignmentConstraint.horizontal)for(var k=this.constraints.alignmentConstraint.horizontal,C=0;C<k.length;C++)this.dummyToNodeForHorizontalAlignment.set("dummy"+C,[]),k[C].forEach(function(Y){z.set(Y,"dummy"+C),b.dummyToNodeForHorizontalAlignment.get("dummy"+C).push(Y),b.fixedNodeSet.has(Y)&&b.fixedNodesOnVertical.add("dummy"+C)})}if(c.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(F){var Y,q,K;for(K=F.length-1;K>=2*F.length/3;K--)Y=Math.floor(Math.random()*(K+1)),q=F[K],F[K]=F[Y],F[Y]=q;return F},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(F){if(F.left){var Y=B.has(F.left)?B.get(F.left):F.left,q=B.has(F.right)?B.get(F.right):F.right;b.nodesInRelativeHorizontal.includes(Y)||(b.nodesInRelativeHorizontal.push(Y),b.nodeToRelativeConstraintMapHorizontal.set(Y,[]),b.dummyToNodeForVerticalAlignment.has(Y)?b.nodeToTempPositionMapHorizontal.set(Y,b.idToNodeMap.get(b.dummyToNodeForVerticalAlignment.get(Y)[0]).getCenterX()):b.nodeToTempPositionMapHorizontal.set(Y,b.idToNodeMap.get(Y).getCenterX())),b.nodesInRelativeHorizontal.includes(q)||(b.nodesInRelativeHorizontal.push(q),b.nodeToRelativeConstraintMapHorizontal.set(q,[]),b.dummyToNodeForVerticalAlignment.has(q)?b.nodeToTempPositionMapHorizontal.set(q,b.idToNodeMap.get(b.dummyToNodeForVerticalAlignment.get(q)[0]).getCenterX()):b.nodeToTempPositionMapHorizontal.set(q,b.idToNodeMap.get(q).getCenterX())),b.nodeToRelativeConstraintMapHorizontal.get(Y).push({right:q,gap:F.gap}),b.nodeToRelativeConstraintMapHorizontal.get(q).push({left:Y,gap:F.gap})}else{var K=z.has(F.top)?z.get(F.top):F.top,j=z.has(F.bottom)?z.get(F.bottom):F.bottom;b.nodesInRelativeVertical.includes(K)||(b.nodesInRelativeVertical.push(K),b.nodeToRelativeConstraintMapVertical.set(K,[]),b.dummyToNodeForHorizontalAlignment.has(K)?b.nodeToTempPositionMapVertical.set(K,b.idToNodeMap.get(b.dummyToNodeForHorizontalAlignment.get(K)[0]).getCenterY()):b.nodeToTempPositionMapVertical.set(K,b.idToNodeMap.get(K).getCenterY())),b.nodesInRelativeVertical.includes(j)||(b.nodesInRelativeVertical.push(j),b.nodeToRelativeConstraintMapVertical.set(j,[]),b.dummyToNodeForHorizontalAlignment.has(j)?b.nodeToTempPositionMapVertical.set(j,b.idToNodeMap.get(b.dummyToNodeForHorizontalAlignment.get(j)[0]).getCenterY()):b.nodeToTempPositionMapVertical.set(j,b.idToNodeMap.get(j).getCenterY())),b.nodeToRelativeConstraintMapVertical.get(K).push({bottom:j,gap:F.gap}),b.nodeToRelativeConstraintMapVertical.get(j).push({top:K,gap:F.gap})}});else{var H=new Map,$=new Map;this.constraints.relativePlacementConstraint.forEach(function(F){if(F.left){var Y=B.has(F.left)?B.get(F.left):F.left,q=B.has(F.right)?B.get(F.right):F.right;H.has(Y)?H.get(Y).push(q):H.set(Y,[q]),H.has(q)?H.get(q).push(Y):H.set(q,[Y])}else{var K=z.has(F.top)?z.get(F.top):F.top,j=z.has(F.bottom)?z.get(F.bottom):F.bottom;$.has(K)?$.get(K).push(j):$.set(K,[j]),$.has(j)?$.get(j).push(K):$.set(j,[K])}});var V=function(Y,q){var K=[],j=[],ge=new N,Ce=new Set,Q=0;return Y.forEach(function(le,de){if(!Ce.has(de)){K[Q]=[],j[Q]=!1;var ie=de;for(ge.push(ie),Ce.add(ie),K[Q].push(ie);ge.length!=0;){ie=ge.shift(),q.has(ie)&&(j[Q]=!0);var _=Y.get(ie);_.forEach(function(ue){Ce.has(ue)||(ge.push(ue),Ce.add(ue),K[Q].push(ue))})}Q++}}),{components:K,isFixed:j}},X=V(H,b.fixedNodesOnHorizontal);this.componentsOnHorizontal=X.components,this.fixedComponentsOnHorizontal=X.isFixed;var U=V($,b.fixedNodesOnVertical);this.componentsOnVertical=U.components,this.fixedComponentsOnVertical=U.isFixed}}},A.prototype.updateDisplacements=function(){var b=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(U){var F=b.idToNodeMap.get(U.nodeId);F.displacementX=0,F.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var M=this.constraints.alignmentConstraint.vertical,C=0;C<M.length;C++){for(var O=0,S=0;S<M[C].length;S++){if(this.fixedNodeSet.has(M[C][S])){O=0;break}O+=this.idToNodeMap.get(M[C][S]).displacementX}for(var R=O/M[C].length,S=0;S<M[C].length;S++)this.idToNodeMap.get(M[C][S]).displacementX=R}if(this.constraints.alignmentConstraint.horizontal)for(var B=this.constraints.alignmentConstraint.horizontal,C=0;C<B.length;C++){for(var z=0,S=0;S<B[C].length;S++){if(this.fixedNodeSet.has(B[C][S])){z=0;break}z+=this.idToNodeMap.get(B[C][S]).displacementY}for(var G=z/B[C].length,S=0;S<B[C].length;S++)this.idToNodeMap.get(B[C][S]).displacementY=G}}if(this.constraints.relativePlacementConstraint)if(c.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(U){if(!b.fixedNodesOnHorizontal.has(U)){var F=0;b.dummyToNodeForVerticalAlignment.has(U)?F=b.idToNodeMap.get(b.dummyToNodeForVerticalAlignment.get(U)[0]).displacementX:F=b.idToNodeMap.get(U).displacementX,b.nodeToRelativeConstraintMapHorizontal.get(U).forEach(function(Y){if(Y.right){var q=b.nodeToTempPositionMapHorizontal.get(Y.right)-b.nodeToTempPositionMapHorizontal.get(U)-F;q<Y.gap&&(F-=Y.gap-q)}else{var q=b.nodeToTempPositionMapHorizontal.get(U)-b.nodeToTempPositionMapHorizontal.get(Y.left)+F;q<Y.gap&&(F+=Y.gap-q)}}),b.nodeToTempPositionMapHorizontal.set(U,b.nodeToTempPositionMapHorizontal.get(U)+F),b.dummyToNodeForVerticalAlignment.has(U)?b.dummyToNodeForVerticalAlignment.get(U).forEach(function(Y){b.idToNodeMap.get(Y).displacementX=F}):b.idToNodeMap.get(U).displacementX=F}}),this.nodesInRelativeVertical.forEach(function(U){if(!b.fixedNodesOnHorizontal.has(U)){var F=0;b.dummyToNodeForHorizontalAlignment.has(U)?F=b.idToNodeMap.get(b.dummyToNodeForHorizontalAlignment.get(U)[0]).displacementY:F=b.idToNodeMap.get(U).displacementY,b.nodeToRelativeConstraintMapVertical.get(U).forEach(function(Y){if(Y.bottom){var q=b.nodeToTempPositionMapVertical.get(Y.bottom)-b.nodeToTempPositionMapVertical.get(U)-F;q<Y.gap&&(F-=Y.gap-q)}else{var q=b.nodeToTempPositionMapVertical.get(U)-b.nodeToTempPositionMapVertical.get(Y.top)+F;q<Y.gap&&(F+=Y.gap-q)}}),b.nodeToTempPositionMapVertical.set(U,b.nodeToTempPositionMapVertical.get(U)+F),b.dummyToNodeForHorizontalAlignment.has(U)?b.dummyToNodeForHorizontalAlignment.get(U).forEach(function(Y){b.idToNodeMap.get(Y).displacementY=F}):b.idToNodeMap.get(U).displacementY=F}});else{for(var C=0;C<this.componentsOnHorizontal.length;C++){var k=this.componentsOnHorizontal[C];if(this.fixedComponentsOnHorizontal[C])for(var S=0;S<k.length;S++)this.dummyToNodeForVerticalAlignment.has(k[S])?this.dummyToNodeForVerticalAlignment.get(k[S]).forEach(function(Y){b.idToNodeMap.get(Y).displacementX=0}):this.idToNodeMap.get(k[S]).displacementX=0;else{for(var H=0,$=0,S=0;S<k.length;S++)if(this.dummyToNodeForVerticalAlignment.has(k[S])){var V=this.dummyToNodeForVerticalAlignment.get(k[S]);H+=V.length*this.idToNodeMap.get(V[0]).displacementX,$+=V.length}else H+=this.idToNodeMap.get(k[S]).displacementX,$++;for(var X=H/$,S=0;S<k.length;S++)this.dummyToNodeForVerticalAlignment.has(k[S])?this.dummyToNodeForVerticalAlignment.get(k[S]).forEach(function(Y){b.idToNodeMap.get(Y).displacementX=X}):this.idToNodeMap.get(k[S]).displacementX=X}}for(var C=0;C<this.componentsOnVertical.length;C++){var k=this.componentsOnVertical[C];if(this.fixedComponentsOnVertical[C])for(var S=0;S<k.length;S++)this.dummyToNodeForHorizontalAlignment.has(k[S])?this.dummyToNodeForHorizontalAlignment.get(k[S]).forEach(function(q){b.idToNodeMap.get(q).displacementY=0}):this.idToNodeMap.get(k[S]).displacementY=0;else{for(var H=0,$=0,S=0;S<k.length;S++)if(this.dummyToNodeForHorizontalAlignment.has(k[S])){var V=this.dummyToNodeForHorizontalAlignment.get(k[S]);H+=V.length*this.idToNodeMap.get(V[0]).displacementY,$+=V.length}else H+=this.idToNodeMap.get(k[S]).displacementY,$++;for(var X=H/$,S=0;S<k.length;S++)this.dummyToNodeForHorizontalAlignment.has(k[S])?this.dummyToNodeForHorizontalAlignment.get(k[S]).forEach(function(ge){b.idToNodeMap.get(ge).displacementY=X}):this.idToNodeMap.get(k[S]).displacementY=X}}}},A.prototype.calculateNodesToApplyGravitationTo=function(){var b=[],M,C=this.graphManager.getGraphs(),O=C.length,S;for(S=0;S<O;S++)M=C[S],M.updateConnected(),M.isConnected||(b=b.concat(M.getNodes()));return b},A.prototype.createBendpoints=function(){var b=[];b=b.concat(this.graphManager.getAllEdges());var M=new Set,C;for(C=0;C<b.length;C++){var O=b[C];if(!M.has(O)){var S=O.getSource(),R=O.getTarget();if(S==R)O.getBendpoints().push(new y),O.getBendpoints().push(new y),this.createDummyNodesForBendpoints(O),M.add(O);else{var B=[];if(B=B.concat(S.getEdgeListToNode(R)),B=B.concat(R.getEdgeListToNode(S)),!M.has(B[0])){if(B.length>1){var z;for(z=0;z<B.length;z++){var G=B[z];G.getBendpoints().push(new y),this.createDummyNodesForBendpoints(G)}}B.forEach(function(k){M.add(k)})}}}if(M.size==b.length)break}},A.prototype.positionNodesRadially=function(b){for(var M=new p(0,0),C=Math.ceil(Math.sqrt(b.length)),O=0,S=0,R=0,B=new y(0,0),z=0;z<b.length;z++){z%C==0&&(R=0,S=O,z!=0&&(S+=c.DEFAULT_COMPONENT_SEPERATION),O=0);var G=b[z],k=T.findCenterOfTree(G);M.x=R,M.y=S,B=A.radialLayout(G,k,M),B.y>O&&(O=Math.floor(B.y)),R=Math.floor(B.x+c.DEFAULT_COMPONENT_SEPERATION)}this.transform(new y(m.WORLD_CENTER_X-B.x/2,m.WORLD_CENTER_Y-B.y/2))},A.radialLayout=function(b,M,C){var O=Math.max(this.maxDiagonalInTree(b),c.DEFAULT_RADIAL_SEPARATION);A.branchRadialLayout(M,null,0,359,0,O);var S=D.calculateBounds(b),R=new L;R.setDeviceOrgX(S.getMinX()),R.setDeviceOrgY(S.getMinY()),R.setWorldOrgX(C.x),R.setWorldOrgY(C.y);for(var B=0;B<b.length;B++){var z=b[B];z.transform(R)}var G=new y(S.getMaxX(),S.getMaxY());return R.inverseTransformPoint(G)},A.branchRadialLayout=function(b,M,C,O,S,R){var B=(O-C+1)/2;B<0&&(B+=180);var z=(B+C)%360,G=z*x.TWO_PI/360,k=Math.cos(G),H=S*Math.cos(G),$=S*Math.sin(G);b.setCenter(H,$);var V=[];V=V.concat(b.getEdges());var X=V.length;M!=null&&X--;for(var U=0,F=V.length,Y,q=b.getEdgesBetween(M);q.length>1;){var K=q[0];q.splice(0,1);var j=V.indexOf(K);j>=0&&V.splice(j,1),F--,X--}M!=null?Y=(V.indexOf(q[0])+1)%F:Y=0;for(var ge=Math.abs(O-C)/X,Ce=Y;U!=X;Ce=++Ce%F){var Q=V[Ce].getOtherEnd(b);if(Q!=M){var le=(C+U*ge)%360,de=(le+ge)%360;A.branchRadialLayout(Q,b,le,de,S+R,R),U++}}},A.maxDiagonalInTree=function(b){for(var M=w.MIN_VALUE,C=0;C<b.length;C++){var O=b[C],S=O.getDiagonal();S>M&&(M=S)}return M},A.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},A.prototype.groupZeroDegreeMembers=function(){var b=this,M={};this.memberGroups={},this.idToDummyNode={};for(var C=[],O=this.graphManager.getAllNodes(),S=0;S<O.length;S++){var R=O[S],B=R.getParent();this.getNodeDegreeWithChildren(R)===0&&(B.id==null||!this.getToBeTiled(B))&&C.push(R)}for(var S=0;S<C.length;S++){var R=C[S],z=R.getParent().id;typeof M[z]>"u"&&(M[z]=[]),M[z]=M[z].concat(R)}Object.keys(M).forEach(function(G){if(M[G].length>1){var k="DummyCompound_"+G;b.memberGroups[k]=M[G];var H=M[G][0].getParent(),$=new v(b.graphManager);$.id=k,$.paddingLeft=H.paddingLeft||0,$.paddingRight=H.paddingRight||0,$.paddingBottom=H.paddingBottom||0,$.paddingTop=H.paddingTop||0,b.idToDummyNode[k]=$;var V=b.getGraphManager().add(b.newGraph(),$),X=H.getChild();X.add($);for(var U=0;U<M[G].length;U++){var F=M[G][U];X.remove(F),V.add(F)}}})},A.prototype.clearCompounds=function(){var b={},M={};this.performDFSOnCompounds();for(var C=0;C<this.compoundOrder.length;C++)M[this.compoundOrder[C].id]=this.compoundOrder[C],b[this.compoundOrder[C].id]=[].concat(this.compoundOrder[C].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[C].getChild()),this.compoundOrder[C].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(b,M)},A.prototype.clearZeroDegreeMembers=function(){var b=this,M=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(C){var O=b.idToDummyNode[C];if(M[C]=b.tileNodes(b.memberGroups[C],O.paddingLeft+O.paddingRight),O.rect.width=M[C].width,O.rect.height=M[C].height,O.setCenter(M[C].centerX,M[C].centerY),O.labelMarginLeft=0,O.labelMarginTop=0,c.NODE_DIMENSIONS_INCLUDE_LABELS){var S=O.rect.width,R=O.rect.height;O.labelWidth&&(O.labelPosHorizontal=="left"?(O.rect.x-=O.labelWidth,O.setWidth(S+O.labelWidth),O.labelMarginLeft=O.labelWidth):O.labelPosHorizontal=="center"&&O.labelWidth>S?(O.rect.x-=(O.labelWidth-S)/2,O.setWidth(O.labelWidth),O.labelMarginLeft=(O.labelWidth-S)/2):O.labelPosHorizontal=="right"&&O.setWidth(S+O.labelWidth)),O.labelHeight&&(O.labelPosVertical=="top"?(O.rect.y-=O.labelHeight,O.setHeight(R+O.labelHeight),O.labelMarginTop=O.labelHeight):O.labelPosVertical=="center"&&O.labelHeight>R?(O.rect.y-=(O.labelHeight-R)/2,O.setHeight(O.labelHeight),O.labelMarginTop=(O.labelHeight-R)/2):O.labelPosVertical=="bottom"&&O.setHeight(R+O.labelHeight))}})},A.prototype.repopulateCompounds=function(){for(var b=this.compoundOrder.length-1;b>=0;b--){var M=this.compoundOrder[b],C=M.id,O=M.paddingLeft,S=M.paddingTop,R=M.labelMarginLeft,B=M.labelMarginTop;this.adjustLocations(this.tiledMemberPack[C],M.rect.x,M.rect.y,O,S,R,B)}},A.prototype.repopulateZeroDegreeMembers=function(){var b=this,M=this.tiledZeroDegreePack;Object.keys(M).forEach(function(C){var O=b.idToDummyNode[C],S=O.paddingLeft,R=O.paddingTop,B=O.labelMarginLeft,z=O.labelMarginTop;b.adjustLocations(M[C],O.rect.x,O.rect.y,S,R,B,z)})},A.prototype.getToBeTiled=function(b){var M=b.id;if(this.toBeTiled[M]!=null)return this.toBeTiled[M];var C=b.getChild();if(C==null)return this.toBeTiled[M]=!1,!1;for(var O=C.getNodes(),S=0;S<O.length;S++){var R=O[S];if(this.getNodeDegree(R)>0)return this.toBeTiled[M]=!1,!1;if(R.getChild()==null){this.toBeTiled[R.id]=!1;continue}if(!this.getToBeTiled(R))return this.toBeTiled[M]=!1,!1}return this.toBeTiled[M]=!0,!0},A.prototype.getNodeDegree=function(b){for(var M=b.id,C=b.getEdges(),O=0,S=0;S<C.length;S++){var R=C[S];R.getSource().id!==R.getTarget().id&&(O=O+1)}return O},A.prototype.getNodeDegreeWithChildren=function(b){var M=this.getNodeDegree(b);if(b.getChild()==null)return M;for(var C=b.getChild().getNodes(),O=0;O<C.length;O++){var S=C[O];M+=this.getNodeDegreeWithChildren(S)}return M},A.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},A.prototype.fillCompexOrderByDFS=function(b){for(var M=0;M<b.length;M++){var C=b[M];C.getChild()!=null&&this.fillCompexOrderByDFS(C.getChild().getNodes()),this.getToBeTiled(C)&&this.compoundOrder.push(C)}},A.prototype.adjustLocations=function(b,M,C,O,S,R,B){M+=O+R,C+=S+B;for(var z=M,G=0;G<b.rows.length;G++){var k=b.rows[G];M=z;for(var H=0,$=0;$<k.length;$++){var V=k[$];V.rect.x=M,V.rect.y=C,M+=V.rect.width+b.horizontalPadding,V.rect.height>H&&(H=V.rect.height)}C+=H+b.verticalPadding}},A.prototype.tileCompoundMembers=function(b,M){var C=this;this.tiledMemberPack=[],Object.keys(b).forEach(function(O){var S=M[O];if(C.tiledMemberPack[O]=C.tileNodes(b[O],S.paddingLeft+S.paddingRight),S.rect.width=C.tiledMemberPack[O].width,S.rect.height=C.tiledMemberPack[O].height,S.setCenter(C.tiledMemberPack[O].centerX,C.tiledMemberPack[O].centerY),S.labelMarginLeft=0,S.labelMarginTop=0,c.NODE_DIMENSIONS_INCLUDE_LABELS){var R=S.rect.width,B=S.rect.height;S.labelWidth&&(S.labelPosHorizontal=="left"?(S.rect.x-=S.labelWidth,S.setWidth(R+S.labelWidth),S.labelMarginLeft=S.labelWidth):S.labelPosHorizontal=="center"&&S.labelWidth>R?(S.rect.x-=(S.labelWidth-R)/2,S.setWidth(S.labelWidth),S.labelMarginLeft=(S.labelWidth-R)/2):S.labelPosHorizontal=="right"&&S.setWidth(R+S.labelWidth)),S.labelHeight&&(S.labelPosVertical=="top"?(S.rect.y-=S.labelHeight,S.setHeight(B+S.labelHeight),S.labelMarginTop=S.labelHeight):S.labelPosVertical=="center"&&S.labelHeight>B?(S.rect.y-=(S.labelHeight-B)/2,S.setHeight(S.labelHeight),S.labelMarginTop=(S.labelHeight-B)/2):S.labelPosVertical=="bottom"&&S.setHeight(B+S.labelHeight))}})},A.prototype.tileNodes=function(b,M){var C=this.tileNodesByFavoringDim(b,M,!0),O=this.tileNodesByFavoringDim(b,M,!1),S=this.getOrgRatio(C),R=this.getOrgRatio(O),B;return R<S?B=O:B=C,B},A.prototype.getOrgRatio=function(b){var M=b.width,C=b.height,O=M/C;return O<1&&(O=1/O),O},A.prototype.calcIdealRowWidth=function(b,M){var C=c.TILING_PADDING_VERTICAL,O=c.TILING_PADDING_HORIZONTAL,S=b.length,R=0,B=0,z=0;b.forEach(function(U){R+=U.getWidth(),B+=U.getHeight(),U.getWidth()>z&&(z=U.getWidth())});var G=R/S,k=B/S,H=Math.pow(C-O,2)+4*(G+O)*(k+C)*S,$=(O-C+Math.sqrt(H))/(2*(G+O)),V;M?(V=Math.ceil($),V==$&&V++):V=Math.floor($);var X=V*(G+O)-O;return z>X&&(X=z),X+=O*2,X},A.prototype.tileNodesByFavoringDim=function(b,M,C){var O=c.TILING_PADDING_VERTICAL,S=c.TILING_PADDING_HORIZONTAL,R=c.TILING_COMPARE_BY,B={rows:[],rowWidth:[],rowHeight:[],width:0,height:M,verticalPadding:O,horizontalPadding:S,centerX:0,centerY:0};R&&(B.idealRowWidth=this.calcIdealRowWidth(b,C));var z=function(F){return F.rect.width*F.rect.height},G=function(F,Y){return z(Y)-z(F)};b.sort(function(U,F){var Y=G;return B.idealRowWidth?(Y=R,Y(U.id,F.id)):Y(U,F)});for(var k=0,H=0,$=0;$<b.length;$++){var V=b[$];k+=V.getCenterX(),H+=V.getCenterY()}B.centerX=k/b.length,B.centerY=H/b.length;for(var $=0;$<b.length;$++){var V=b[$];if(B.rows.length==0)this.insertNodeToRow(B,V,0,M);else if(this.canAddHorizontal(B,V.rect.width,V.rect.height)){var X=B.rows.length-1;B.idealRowWidth||(X=this.getShortestRowIndex(B)),this.insertNodeToRow(B,V,X,M)}else this.insertNodeToRow(B,V,B.rows.length,M);this.shiftToLastRow(B)}return B},A.prototype.insertNodeToRow=function(b,M,C,O){var S=O;if(C==b.rows.length){var R=[];b.rows.push(R),b.rowWidth.push(S),b.rowHeight.push(0)}var B=b.rowWidth[C]+M.rect.width;b.rows[C].length>0&&(B+=b.horizontalPadding),b.rowWidth[C]=B,b.width<B&&(b.width=B);var z=M.rect.height;C>0&&(z+=b.verticalPadding);var G=0;z>b.rowHeight[C]&&(G=b.rowHeight[C],b.rowHeight[C]=z,G=b.rowHeight[C]-G),b.height+=G,b.rows[C].push(M)},A.prototype.getShortestRowIndex=function(b){for(var M=-1,C=Number.MAX_VALUE,O=0;O<b.rows.length;O++)b.rowWidth[O]<C&&(M=O,C=b.rowWidth[O]);return M},A.prototype.getLongestRowIndex=function(b){for(var M=-1,C=Number.MIN_VALUE,O=0;O<b.rows.length;O++)b.rowWidth[O]>C&&(M=O,C=b.rowWidth[O]);return M},A.prototype.canAddHorizontal=function(b,M,C){if(b.idealRowWidth){var O=b.rows.length-1,S=b.rowWidth[O];return S+M+b.horizontalPadding<=b.idealRowWidth}var R=this.getShortestRowIndex(b);if(R<0)return!0;var B=b.rowWidth[R];if(B+b.horizontalPadding+M<=b.width)return!0;var z=0;b.rowHeight[R]<C&&R>0&&(z=C+b.verticalPadding-b.rowHeight[R]);var G;b.width-B>=M+b.horizontalPadding?G=(b.height+z)/(B+M+b.horizontalPadding):G=(b.height+z)/b.width,z=C+b.verticalPadding;var k;return b.width<M?k=(b.height+z)/M:k=(b.height+z)/b.width,k<1&&(k=1/k),G<1&&(G=1/G),G<k},A.prototype.shiftToLastRow=function(b){var M=this.getLongestRowIndex(b),C=b.rowWidth.length-1,O=b.rows[M],S=O[O.length-1],R=S.width+b.horizontalPadding;if(b.width-b.rowWidth[C]>R&&M!=C){O.splice(-1,1),b.rows[C].push(S),b.rowWidth[M]=b.rowWidth[M]-R,b.rowWidth[C]=b.rowWidth[C]+R,b.width=b.rowWidth[instance.getLongestRowIndex(b)];for(var B=Number.MIN_VALUE,z=0;z<O.length;z++)O[z].height>B&&(B=O[z].height);M>0&&(B+=b.verticalPadding);var G=b.rowHeight[M]+b.rowHeight[C];b.rowHeight[M]=B,b.rowHeight[C]<S.height+b.verticalPadding&&(b.rowHeight[C]=S.height+b.verticalPadding);var k=b.rowHeight[M]+b.rowHeight[C];b.height+=k-G,this.shiftToLastRow(b)}},A.prototype.tilingPreLayout=function(){c.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},A.prototype.tilingPostLayout=function(){c.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},A.prototype.reduceTrees=function(){for(var b=[],M=!0,C;M;){var O=this.graphManager.getAllNodes(),S=[];M=!1;for(var R=0;R<O.length;R++)if(C=O[R],C.getEdges().length==1&&!C.getEdges()[0].isInterGraph&&C.getChild()==null){if(c.PURE_INCREMENTAL){var B=C.getEdges()[0].getOtherEnd(C),z=new E(C.getCenterX()-B.getCenterX(),C.getCenterY()-B.getCenterY());S.push([C,C.getEdges()[0],C.getOwner(),z])}else S.push([C,C.getEdges()[0],C.getOwner()]);M=!0}if(M==!0){for(var G=[],k=0;k<S.length;k++)S[k][0].getEdges().length==1&&(G.push(S[k]),S[k][0].getOwner().remove(S[k][0]));b.push(G),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=b},A.prototype.growTree=function(b){for(var M=b.length,C=b[M-1],O,S=0;S<C.length;S++)O=C[S],this.findPlaceforPrunedNode(O),O[2].add(O[0]),O[2].add(O[1],O[1].source,O[1].target);b.splice(b.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},A.prototype.findPlaceforPrunedNode=function(b){var M,C,O=b[0];if(O==b[1].source?C=b[1].target:C=b[1].source,c.PURE_INCREMENTAL)O.setCenter(C.getCenterX()+b[3].getWidth(),C.getCenterY()+b[3].getHeight());else{var S=C.startX,R=C.finishX,B=C.startY,z=C.finishY,G=0,k=0,H=0,$=0,V=[G,H,k,$];if(B>0)for(var X=S;X<=R;X++)V[0]+=this.grid[X][B-1].length+this.grid[X][B].length-1;if(R<this.grid.length-1)for(var X=B;X<=z;X++)V[1]+=this.grid[R+1][X].length+this.grid[R][X].length-1;if(z<this.grid[0].length-1)for(var X=S;X<=R;X++)V[2]+=this.grid[X][z+1].length+this.grid[X][z].length-1;if(S>0)for(var X=B;X<=z;X++)V[3]+=this.grid[S-1][X].length+this.grid[S][X].length-1;for(var U=w.MAX_VALUE,F,Y,q=0;q<V.length;q++)V[q]<U?(U=V[q],F=1,Y=q):V[q]==U&&F++;if(F==3&&U==0)V[0]==0&&V[1]==0&&V[2]==0?M=1:V[0]==0&&V[1]==0&&V[3]==0?M=0:V[0]==0&&V[2]==0&&V[3]==0?M=3:V[1]==0&&V[2]==0&&V[3]==0&&(M=2);else if(F==2&&U==0){var K=Math.floor(Math.random()*2);V[0]==0&&V[1]==0?K==0?M=0:M=1:V[0]==0&&V[2]==0?K==0?M=0:M=2:V[0]==0&&V[3]==0?K==0?M=0:M=3:V[1]==0&&V[2]==0?K==0?M=1:M=2:V[1]==0&&V[3]==0?K==0?M=1:M=3:K==0?M=2:M=3}else if(F==4&&U==0){var K=Math.floor(Math.random()*4);M=K}else M=Y;M==0?O.setCenter(C.getCenterX(),C.getCenterY()-C.getHeight()/2-d.DEFAULT_EDGE_LENGTH-O.getHeight()/2):M==1?O.setCenter(C.getCenterX()+C.getWidth()/2+d.DEFAULT_EDGE_LENGTH+O.getWidth()/2,C.getCenterY()):M==2?O.setCenter(C.getCenterX(),C.getCenterY()+C.getHeight()/2+d.DEFAULT_EDGE_LENGTH+O.getHeight()/2):O.setCenter(C.getCenterX()-C.getWidth()/2-d.DEFAULT_EDGE_LENGTH-O.getWidth()/2,C.getCenterY())}},o.exports=A},991:(o,i,l)=>{var u=l(551).FDLayoutNode,s=l(551).IMath;function f(h,c,g,d){u.call(this,h,c,g,d)}f.prototype=Object.create(u.prototype);for(var v in u)f[v]=u[v];f.prototype.calculateDisplacement=function(){var h=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=h.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=h.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=h.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=h.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>h.coolingFactor*h.maxNodeDisplacement&&(this.displacementX=h.coolingFactor*h.maxNodeDisplacement*s.sign(this.displacementX)),Math.abs(this.displacementY)>h.coolingFactor*h.maxNodeDisplacement&&(this.displacementY=h.coolingFactor*h.maxNodeDisplacement*s.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},f.prototype.propogateDisplacementToChildren=function(h,c){for(var g=this.getChild().getNodes(),d,m=0;m<g.length;m++)d=g[m],d.getChild()==null?(d.displacementX+=h,d.displacementY+=c):d.propogateDisplacementToChildren(h,c)},f.prototype.move=function(){var h=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),h.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},f.prototype.setPred1=function(h){this.pred1=h},f.prototype.getPred1=function(){return pred1},f.prototype.getPred2=function(){return pred2},f.prototype.setNext=function(h){this.next=h},f.prototype.getNext=function(){return next},f.prototype.setProcessed=function(h){this.processed=h},f.prototype.isProcessed=function(){return processed},o.exports=f},902:(o,i,l)=>{function u(g){if(Array.isArray(g)){for(var d=0,m=Array(g.length);d<g.length;d++)m[d]=g[d];return m}else return Array.from(g)}var s=l(806),f=l(551).LinkedList,v=l(551).Matrix,h=l(551).SVD;function c(){}c.handleConstraints=function(g){var d={};d.fixedNodeConstraint=g.constraints.fixedNodeConstraint,d.alignmentConstraint=g.constraints.alignmentConstraint,d.relativePlacementConstraint=g.constraints.relativePlacementConstraint;for(var m=new Map,p=new Map,y=[],E=[],T=g.getAllNodes(),w=0,x=0;x<T.length;x++){var D=T[x];D.getChild()==null&&(p.set(D.id,w++),y.push(D.getCenterX()),E.push(D.getCenterY()),m.set(D.id,D))}d.relativePlacementConstraint&&d.relativePlacementConstraint.forEach(function(W){!W.gap&&W.gap!=0&&(W.left?W.gap=s.DEFAULT_EDGE_LENGTH+m.get(W.left).getWidth()/2+m.get(W.right).getWidth()/2:W.gap=s.DEFAULT_EDGE_LENGTH+m.get(W.top).getHeight()/2+m.get(W.bottom).getHeight()/2)});var L=function(J,ne){return{x:J.x-ne.x,y:J.y-ne.y}},N=function(J){var ne=0,se=0;return J.forEach(function(ae){ne+=y[p.get(ae)],se+=E[p.get(ae)]}),{x:ne/J.size,y:se/J.size}},A=function(J,ne,se,ae,fe){function ce(De,we){var Pe=new Set(De),Me=!0,Ae=!1,$e=void 0;try{for(var Ye=we[Symbol.iterator](),ot;!(Me=(ot=Ye.next()).done);Me=!0){var Be=ot.value;Pe.add(Be)}}catch(Fe){Ae=!0,$e=Fe}finally{try{!Me&&Ye.return&&Ye.return()}finally{if(Ae)throw $e}}return Pe}var he=new Map;J.forEach(function(De,we){he.set(we,0)}),J.forEach(function(De,we){De.forEach(function(Pe){he.set(Pe.id,he.get(Pe.id)+1)})});var ve=new Map,Te=new Map,Oe=new f;he.forEach(function(De,we){De==0?(Oe.push(we),se||(ne=="horizontal"?ve.set(we,p.has(we)?y[p.get(we)]:ae.get(we)):ve.set(we,p.has(we)?E[p.get(we)]:ae.get(we)))):ve.set(we,Number.NEGATIVE_INFINITY),se&&Te.set(we,new Set([we]))}),se&&fe.forEach(function(De){var we=[];if(De.forEach(function(Ae){se.has(Ae)&&we.push(Ae)}),we.length>0){var Pe=0;we.forEach(function(Ae){ne=="horizontal"?(ve.set(Ae,p.has(Ae)?y[p.get(Ae)]:ae.get(Ae)),Pe+=ve.get(Ae)):(ve.set(Ae,p.has(Ae)?E[p.get(Ae)]:ae.get(Ae)),Pe+=ve.get(Ae))}),Pe=Pe/we.length,De.forEach(function(Ae){se.has(Ae)||ve.set(Ae,Pe)})}else{var Me=0;De.forEach(function(Ae){ne=="horizontal"?Me+=p.has(Ae)?y[p.get(Ae)]:ae.get(Ae):Me+=p.has(Ae)?E[p.get(Ae)]:ae.get(Ae)}),Me=Me/De.length,De.forEach(function(Ae){ve.set(Ae,Me)})}});for(var be=function(){var we=Oe.shift(),Pe=J.get(we);Pe.forEach(function(Me){if(ve.get(Me.id)<ve.get(we)+Me.gap)if(se&&se.has(Me.id)){var Ae=void 0;if(ne=="horizontal"?Ae=p.has(Me.id)?y[p.get(Me.id)]:ae.get(Me.id):Ae=p.has(Me.id)?E[p.get(Me.id)]:ae.get(Me.id),ve.set(Me.id,Ae),Ae<ve.get(we)+Me.gap){var $e=ve.get(we)+Me.gap-Ae;Te.get(we).forEach(function(Ye){ve.set(Ye,ve.get(Ye)-$e)})}}else ve.set(Me.id,ve.get(we)+Me.gap);he.set(Me.id,he.get(Me.id)-1),he.get(Me.id)==0&&Oe.push(Me.id),se&&Te.set(Me.id,ce(Te.get(we),Te.get(Me.id)))})};Oe.length!=0;)be();if(se){var Ne=new Set;J.forEach(function(De,we){De.length==0&&Ne.add(we)});var ke=[];Te.forEach(function(De,we){if(Ne.has(we)){var Pe=!1,Me=!0,Ae=!1,$e=void 0;try{for(var Ye=De[Symbol.iterator](),ot;!(Me=(ot=Ye.next()).done);Me=!0){var Be=ot.value;se.has(Be)&&(Pe=!0)}}catch(Ke){Ae=!0,$e=Ke}finally{try{!Me&&Ye.return&&Ye.return()}finally{if(Ae)throw $e}}if(!Pe){var Fe=!1,_e=void 0;ke.forEach(function(Ke,Qe){Ke.has([].concat(u(De))[0])&&(Fe=!0,_e=Qe)}),Fe?De.forEach(function(Ke){ke[_e].add(Ke)}):ke.push(new Set(De))}}}),ke.forEach(function(De,we){var Pe=Number.POSITIVE_INFINITY,Me=Number.POSITIVE_INFINITY,Ae=Number.NEGATIVE_INFINITY,$e=Number.NEGATIVE_INFINITY,Ye=!0,ot=!1,Be=void 0;try{for(var Fe=De[Symbol.iterator](),_e;!(Ye=(_e=Fe.next()).done);Ye=!0){var Ke=_e.value,Qe=void 0;ne=="horizontal"?Qe=p.has(Ke)?y[p.get(Ke)]:ae.get(Ke):Qe=p.has(Ke)?E[p.get(Ke)]:ae.get(Ke);var wt=ve.get(Ke);Qe<Pe&&(Pe=Qe),Qe>Ae&&(Ae=Qe),wt<Me&&(Me=wt),wt>$e&&($e=wt)}}catch(At){ot=!0,Be=At}finally{try{!Ye&&Fe.return&&Fe.return()}finally{if(ot)throw Be}}var oa=(Pe+Ae)/2-(Me+$e)/2,Ut=!0,Jt=!1,_t=void 0;try{for(var Yt=De[Symbol.iterator](),Mr;!(Ut=(Mr=Yt.next()).done);Ut=!0){var jt=Mr.value;ve.set(jt,ve.get(jt)+oa)}}catch(At){Jt=!0,_t=At}finally{try{!Ut&&Yt.return&&Yt.return()}finally{if(Jt)throw _t}}})}return ve},P=function(J){var ne=0,se=0,ae=0,fe=0;if(J.forEach(function(Te){Te.left?y[p.get(Te.left)]-y[p.get(Te.right)]>=0?ne++:se++:E[p.get(Te.top)]-E[p.get(Te.bottom)]>=0?ae++:fe++}),ne>se&&ae>fe)for(var ce=0;ce<p.size;ce++)y[ce]=-1*y[ce],E[ce]=-1*E[ce];else if(ne>se)for(var he=0;he<p.size;he++)y[he]=-1*y[he];else if(ae>fe)for(var ve=0;ve<p.size;ve++)E[ve]=-1*E[ve]},b=function(J){var ne=[],se=new f,ae=new Set,fe=0;return J.forEach(function(ce,he){if(!ae.has(he)){ne[fe]=[];var ve=he;for(se.push(ve),ae.add(ve),ne[fe].push(ve);se.length!=0;){ve=se.shift();var Te=J.get(ve);Te.forEach(function(Oe){ae.has(Oe.id)||(se.push(Oe.id),ae.add(Oe.id),ne[fe].push(Oe.id))})}fe++}}),ne},M=function(J){var ne=new Map;return J.forEach(function(se,ae){ne.set(ae,[])}),J.forEach(function(se,ae){se.forEach(function(fe){ne.get(ae).push(fe),ne.get(fe.id).push({id:ae,gap:fe.gap,direction:fe.direction})})}),ne},C=function(J){var ne=new Map;return J.forEach(function(se,ae){ne.set(ae,[])}),J.forEach(function(se,ae){se.forEach(function(fe){ne.get(fe.id).push({id:ae,gap:fe.gap,direction:fe.direction})})}),ne},O=[],S=[],R=!1,B=!1,z=new Set,G=new Map,k=new Map,H=[];if(d.fixedNodeConstraint&&d.fixedNodeConstraint.forEach(function(W){z.add(W.nodeId)}),d.relativePlacementConstraint&&(d.relativePlacementConstraint.forEach(function(W){W.left?(G.has(W.left)?G.get(W.left).push({id:W.right,gap:W.gap,direction:"horizontal"}):G.set(W.left,[{id:W.right,gap:W.gap,direction:"horizontal"}]),G.has(W.right)||G.set(W.right,[])):(G.has(W.top)?G.get(W.top).push({id:W.bottom,gap:W.gap,direction:"vertical"}):G.set(W.top,[{id:W.bottom,gap:W.gap,direction:"vertical"}]),G.has(W.bottom)||G.set(W.bottom,[]))}),k=M(G),H=b(k)),s.TRANSFORM_ON_CONSTRAINT_HANDLING){if(d.fixedNodeConstraint&&d.fixedNodeConstraint.length>1)d.fixedNodeConstraint.forEach(function(W,J){O[J]=[W.position.x,W.position.y],S[J]=[y[p.get(W.nodeId)],E[p.get(W.nodeId)]]}),R=!0;else if(d.alignmentConstraint)(function(){var W=0;if(d.alignmentConstraint.vertical){for(var J=d.alignmentConstraint.vertical,ne=function(ve){var Te=new Set;J[ve].forEach(function(Ne){Te.add(Ne)});var Oe=new Set([].concat(u(Te)).filter(function(Ne){return z.has(Ne)})),be=void 0;Oe.size>0?be=y[p.get(Oe.values().next().value)]:be=N(Te).x,J[ve].forEach(function(Ne){O[W]=[be,E[p.get(Ne)]],S[W]=[y[p.get(Ne)],E[p.get(Ne)]],W++})},se=0;se<J.length;se++)ne(se);R=!0}if(d.alignmentConstraint.horizontal){for(var ae=d.alignmentConstraint.horizontal,fe=function(ve){var Te=new Set;ae[ve].forEach(function(Ne){Te.add(Ne)});var Oe=new Set([].concat(u(Te)).filter(function(Ne){return z.has(Ne)})),be=void 0;Oe.size>0?be=y[p.get(Oe.values().next().value)]:be=N(Te).y,ae[ve].forEach(function(Ne){O[W]=[y[p.get(Ne)],be],S[W]=[y[p.get(Ne)],E[p.get(Ne)]],W++})},ce=0;ce<ae.length;ce++)fe(ce);R=!0}d.relativePlacementConstraint&&(B=!0)})();else if(d.relativePlacementConstraint){for(var $=0,V=0,X=0;X<H.length;X++)H[X].length>$&&($=H[X].length,V=X);if($<k.size/2)P(d.relativePlacementConstraint),R=!1,B=!1;else{var U=new Map,F=new Map,Y=[];H[V].forEach(function(W){G.get(W).forEach(function(J){J.direction=="horizontal"?(U.has(W)?U.get(W).push(J):U.set(W,[J]),U.has(J.id)||U.set(J.id,[]),Y.push({left:W,right:J.id})):(F.has(W)?F.get(W).push(J):F.set(W,[J]),F.has(J.id)||F.set(J.id,[]),Y.push({top:W,bottom:J.id}))})}),P(Y),B=!1;var q=A(U,"horizontal"),K=A(F,"vertical");H[V].forEach(function(W,J){S[J]=[y[p.get(W)],E[p.get(W)]],O[J]=[],q.has(W)?O[J][0]=q.get(W):O[J][0]=y[p.get(W)],K.has(W)?O[J][1]=K.get(W):O[J][1]=E[p.get(W)]}),R=!0}}if(R){for(var j=void 0,ge=v.transpose(O),Ce=v.transpose(S),Q=0;Q<ge.length;Q++)ge[Q]=v.multGamma(ge[Q]),Ce[Q]=v.multGamma(Ce[Q]);var le=v.multMat(ge,v.transpose(Ce)),de=h.svd(le);j=v.multMat(de.V,v.transpose(de.U));for(var ie=0;ie<p.size;ie++){var _=[y[ie],E[ie]],ue=[j[0][0],j[1][0]],Ee=[j[0][1],j[1][1]];y[ie]=v.dotProduct(_,ue),E[ie]=v.dotProduct(_,Ee)}B&&P(d.relativePlacementConstraint)}}if(s.ENFORCE_CONSTRAINTS){if(d.fixedNodeConstraint&&d.fixedNodeConstraint.length>0){var me={x:0,y:0};d.fixedNodeConstraint.forEach(function(W,J){var ne={x:y[p.get(W.nodeId)],y:E[p.get(W.nodeId)]},se=W.position,ae=L(se,ne);me.x+=ae.x,me.y+=ae.y}),me.x/=d.fixedNodeConstraint.length,me.y/=d.fixedNodeConstraint.length,y.forEach(function(W,J){y[J]+=me.x}),E.forEach(function(W,J){E[J]+=me.y}),d.fixedNodeConstraint.forEach(function(W){y[p.get(W.nodeId)]=W.position.x,E[p.get(W.nodeId)]=W.position.y})}if(d.alignmentConstraint){if(d.alignmentConstraint.vertical)for(var pe=d.alignmentConstraint.vertical,re=function(J){var ne=new Set;pe[J].forEach(function(fe){ne.add(fe)});var se=new Set([].concat(u(ne)).filter(function(fe){return z.has(fe)})),ae=void 0;se.size>0?ae=y[p.get(se.values().next().value)]:ae=N(ne).x,ne.forEach(function(fe){z.has(fe)||(y[p.get(fe)]=ae)})},I=0;I<pe.length;I++)re(I);if(d.alignmentConstraint.horizontal)for(var Z=d.alignmentConstraint.horizontal,oe=function(J){var ne=new Set;Z[J].forEach(function(fe){ne.add(fe)});var se=new Set([].concat(u(ne)).filter(function(fe){return z.has(fe)})),ae=void 0;se.size>0?ae=E[p.get(se.values().next().value)]:ae=N(ne).y,ne.forEach(function(fe){z.has(fe)||(E[p.get(fe)]=ae)})},ee=0;ee<Z.length;ee++)oe(ee)}d.relativePlacementConstraint&&function(){var W=new Map,J=new Map,ne=new Map,se=new Map,ae=new Map,fe=new Map,ce=new Set,he=new Set;if(z.forEach(function(st){ce.add(st),he.add(st)}),d.alignmentConstraint){if(d.alignmentConstraint.vertical)for(var ve=d.alignmentConstraint.vertical,Te=function(ze){ne.set("dummy"+ze,[]),ve[ze].forEach(function(Xe){W.set(Xe,"dummy"+ze),ne.get("dummy"+ze).push(Xe),z.has(Xe)&&ce.add("dummy"+ze)}),ae.set("dummy"+ze,y[p.get(ve[ze][0])])},Oe=0;Oe<ve.length;Oe++)Te(Oe);if(d.alignmentConstraint.horizontal)for(var be=d.alignmentConstraint.horizontal,Ne=function(ze){se.set("dummy"+ze,[]),be[ze].forEach(function(Xe){J.set(Xe,"dummy"+ze),se.get("dummy"+ze).push(Xe),z.has(Xe)&&he.add("dummy"+ze)}),fe.set("dummy"+ze,E[p.get(be[ze][0])])},ke=0;ke<be.length;ke++)Ne(ke)}var De=new Map,we=new Map,Pe=function(ze){G.get(ze).forEach(function(Xe){var tr=void 0,Ot=void 0;Xe.direction=="horizontal"?(tr=W.get(ze)?W.get(ze):ze,W.get(Xe.id)?Ot={id:W.get(Xe.id),gap:Xe.gap,direction:Xe.direction}:Ot=Xe,De.has(tr)?De.get(tr).push(Ot):De.set(tr,[Ot]),De.has(Ot.id)||De.set(Ot.id,[])):(tr=J.get(ze)?J.get(ze):ze,J.get(Xe.id)?Ot={id:J.get(Xe.id),gap:Xe.gap,direction:Xe.direction}:Ot=Xe,we.has(tr)?we.get(tr).push(Ot):we.set(tr,[Ot]),we.has(Ot.id)||we.set(Ot.id,[]))})},Me=!0,Ae=!1,$e=void 0;try{for(var Ye=G.keys()[Symbol.iterator](),ot;!(Me=(ot=Ye.next()).done);Me=!0){var Be=ot.value;Pe(Be)}}catch(st){Ae=!0,$e=st}finally{try{!Me&&Ye.return&&Ye.return()}finally{if(Ae)throw $e}}var Fe=M(De),_e=M(we),Ke=b(Fe),Qe=b(_e),wt=C(De),oa=C(we),Ut=[],Jt=[];Ke.forEach(function(st,ze){Ut[ze]=[],st.forEach(function(Xe){wt.get(Xe).length==0&&Ut[ze].push(Xe)})}),Qe.forEach(function(st,ze){Jt[ze]=[],st.forEach(function(Xe){oa.get(Xe).length==0&&Jt[ze].push(Xe)})});var _t=A(De,"horizontal",ce,ae,Ut),Yt=A(we,"vertical",he,fe,Jt),Mr=function(ze){ne.get(ze)?ne.get(ze).forEach(function(Xe){y[p.get(Xe)]=_t.get(ze)}):y[p.get(ze)]=_t.get(ze)},jt=!0,At=!1,Ar=void 0;try{for(var er=_t.keys()[Symbol.iterator](),sa;!(jt=(sa=er.next()).done);jt=!0){var Or=sa.value;Mr(Or)}}catch(st){At=!0,Ar=st}finally{try{!jt&&er.return&&er.return()}finally{if(At)throw Ar}}var Hn=function(ze){se.get(ze)?se.get(ze).forEach(function(Xe){E[p.get(Xe)]=Yt.get(ze)}):E[p.get(ze)]=Yt.get(ze)},xt=!0,Rr=!1,la=void 0;try{for(var qt=Yt.keys()[Symbol.iterator](),Dt;!(xt=(Dt=qt.next()).done);xt=!0){var Or=Dt.value;Hn(Or)}}catch(st){Rr=!0,la=st}finally{try{!xt&&qt.return&&qt.return()}finally{if(Rr)throw la}}}()}for(var te=0;te<T.length;te++){var Le=T[te];Le.getChild()==null&&Le.setCenter(y[p.get(Le.id)],E[p.get(Le.id)])}},o.exports=c},551:o=>{o.exports=t}},r={};function a(o){var i=r[o];if(i!==void 0)return i.exports;var l=r[o]={exports:{}};return e[o](l,l.exports,a),l.exports}var n=a(45);return n})()})});var tv=xe((Ka,Xi)=>{(function(e,r){typeof Ka=="object"&&typeof Xi=="object"?Xi.exports=r(Wi()):typeof define=="function"&&define.amd?define(["cose-base"],r):typeof Ka=="object"?Ka.cytoscapeFcose=r(Wi()):e.cytoscapeFcose=r(e.coseBase)})(Ka,function(t){return(()=>{"use strict";var e={658:o=>{o.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var l=arguments.length,u=Array(l>1?l-1:0),s=1;s<l;s++)u[s-1]=arguments[s];return u.forEach(function(f){Object.keys(f).forEach(function(v){return i[v]=f[v]})}),i}},548:(o,i,l)=>{var u=function(){function v(h,c){var g=[],d=!0,m=!1,p=void 0;try{for(var y=h[Symbol.iterator](),E;!(d=(E=y.next()).done)&&(g.push(E.value),!(c&&g.length===c));d=!0);}catch(T){m=!0,p=T}finally{try{!d&&y.return&&y.return()}finally{if(m)throw p}}return g}return function(h,c){if(Array.isArray(h))return h;if(Symbol.iterator in Object(h))return v(h,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=l(140).layoutBase.LinkedList,f={};f.getTopMostNodes=function(v){for(var h={},c=0;c<v.length;c++)h[v[c].id()]=!0;var g=v.filter(function(d,m){typeof d=="number"&&(d=m);for(var p=d.parent()[0];p!=null;){if(h[p.id()])return!1;p=p.parent()[0]}return!0});return g},f.connectComponents=function(v,h,c,g){var d=new s,m=new Set,p=[],y=void 0,E=void 0,T=void 0,w=!1,x=1,D=[],L=[],N=function(){var P=v.collection();L.push(P);var b=c[0],M=v.collection();M.merge(b).merge(b.descendants().intersection(h)),p.push(b),M.forEach(function(S){d.push(S),m.add(S),P.merge(S)});for(var C=function(){b=d.shift();var R=v.collection();b.neighborhood().nodes().forEach(function(k){h.intersection(b.edgesWith(k)).length>0&&R.merge(k)});for(var B=0;B<R.length;B++){var z=R[B];if(y=c.intersection(z.union(z.ancestors())),y!=null&&!m.has(y[0])){var G=y.union(y.descendants());G.forEach(function(k){d.push(k),m.add(k),P.merge(k),c.has(k)&&p.push(k)})}}};d.length!=0;)C();if(P.forEach(function(S){h.intersection(S.connectedEdges()).forEach(function(R){P.has(R.source())&&P.has(R.target())&&P.merge(R)})}),p.length==c.length&&(w=!0),!w||w&&x>1){E=p[0],T=E.connectedEdges().length,p.forEach(function(S){S.connectedEdges().length<T&&(T=S.connectedEdges().length,E=S)}),D.push(E.id());var O=v.collection();O.merge(p[0]),p.forEach(function(S){O.merge(S)}),p=[],c=c.difference(O),x++}};do N();while(!w);return g&&D.length>0&&g.set("dummy"+(g.size+1),D),L},f.relocateComponent=function(v,h,c){if(!c.fixedNodeConstraint){var g=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(c.quality=="draft"){var y=!0,E=!1,T=void 0;try{for(var w=h.nodeIndexes[Symbol.iterator](),x;!(y=(x=w.next()).done);y=!0){var D=x.value,L=u(D,2),N=L[0],A=L[1],P=c.cy.getElementById(N);if(P){var b=P.boundingBox(),M=h.xCoords[A]-b.w/2,C=h.xCoords[A]+b.w/2,O=h.yCoords[A]-b.h/2,S=h.yCoords[A]+b.h/2;M<g&&(g=M),C>d&&(d=C),O<m&&(m=O),S>p&&(p=S)}}}catch(k){E=!0,T=k}finally{try{!y&&w.return&&w.return()}finally{if(E)throw T}}var R=v.x-(d+g)/2,B=v.y-(p+m)/2;h.xCoords=h.xCoords.map(function(k){return k+R}),h.yCoords=h.yCoords.map(function(k){return k+B})}else{Object.keys(h).forEach(function(k){var H=h[k],$=H.getRect().x,V=H.getRect().x+H.getRect().width,X=H.getRect().y,U=H.getRect().y+H.getRect().height;$<g&&(g=$),V>d&&(d=V),X<m&&(m=X),U>p&&(p=U)});var z=v.x-(d+g)/2,G=v.y-(p+m)/2;Object.keys(h).forEach(function(k){var H=h[k];H.setCenter(H.getCenterX()+z,H.getCenterY()+G)})}}},f.calcBoundingBox=function(v,h,c,g){for(var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,E=void 0,T=void 0,w=void 0,x=void 0,D=v.descendants().not(":parent"),L=D.length,N=0;N<L;N++){var A=D[N];E=h[g.get(A.id())]-A.width()/2,T=h[g.get(A.id())]+A.width()/2,w=c[g.get(A.id())]-A.height()/2,x=c[g.get(A.id())]+A.height()/2,d>E&&(d=E),m<T&&(m=T),p>w&&(p=w),y<x&&(y=x)}var P={};return P.topLeftX=d,P.topLeftY=p,P.width=m-d,P.height=y-p,P},f.calcParentsWithoutChildren=function(v,h){var c=v.collection();return h.nodes(":parent").forEach(function(g){var d=!1;g.children().forEach(function(m){m.css("display")!="none"&&(d=!0)}),d||c.merge(g)}),c},o.exports=f},816:(o,i,l)=>{var u=l(548),s=l(140).CoSELayout,f=l(140).CoSENode,v=l(140).layoutBase.PointD,h=l(140).layoutBase.DimensionD,c=l(140).layoutBase.LayoutConstants,g=l(140).layoutBase.FDLayoutConstants,d=l(140).CoSEConstants,m=function(y,E){var T=y.cy,w=y.eles,x=w.nodes(),D=w.edges(),L=void 0,N=void 0,A=void 0,P={};y.randomize&&(L=E.nodeIndexes,N=E.xCoords,A=E.yCoords);var b=function(k){return typeof k=="function"},M=function(k,H){return b(k)?k(H):k},C=u.calcParentsWithoutChildren(T,w),O=function G(k,H,$,V){for(var X=H.length,U=0;U<X;U++){var F=H[U],Y=null;F.intersection(C).length==0&&(Y=F.children());var q=void 0,K=F.layoutDimensions({nodeDimensionsIncludeLabels:V.nodeDimensionsIncludeLabels});if(F.outerWidth()!=null&&F.outerHeight()!=null)if(V.randomize)if(!F.isParent())q=k.add(new f($.graphManager,new v(N[L.get(F.id())]-K.w/2,A[L.get(F.id())]-K.h/2),new h(parseFloat(K.w),parseFloat(K.h))));else{var j=u.calcBoundingBox(F,N,A,L);F.intersection(C).length==0?q=k.add(new f($.graphManager,new v(j.topLeftX,j.topLeftY),new h(j.width,j.height))):q=k.add(new f($.graphManager,new v(j.topLeftX,j.topLeftY),new h(parseFloat(K.w),parseFloat(K.h))))}else q=k.add(new f($.graphManager,new v(F.position("x")-K.w/2,F.position("y")-K.h/2),new h(parseFloat(K.w),parseFloat(K.h))));else q=k.add(new f(this.graphManager));if(q.id=F.data("id"),q.nodeRepulsion=M(V.nodeRepulsion,F),q.paddingLeft=parseInt(F.css("padding")),q.paddingTop=parseInt(F.css("padding")),q.paddingRight=parseInt(F.css("padding")),q.paddingBottom=parseInt(F.css("padding")),V.nodeDimensionsIncludeLabels&&(q.labelWidth=F.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,q.labelHeight=F.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,q.labelPosVertical=F.css("text-valign"),q.labelPosHorizontal=F.css("text-halign")),P[F.data("id")]=q,isNaN(q.rect.x)&&(q.rect.x=0),isNaN(q.rect.y)&&(q.rect.y=0),Y!=null&&Y.length>0){var ge=void 0;ge=$.getGraphManager().add($.newGraph(),q),G(ge,Y,$,V)}}},S=function(k,H,$){for(var V=0,X=0,U=0;U<$.length;U++){var F=$[U],Y=P[F.data("source")],q=P[F.data("target")];if(Y&&q&&Y!==q&&Y.getEdgesBetween(q).length==0){var K=H.add(k.newEdge(),Y,q);K.id=F.id(),K.idealLength=M(y.idealEdgeLength,F),K.edgeElasticity=M(y.edgeElasticity,F),V+=K.idealLength,X++}}y.idealEdgeLength!=null&&(X>0?d.DEFAULT_EDGE_LENGTH=g.DEFAULT_EDGE_LENGTH=V/X:b(y.idealEdgeLength)?d.DEFAULT_EDGE_LENGTH=g.DEFAULT_EDGE_LENGTH=50:d.DEFAULT_EDGE_LENGTH=g.DEFAULT_EDGE_LENGTH=y.idealEdgeLength,d.MIN_REPULSION_DIST=g.MIN_REPULSION_DIST=g.DEFAULT_EDGE_LENGTH/10,d.DEFAULT_RADIAL_SEPARATION=g.DEFAULT_EDGE_LENGTH)},R=function(k,H){H.fixedNodeConstraint&&(k.constraints.fixedNodeConstraint=H.fixedNodeConstraint),H.alignmentConstraint&&(k.constraints.alignmentConstraint=H.alignmentConstraint),H.relativePlacementConstraint&&(k.constraints.relativePlacementConstraint=H.relativePlacementConstraint)};y.nestingFactor!=null&&(d.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=g.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=y.nestingFactor),y.gravity!=null&&(d.DEFAULT_GRAVITY_STRENGTH=g.DEFAULT_GRAVITY_STRENGTH=y.gravity),y.numIter!=null&&(d.MAX_ITERATIONS=g.MAX_ITERATIONS=y.numIter),y.gravityRange!=null&&(d.DEFAULT_GRAVITY_RANGE_FACTOR=g.DEFAULT_GRAVITY_RANGE_FACTOR=y.gravityRange),y.gravityCompound!=null&&(d.DEFAULT_COMPOUND_GRAVITY_STRENGTH=g.DEFAULT_COMPOUND_GRAVITY_STRENGTH=y.gravityCompound),y.gravityRangeCompound!=null&&(d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=g.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=y.gravityRangeCompound),y.initialEnergyOnIncremental!=null&&(d.DEFAULT_COOLING_FACTOR_INCREMENTAL=g.DEFAULT_COOLING_FACTOR_INCREMENTAL=y.initialEnergyOnIncremental),y.tilingCompareBy!=null&&(d.TILING_COMPARE_BY=y.tilingCompareBy),y.quality=="proof"?c.QUALITY=2:c.QUALITY=0,d.NODE_DIMENSIONS_INCLUDE_LABELS=g.NODE_DIMENSIONS_INCLUDE_LABELS=c.NODE_DIMENSIONS_INCLUDE_LABELS=y.nodeDimensionsIncludeLabels,d.DEFAULT_INCREMENTAL=g.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=!y.randomize,d.ANIMATE=g.ANIMATE=c.ANIMATE=y.animate,d.TILE=y.tile,d.TILING_PADDING_VERTICAL=typeof y.tilingPaddingVertical=="function"?y.tilingPaddingVertical.call():y.tilingPaddingVertical,d.TILING_PADDING_HORIZONTAL=typeof y.tilingPaddingHorizontal=="function"?y.tilingPaddingHorizontal.call():y.tilingPaddingHorizontal,d.DEFAULT_INCREMENTAL=g.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=!0,d.PURE_INCREMENTAL=!y.randomize,c.DEFAULT_UNIFORM_LEAF_NODE_SIZES=y.uniformNodeDimensions,y.step=="transformed"&&(d.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,d.ENFORCE_CONSTRAINTS=!1,d.APPLY_LAYOUT=!1),y.step=="enforced"&&(d.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,d.ENFORCE_CONSTRAINTS=!0,d.APPLY_LAYOUT=!1),y.step=="cose"&&(d.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,d.ENFORCE_CONSTRAINTS=!1,d.APPLY_LAYOUT=!0),y.step=="all"&&(y.randomize?d.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:d.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,d.ENFORCE_CONSTRAINTS=!0,d.APPLY_LAYOUT=!0),y.fixedNodeConstraint||y.alignmentConstraint||y.relativePlacementConstraint?d.TREE_REDUCTION_ON_INCREMENTAL=!1:d.TREE_REDUCTION_ON_INCREMENTAL=!0;var B=new s,z=B.newGraphManager();return O(z.addRoot(),u.getTopMostNodes(x),B,y),S(B,z,D),R(B,y),B.runLayout(),P};o.exports={coseLayout:m}},212:(o,i,l)=>{var u=function(){function y(E,T){for(var w=0;w<T.length;w++){var x=T[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(E,x.key,x)}}return function(E,T,w){return T&&y(E.prototype,T),w&&y(E,w),E}}();function s(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}var f=l(658),v=l(548),h=l(657),c=h.spectralLayout,g=l(816),d=g.coseLayout,m=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(E){return 4500},idealEdgeLength:function(E){return 50},edgeElasticity:function(E){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),p=function(){function y(E){s(this,y),this.options=f({},m,E)}return u(y,[{key:"run",value:function(){var T=this,w=this.options,x=w.cy,D=w.eles,L=[],N=void 0,A=void 0,P=[],b=void 0,M=[];w.fixedNodeConstraint&&(!Array.isArray(w.fixedNodeConstraint)||w.fixedNodeConstraint.length==0)&&(w.fixedNodeConstraint=void 0),w.alignmentConstraint&&(w.alignmentConstraint.vertical&&(!Array.isArray(w.alignmentConstraint.vertical)||w.alignmentConstraint.vertical.length==0)&&(w.alignmentConstraint.vertical=void 0),w.alignmentConstraint.horizontal&&(!Array.isArray(w.alignmentConstraint.horizontal)||w.alignmentConstraint.horizontal.length==0)&&(w.alignmentConstraint.horizontal=void 0)),w.relativePlacementConstraint&&(!Array.isArray(w.relativePlacementConstraint)||w.relativePlacementConstraint.length==0)&&(w.relativePlacementConstraint=void 0);var C=w.fixedNodeConstraint||w.alignmentConstraint||w.relativePlacementConstraint;C&&(w.tile=!1,w.packComponents=!1);var O=void 0,S=!1;if(x.layoutUtilities&&w.packComponents&&(O=x.layoutUtilities("get"),O||(O=x.layoutUtilities()),S=!0),D.nodes().length>0)if(S){var z=v.getTopMostNodes(w.eles.nodes());if(b=v.connectComponents(x,w.eles,z),b.forEach(function(ie){var _=ie.boundingBox();M.push({x:_.x1+_.w/2,y:_.y1+_.h/2})}),w.randomize&&b.forEach(function(ie){w.eles=ie,L.push(c(w))}),w.quality=="default"||w.quality=="proof"){var G=x.collection();if(w.tile){var k=new Map,H=[],$=[],V=0,X={nodeIndexes:k,xCoords:H,yCoords:$},U=[];if(b.forEach(function(ie,_){ie.edges().length==0&&(ie.nodes().forEach(function(ue,Ee){G.merge(ie.nodes()[Ee]),ue.isParent()||(X.nodeIndexes.set(ie.nodes()[Ee].id(),V++),X.xCoords.push(ie.nodes()[0].position().x),X.yCoords.push(ie.nodes()[0].position().y))}),U.push(_))}),G.length>1){var F=G.boundingBox();M.push({x:F.x1+F.w/2,y:F.y1+F.h/2}),b.push(G),L.push(X);for(var Y=U.length-1;Y>=0;Y--)b.splice(U[Y],1),L.splice(U[Y],1),M.splice(U[Y],1)}}b.forEach(function(ie,_){w.eles=ie,P.push(d(w,L[_])),v.relocateComponent(M[_],P[_],w)})}else b.forEach(function(ie,_){v.relocateComponent(M[_],L[_],w)});var q=new Set;if(b.length>1){var K=[],j=D.filter(function(ie){return ie.css("display")=="none"});b.forEach(function(ie,_){var ue=void 0;if(w.quality=="draft"&&(ue=L[_].nodeIndexes),ie.nodes().not(j).length>0){var Ee={};Ee.edges=[],Ee.nodes=[];var me=void 0;ie.nodes().not(j).forEach(function(pe){if(w.quality=="draft")if(!pe.isParent())me=ue.get(pe.id()),Ee.nodes.push({x:L[_].xCoords[me]-pe.boundingbox().w/2,y:L[_].yCoords[me]-pe.boundingbox().h/2,width:pe.boundingbox().w,height:pe.boundingbox().h});else{var re=v.calcBoundingBox(pe,L[_].xCoords,L[_].yCoords,ue);Ee.nodes.push({x:re.topLeftX,y:re.topLeftY,width:re.width,height:re.height})}else P[_][pe.id()]&&Ee.nodes.push({x:P[_][pe.id()].getLeft(),y:P[_][pe.id()].getTop(),width:P[_][pe.id()].getWidth(),height:P[_][pe.id()].getHeight()})}),ie.edges().forEach(function(pe){var re=pe.source(),I=pe.target();if(re.css("display")!="none"&&I.css("display")!="none")if(w.quality=="draft"){var Z=ue.get(re.id()),oe=ue.get(I.id()),ee=[],te=[];if(re.isParent()){var Le=v.calcBoundingBox(re,L[_].xCoords,L[_].yCoords,ue);ee.push(Le.topLeftX+Le.width/2),ee.push(Le.topLeftY+Le.height/2)}else ee.push(L[_].xCoords[Z]),ee.push(L[_].yCoords[Z]);if(I.isParent()){var W=v.calcBoundingBox(I,L[_].xCoords,L[_].yCoords,ue);te.push(W.topLeftX+W.width/2),te.push(W.topLeftY+W.height/2)}else te.push(L[_].xCoords[oe]),te.push(L[_].yCoords[oe]);Ee.edges.push({startX:ee[0],startY:ee[1],endX:te[0],endY:te[1]})}else P[_][re.id()]&&P[_][I.id()]&&Ee.edges.push({startX:P[_][re.id()].getCenterX(),startY:P[_][re.id()].getCenterY(),endX:P[_][I.id()].getCenterX(),endY:P[_][I.id()].getCenterY()})}),Ee.nodes.length>0&&(K.push(Ee),q.add(_))}});var ge=O.packComponents(K,w.randomize).shifts;if(w.quality=="draft")L.forEach(function(ie,_){var ue=ie.xCoords.map(function(me){return me+ge[_].dx}),Ee=ie.yCoords.map(function(me){return me+ge[_].dy});ie.xCoords=ue,ie.yCoords=Ee});else{var Ce=0;q.forEach(function(ie){Object.keys(P[ie]).forEach(function(_){var ue=P[ie][_];ue.setCenter(ue.getCenterX()+ge[Ce].dx,ue.getCenterY()+ge[Ce].dy)}),Ce++})}}}else{var R=w.eles.boundingBox();if(M.push({x:R.x1+R.w/2,y:R.y1+R.h/2}),w.randomize){var B=c(w);L.push(B)}w.quality=="default"||w.quality=="proof"?(P.push(d(w,L[0])),v.relocateComponent(M[0],P[0],w)):v.relocateComponent(M[0],L[0],w)}var Q=function(_,ue){if(w.quality=="default"||w.quality=="proof"){typeof _=="number"&&(_=ue);var Ee=void 0,me=void 0,pe=_.data("id");return P.forEach(function(I){pe in I&&(Ee={x:I[pe].getRect().getCenterX(),y:I[pe].getRect().getCenterY()},me=I[pe])}),w.nodeDimensionsIncludeLabels&&(me.labelWidth&&(me.labelPosHorizontal=="left"?Ee.x+=me.labelWidth/2:me.labelPosHorizontal=="right"&&(Ee.x-=me.labelWidth/2)),me.labelHeight&&(me.labelPosVertical=="top"?Ee.y+=me.labelHeight/2:me.labelPosVertical=="bottom"&&(Ee.y-=me.labelHeight/2))),Ee==null&&(Ee={x:_.position("x"),y:_.position("y")}),{x:Ee.x,y:Ee.y}}else{var re=void 0;return L.forEach(function(I){var Z=I.nodeIndexes.get(_.id());Z!=null&&(re={x:I.xCoords[Z],y:I.yCoords[Z]})}),re==null&&(re={x:_.position("x"),y:_.position("y")}),{x:re.x,y:re.y}}};if(w.quality=="default"||w.quality=="proof"||w.randomize){var le=v.calcParentsWithoutChildren(x,D),de=D.filter(function(ie){return ie.css("display")=="none"});w.eles=D.not(de),D.nodes().not(":parent").not(de).layoutPositions(T,w,Q),le.length>0&&le.forEach(function(ie){ie.position(Q(ie))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),y}();o.exports=p},657:(o,i,l)=>{var u=l(548),s=l(140).layoutBase.Matrix,f=l(140).layoutBase.SVD,v=function(c){var g=c.cy,d=c.eles,m=d.nodes(),p=d.nodes(":parent"),y=new Map,E=new Map,T=new Map,w=[],x=[],D=[],L=[],N=[],A=[],P=[],b=[],M=void 0,C=void 0,O=1e8,S=1e-9,R=c.piTol,B=c.samplingType,z=c.nodeSeparation,G=void 0,k=function(){for(var ne=0,se=0,ae=!1;se<G;){ne=Math.floor(Math.random()*C),ae=!1;for(var fe=0;fe<se;fe++)if(L[fe]==ne){ae=!0;break}if(!ae)L[se]=ne,se++;else continue}},H=function(ne,se,ae){for(var fe=[],ce=0,he=0,ve=0,Te=void 0,Oe=[],be=0,Ne=1,ke=0;ke<C;ke++)Oe[ke]=O;for(fe[he]=ne,Oe[ne]=0;he>=ce;){ve=fe[ce++];for(var De=w[ve],we=0;we<De.length;we++)Te=E.get(De[we]),Oe[Te]==O&&(Oe[Te]=Oe[ve]+1,fe[++he]=Te);A[ve][se]=Oe[ve]*z}if(ae){for(var Pe=0;Pe<C;Pe++)A[Pe][se]<N[Pe]&&(N[Pe]=A[Pe][se]);for(var Me=0;Me<C;Me++)N[Me]>be&&(be=N[Me],Ne=Me)}return Ne},$=function(ne){var se=void 0;if(ne){se=Math.floor(Math.random()*C),M=se;for(var fe=0;fe<C;fe++)N[fe]=O;for(var ce=0;ce<G;ce++)L[ce]=se,se=H(se,ce,ne)}else{k();for(var ae=0;ae<G;ae++)H(L[ae],ae,ne,!1)}for(var he=0;he<C;he++)for(var ve=0;ve<G;ve++)A[he][ve]*=A[he][ve];for(var Te=0;Te<G;Te++)P[Te]=[];for(var Oe=0;Oe<G;Oe++)for(var be=0;be<G;be++)P[Oe][be]=A[L[be]][Oe]},V=function(){for(var ne=f.svd(P),se=ne.S,ae=ne.U,fe=ne.V,ce=se[0]*se[0]*se[0],he=[],ve=0;ve<G;ve++){he[ve]=[];for(var Te=0;Te<G;Te++)he[ve][Te]=0,ve==Te&&(he[ve][Te]=se[ve]/(se[ve]*se[ve]+ce/(se[ve]*se[ve])))}b=s.multMat(s.multMat(fe,he),s.transpose(ae))},X=function(){for(var ne=void 0,se=void 0,ae=[],fe=[],ce=[],he=[],ve=0;ve<C;ve++)ae[ve]=Math.random(),fe[ve]=Math.random();ae=s.normalize(ae),fe=s.normalize(fe);for(var Te=0,Oe=S,be=S,Ne=void 0;;){Te++;for(var ke=0;ke<C;ke++)ce[ke]=ae[ke];if(ae=s.multGamma(s.multL(s.multGamma(ce),A,b)),ne=s.dotProduct(ce,ae),ae=s.normalize(ae),Oe=s.dotProduct(ce,ae),Ne=Math.abs(Oe/be),Ne<=1+R&&Ne>=1)break;be=Oe}for(var De=0;De<C;De++)ce[De]=ae[De];for(Te=0,be=S;;){Te++;for(var we=0;we<C;we++)he[we]=fe[we];if(he=s.minusOp(he,s.multCons(ce,s.dotProduct(ce,he))),fe=s.multGamma(s.multL(s.multGamma(he),A,b)),se=s.dotProduct(he,fe),fe=s.normalize(fe),Oe=s.dotProduct(he,fe),Ne=Math.abs(Oe/be),Ne<=1+R&&Ne>=1)break;be=Oe}for(var Pe=0;Pe<C;Pe++)he[Pe]=fe[Pe];x=s.multCons(ce,Math.sqrt(Math.abs(ne))),D=s.multCons(he,Math.sqrt(Math.abs(se)))};u.connectComponents(g,d,u.getTopMostNodes(m),y),p.forEach(function(J){u.connectComponents(g,d,u.getTopMostNodes(J.descendants().intersection(d)),y)});for(var U=0,F=0;F<m.length;F++)m[F].isParent()||E.set(m[F].id(),U++);var Y=!0,q=!1,K=void 0;try{for(var j=y.keys()[Symbol.iterator](),ge;!(Y=(ge=j.next()).done);Y=!0){var Ce=ge.value;E.set(Ce,U++)}}catch(J){q=!0,K=J}finally{try{!Y&&j.return&&j.return()}finally{if(q)throw K}}for(var Q=0;Q<E.size;Q++)w[Q]=[];p.forEach(function(J){for(var ne=J.children().intersection(d);ne.nodes(":childless").length==0;)ne=ne.nodes()[0].children().intersection(d);var se=0,ae=ne.nodes(":childless")[0].connectedEdges().length;ne.nodes(":childless").forEach(function(fe,ce){fe.connectedEdges().length<ae&&(ae=fe.connectedEdges().length,se=ce)}),T.set(J.id(),ne.nodes(":childless")[se].id())}),m.forEach(function(J){var ne=void 0;J.isParent()?ne=E.get(T.get(J.id())):ne=E.get(J.id()),J.neighborhood().nodes().forEach(function(se){d.intersection(J.edgesWith(se)).length>0&&(se.isParent()?w[ne].push(T.get(se.id())):w[ne].push(se.id()))})});var le=function(ne){var se=E.get(ne),ae=void 0;y.get(ne).forEach(function(fe){g.getElementById(fe).isParent()?ae=T.get(fe):ae=fe,w[se].push(ae),w[E.get(ae)].push(ne)})},de=!0,ie=!1,_=void 0;try{for(var ue=y.keys()[Symbol.iterator](),Ee;!(de=(Ee=ue.next()).done);de=!0){var me=Ee.value;le(me)}}catch(J){ie=!0,_=J}finally{try{!de&&ue.return&&ue.return()}finally{if(ie)throw _}}C=E.size;var pe=void 0;if(C>2){G=C<c.sampleSize?C:c.sampleSize;for(var re=0;re<C;re++)A[re]=[];for(var I=0;I<G;I++)b[I]=[];return c.quality=="draft"||c.step=="all"?($(B),V(),X(),pe={nodeIndexes:E,xCoords:x,yCoords:D}):(E.forEach(function(J,ne){x.push(g.getElementById(ne).position("x")),D.push(g.getElementById(ne).position("y"))}),pe={nodeIndexes:E,xCoords:x,yCoords:D}),pe}else{var Z=E.keys(),oe=g.getElementById(Z.next().value),ee=oe.position(),te=oe.outerWidth();if(x.push(ee.x),D.push(ee.y),C==2){var Le=g.getElementById(Z.next().value),W=Le.outerWidth();x.push(ee.x+te/2+W/2+c.idealEdgeLength),D.push(ee.y)}return pe={nodeIndexes:E,xCoords:x,yCoords:D},pe}};o.exports={spectralLayout:v}},579:(o,i,l)=>{var u=l(212),s=function(v){v&&v("layout","fcose",u)};typeof cytoscape<"u"&&s(cytoscape),o.exports=s},140:o=>{o.exports=t}},r={};function a(o){var i=r[o];if(i!==void 0)return i.exports;var l=r[o]={exports:{}};return e[o](l,l.exports,a),l.exports}var n=a(579);return n})()})});var av=xe((rv,$i)=>{(function(t){if(typeof rv=="object"&&typeof $i<"u")$i.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.cytoscapeExpandCollapse=t()}})(function(){var t,e,r;return function a(n,o,i){function l(f,v){if(!o[f]){if(!n[f]){var h=typeof ua=="function"&&ua;if(!v&&h)return h(f,!0);if(u)return u(f,!0);var c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c}var g=o[f]={exports:{}};n[f][0].call(g.exports,function(d){var m=n[f][1][d];return l(m||d)},g,g.exports,a,n,o,i)}return o[f].exports}for(var u=typeof ua=="function"&&ua,s=0;s<i.length;s++)l(i[s]);return l}({1:[function(a,n,o){var i={equalBoundingBoxes:function(l,u){return l.x1==u.x1&&l.x2==u.x2&&l.y1==u.y1&&l.y2==u.y2},getUnion:function(l,u){var s={x1:Math.min(l.x1,u.x1),x2:Math.max(l.x2,u.x2),y1:Math.min(l.y1,u.y1),y2:Math.max(l.y2,u.y2)};return s.w=s.x2-s.x1,s.h=s.y2-s.y1,s}};n.exports=i},{}],2:[function(a,n,o){var i=a("./debounce"),l=a("./debounce2");n.exports=function(u,s,f){var v,h=u;let c=100;var g;let d=function(){var y=s.scratch("_cyExpandCollapse");return y&&y.cueUtilities},m=function(y){var E=s.scratch("_cyExpandCollapse");E==null&&(E={}),E.cueUtilities=y,s.scratch("_cyExpandCollapse",E)};var p={init:function(){var y=document.createElement("canvas");y.classList.add("expand-collapse-canvas");var E=s.container(),T=y.getContext("2d");E.append(y),v=a("./elementUtilities")(s);var w=function(S){var R=S.getBoundingClientRect();return{top:R.top+document.documentElement.scrollTop,left:R.left+document.documentElement.scrollLeft}},x=i(function(){y.height=s.container().offsetHeight,y.width=s.container().offsetWidth,y.style.position="absolute",y.style.top=0,y.style.left=0,y.style.zIndex=N().zIndex,setTimeout(function(){var S=w(y),R=w(E);y.style.top=-(S.top-R.top),y.style.left=-(S.left-R.left),s&&A(!0)},0)},250);function D(){x()}D();var L={};function N(){return s.scratch("_cyExpandCollapse").options}function A(){var S=s.width(),R=s.height();T.clearRect(0,0,S,R),g=null}function P(S){var R=S.children(),B=S.data("collapsedChildren"),z=R!=null&&R!=null&&R.length>0;if(!(!z&&!B)){var G=S.hasClass("cy-expand-collapse-collapsed-node"),k=N().expandCollapseCueSize,H=N().expandCollapseCueLineSize,$;if(N().expandCollapseCuePosition==="top-left"){var V=1,X=s.zoom()<1?k/(2*s.zoom()):k/2,U=parseFloat(S.css("border-width")),F=S.position("x")-S.width()/2-parseFloat(S.css("padding-left"))+U+X+V,Y=S.position("y")-S.height()/2-parseFloat(S.css("padding-top"))+U+X+V;$={x:F,y:Y}}else{var q=N().expandCollapseCuePosition;$=typeof q=="function"?q.call(this,S):q}var K=v.convertToRenderedPosition($);k=Math.max(k,k*s.zoom()),H=Math.max(H,H*s.zoom());var j=(k-H)/2,ge=K.x,Ce=K.y,Q=ge-k/2,le=Ce-k/2,de=k;if(G&&N().expandCueImage)b(N().expandCueImage,Q,le,k,k);else if(!G&&N().collapseCueImage)b(N().collapseCueImage,Q,le,k,k);else{var ie=T.fillStyle,_=T.lineWidth,ue=T.strokeStyle;T.fillStyle="black",T.strokeStyle="black",T.ellipse(ge,Ce,k/2,k/2,0,0,2*Math.PI),T.fill(),T.beginPath(),T.strokeStyle="white",T.lineWidth=Math.max(2.6,2.6*s.zoom()),T.moveTo(Q+j,le+k/2),T.lineTo(Q+H+j,le+k/2),G&&(T.moveTo(Q+k/2,le+j),T.lineTo(Q+k/2,le+H+j)),T.closePath(),T.stroke(),T.strokeStyle=ue,T.fillStyle=ie,T.lineWidth=_}S._private.data.expandcollapseRenderedStartX=Q,S._private.data.expandcollapseRenderedStartY=le,S._private.data.expandcollapseRenderedCueSize=de,g=S}}function b(S,R,B,z,G){var k=new Image(z,G);k.src=S,k.onload=()=>{T.drawImage(k,R,B,z,G)}}s.on("resize",L.eCyResize=function(){D()}),s.on("expandcollapse.clearvisualcue",function(){g&&A()});var M=null,C=null;s.on("mousedown",L.eMouseDown=function(S){M=S.renderedPosition||S.cyRenderedPosition}),s.on("mouseup",L.eMouseUp=function(S){C=S.renderedPosition||S.cyRenderedPosition}),s.on("remove","node",L.eRemove=function(S){S.target==g&&A()});var O;s.on("select unselect",L.eSelect=function(){g&&A();var S=s.nodes(":selected");if(S.length===1){var R=S[0];(R.isParent()||R.hasClass("cy-expand-collapse-collapsed-node"))&&P(R)}}),s.on("tap",L.eTap=function(S){var R=g;if(R){var B=R.data("expandcollapseRenderedStartX"),z=R.data("expandcollapseRenderedStartY"),G=R.data("expandcollapseRenderedCueSize"),k=B+G,H=z+G,$=S.renderedPosition||S.cyRenderedPosition,V=$.x,X=$.y,U=N(),F=(U.expandCollapseCueSensitivity-1)/2;Math.abs(M.x-C.x)<5&&Math.abs(M.y-C.y)<5&&V>=B-G*F&&V<=k+G*F&&X>=z-G*F&&X<=H+G*F&&(U.undoable&&!O&&(O=s.undoRedo({defaultActions:!1})),f.isCollapsible(R)?(A(),U.undoable?O.do("collapse",{nodes:R,options:U}):f.collapse(R,U)):f.isExpandable(R)&&(A(),U.undoable?O.do("expand",{nodes:R,options:U}):f.expand(R,U)),R.selectable()&&(R.unselectify(),s.scratch("_cyExpandCollapse").selectableChanged=!0))}}),s.on("afterUndo afterRedo",L.eUndoRedo=L.eSelect),s.on("position","node",L.ePosition=l(L.eSelect,c,A)),s.on("pan zoom",L.ePosition),L.hasEventFields=!0,m(L)},unbind:function(){var y=d();if(!y.hasEventFields){console.log("events to unbind does not exist");return}s.trigger("expandcollapse.clearvisualcue"),s.off("mousedown","node",y.eMouseDown).off("mouseup","node",y.eMouseUp).off("remove","node",y.eRemove).off("tap","node",y.eTap).off("add","node",y.eAdd).off("position","node",y.ePosition).off("pan zoom",y.ePosition).off("select unselect",y.eSelect).off("free","node",y.eFree).off("resize",y.eCyResize).off("afterUndo afterRedo",y.eUndoRedo)},rebind:function(){var y=d();if(!y.hasEventFields){console.log("events to rebind does not exist");return}s.on("mousedown","node",y.eMouseDown).on("mouseup","node",y.eMouseUp).on("remove","node",y.eRemove).on("tap","node",y.eTap).on("add","node",y.eAdd).on("position","node",y.ePosition).on("pan zoom",y.ePosition).on("select unselect",y.eSelect).on("free","node",y.eFree).on("resize",y.eCyResize).on("afterUndo afterRedo",y.eUndoRedo)}};if(p[h])return p[h].apply(s.container(),Array.prototype.slice.call(arguments,1));if(typeof h=="object"||!h)return p.init.apply(s.container(),arguments);throw new Error("No such function `"+h+"` for cytoscape.js-expand-collapse")}},{"./debounce":3,"./debounce2":4,"./elementUtilities":5}],3:[function(a,n,o){var i=function(){var l="Expected a function",u=Math.max,s=Date.now,f=s||function(){return new Date().getTime()};function v(c,g,d){var m,p,y,E,T,w,x,D=0,L=!1,N=!0;if(typeof c!="function")throw new TypeError(l);if(g=g<0?0:+g||0,d===!0){var A=!0;N=!1}else h(d)&&(A=!!d.leading,L="maxWait"in d&&u(+d.maxWait||0,g),N="trailing"in d?!!d.trailing:N);function P(){w&&clearTimeout(w),p&&clearTimeout(p),D=0,p=w=x=void 0}function b(S,R){R&&clearTimeout(R),p=w=x=void 0,S&&(D=f(),y=c.apply(T,m),!w&&!p&&(m=T=void 0))}function M(){var S=g-(f()-E);S<=0||S>g?b(x,p):w=setTimeout(M,S)}function C(){b(N,w)}function O(){if(m=arguments,E=f(),T=this,x=N&&(w||!A),L===!1)var S=A&&!w;else{!p&&!A&&(D=E);var R=L-(E-D),B=R<=0||R>L;B?(p&&(p=clearTimeout(p)),D=E,y=c.apply(T,m)):p||(p=setTimeout(C,R))}return B&&w?w=clearTimeout(w):!w&&g!==L&&(w=setTimeout(M,g)),S&&(B=!0,y=c.apply(T,m)),B&&!w&&!p&&(m=T=void 0),y}return O.cancel=P,O}function h(c){var g=typeof c;return!!c&&(g=="object"||g=="function")}return v}();n.exports=i},{}],4:[function(a,n,o){var i=function(){function l(u,s,f){let v,h=!0;return function(){let c=this,g=arguments,d=function(){v=null,u.apply(c,g),h=!0};clearTimeout(v),v=setTimeout(d,s),h&&(f.apply(c,g),h=!1)}}return l}();n.exports=i},{}],5:[function(a,n,o){function i(l){return{moveNodes:function(u,s,f){var v=f?s:this.getTopMostNodes(s),h=v.not(":parent");h.positions(function(m,p){return{x:h[p].position("x")+u.x,y:h[p].position("y")+u.y}});for(var c=0;c<v.length;c++){var g=v[c],d=g.children();this.moveNodes(u,d,!0)}},getTopMostNodes:function(u){for(var s={},f=0;f<u.length;f++)s[u[f].id()]=!0;var v=u.filter(function(h,c){typeof h=="number"&&(h=c);for(var g=h.parent()[0];g!=null;){if(s[g.id()])return!1;g=g.parent()[0]}return!0});return v},rearrange:function(u){if(typeof u=="function")u();else if(u!=null){var s=l.layout(u);s&&s.run&&s.run()}},convertToRenderedPosition:function(u){var s=l.pan(),f=l.zoom(),v=u.x*f+s.x,h=u.y*f+s.y;return{x:v,y:h}}}}n.exports=i},{}],6:[function(a,n,o){var i=a("./boundingBoxUtilities");function l(u){var s=a("./elementUtilities")(u);return{animatedlyMovingNodeCount:0,expandNodeBaseFunction:function(f,v,h){if(f._private.data.collapsedChildren){var c={x:f._private.position.x-f._private.data["position-before-collapse"].x,y:f._private.position.y-f._private.data["position-before-collapse"].y};f.removeData("infoLabel"),f.removeClass("cy-expand-collapse-collapsed-node"),f.trigger("expandcollapse.beforeexpand");var g=f._private.data.collapsedChildren;g.restore();for(var d=u.scratch("_cyExpandCollapse").parentData,m=0;m<g.length;m++)delete d[g[m].id()];u.scratch("_cyExpandCollapse").parentData=d,this.repairEdges(f),f._private.data.collapsedChildren=null,s.moveNodes(c,f.children()),f.removeData("position-before-collapse"),f.trigger("position"),f.trigger("expandcollapse.afterexpand"),v&&this.endOperation(h,f)}},simpleCollapseGivenNodes:function(f){f.data("collapse",!0);for(var v=s.getTopMostNodes(f),h=0;h<v.length;h++){var c=v[h];this.collapseBottomUp(c)}return f},simpleExpandGivenNodes:function(f,v){f.data("expand",!0);for(var h=s.getTopMostNodes(f),c=0;c<h.length;c++){var g=h[c];this.expandTopDown(g,v)}return f},simpleExpandAllNodes:function(f,v){f===void 0&&(f=u.nodes());var h;h=s.getTopMostNodes(f);for(var c=[],g=0;g<h.length;g++){var d=h[g];this.expandAllTopDown(d,c,v)}return c},endOperation:function(f,v){var h=this;u.ready(function(){setTimeout(function(){s.rearrange(f),u.scratch("_cyExpandCollapse").selectableChanged&&(v.selectify(),u.scratch("_cyExpandCollapse").selectableChanged=!1)},0)})},expandAllNodes:function(f,v){var h=this.simpleExpandAllNodes(f,v.fisheye);return this.endOperation(v.layoutBy,f),h},expandAllTopDown:function(f,v,h){f._private.data.collapsedChildren!=null&&(v.push(f),this.expandNode(f,h));for(var c=f.children(),g=0;g<c.length;g++){var d=c[g];this.expandAllTopDown(d,v,h)}},expandGivenNodes:function(f,v){if(f.length===1){var h=f[0];h._private.data.collapsedChildren!=null&&this.expandNode(h,v.fisheye,!0,v.animate,v.layoutBy,v.animationDuration)}else this.simpleExpandGivenNodes(f,v.fisheye),this.endOperation(v.layoutBy,f);return f},collapseGivenNodes:function(f,v){return u.startBatch(),this.simpleCollapseGivenNodes(f),u.endBatch(),f.trigger("position"),this.endOperation(v.layoutBy,f),u.style().update(),f},collapseBottomUp:function(f){for(var v=f.children(),h=0;h<v.length;h++){var c=v[h];this.collapseBottomUp(c)}f.data("collapse")&&f.children().length>0&&(this.collapseNode(f),f.removeData("collapse"))},expandTopDown:function(f,v){f.data("expand")&&f._private.data.collapsedChildren!=null&&(this.expandNode(f,v),f.removeData("expand"));for(var h=f.children(),c=0;c<h.length;c++){var g=h[c];this.expandTopDown(g)}},convertToModelPosition:function(f){var v=u.pan(),h=u.zoom(),c=(f.x-v.x)/h,g=(f.y-v.y)/h;return{x:c,y:g}},expandNode:function(f,v,h,c,g,d){var m=this,p=function(A,P,b,M,C,O){P&&(A._private.data["width-before-fisheye"]=A._private.data["size-before-collapse"].w,A._private.data["height-before-fisheye"]=A._private.data["size-before-collapse"].h,m.fishEyeViewExpandGivenNode(A,b,A,M,C,O)),(!b||!P||!M)&&m.expandNodeBaseFunction(A,b,C)};if(f._private.data.collapsedChildren!=null){this.storeWidthHeight(f);var y=!1;if(v&&h){var E=this.convertToModelPosition({x:0,y:0}),T=this.convertToModelPosition({x:u.width(),y:u.height()}),w=80,x={x1:E.x,x2:T.x,y1:E.y,y2:T.y},D={x1:f._private.position.x-f._private.data["size-before-collapse"].w/2-w,x2:f._private.position.x+f._private.data["size-before-collapse"].w/2+w,y1:f._private.position.y-f._private.data["size-before-collapse"].h/2-w,y2:f._private.position.y+f._private.data["size-before-collapse"].h/2+w},L=i.getUnion(D,x);if(!i.equalBoundingBoxes(L,x)){var N=u.getFitViewport(L,10),m=this;y=c,c?u.animate({pan:N.pan,zoom:N.zoom,complete:function(){p(f,v,h,c,g,d)}},{duration:d||1e3}):(u.zoom(N.zoom),u.pan(N.pan))}}return y||p(f,v,h,c,g,d),f}},collapseNode:function(f){if(f._private.data.collapsedChildren==null){f.data("position-before-collapse",{x:f.position().x,y:f.position().y}),f.data("size-before-collapse",{w:f.outerWidth(),h:f.outerHeight()});var v=f.children();return v.unselect(),v.connectedEdges().unselect(),f.trigger("expandcollapse.beforecollapse"),this.barrowEdgesOfcollapsedChildren(f),this.removeChildren(f,f),f.addClass("cy-expand-collapse-collapsed-node"),f.trigger("expandcollapse.aftercollapse"),f.position(f.data("position-before-collapse")),f}},storeWidthHeight:function(f){f!=null&&(f._private.data["x-before-fisheye"]=this.xPositionInParent(f),f._private.data["y-before-fisheye"]=this.yPositionInParent(f),f._private.data["width-before-fisheye"]=f.outerWidth(),f._private.data["height-before-fisheye"]=f.outerHeight(),f.parent()[0]!=null&&this.storeWidthHeight(f.parent()[0]))},fishEyeViewExpandGivenNode:function(f,v,h,c,g,d){var m=this.getSiblings(f),p=this.xPositionInParent(f),y=this.yPositionInParent(f),E=Math.abs((f._private.data["width-before-fisheye"]-f.outerWidth())/2),T=Math.abs((f._private.data["width-before-fisheye"]-f.outerWidth())/2),w=Math.abs((f._private.data["height-before-fisheye"]-f.outerHeight())/2),x=Math.abs((f._private.data["height-before-fisheye"]-f.outerHeight())/2),D=Math.abs(f._private.data["x-before-fisheye"]-p),L=Math.abs(f._private.data["y-before-fisheye"]-y);f._private.data["x-before-fisheye"]>p?(E=E+D,T=T-D):(E=E-D,T=T+D),f._private.data["y-before-fisheye"]>y?(w=w+L,x=x-L):(w=w-L,x=x+L);for(var N=[],A=[],P=0;P<m.length;P++)N.push(this.xPositionInParent(m[P])),A.push(this.yPositionInParent(m[P]));for(var P=0;P<m.length;P++){var b=m[P],M=N[P],C=A[P],O=(C-y)/(M-p),S=0,R=0,B=0,z=0;p>M?S=E:S=T,y>C?R=w:R=x,isFinite(O)&&(B=Math.min(S,R/Math.abs(O))),O!==0&&(z=Math.min(R,S*Math.abs(O))),p>M&&(B=-1*B),y>C&&(z=-1*z),this.fishEyeViewMoveNode(b,B,z,h,v,c,g,d)}return m.length==0&&f.same(h)&&this.expandNodeBaseFunction(h,v,g),f.parent()[0]!=null&&this.fishEyeViewExpandGivenNode(f.parent()[0],v,h,c,g,d),f},getSiblings:function(f){var v;if(f.parent()[0]==null){var h=u.nodes(":visible").orphans();v=h.difference(f)}else v=f.siblings(":visible");return v},fishEyeViewMoveNode:function(f,v,h,c,g,d,m,p){var y=u.collection();f.isParent()&&(y=f.children(":visible"));var E=this;if(y.length==0){var T={x:f._private.position.x+v,y:f._private.position.y+h};!g||!d?f.position(T):(this.animatedlyMovingNodeCount++,f.animate({position:T,complete:function(){E.animatedlyMovingNodeCount--,!(E.animatedlyMovingNodeCount>0||!c.hasClass("cy-expand-collapse-collapsed-node"))&&E.expandNodeBaseFunction(c,g,m)}},{duration:p||1e3}))}else for(var w=0;w<y.length;w++)this.fishEyeViewMoveNode(y[w],v,h,c,g,d,m,p)},xPositionInParent:function(f){var v=f.parent()[0],h=0;return v!=null?h=f.relativePosition("x")+v.width()/2:h=f.position("x"),h},yPositionInParent:function(f){var v=f.parent()[0],h=0;return v!=null?h=f.relativePosition("y")+v.height()/2:h=f.position("y"),h},removeChildren:function(f,v){for(var h=f.children(),c=0;c<h.length;c++){var g=h[c];this.removeChildren(g,v);var d=u.scratch("_cyExpandCollapse").parentData;d[g.id()]=g.parent(),u.scratch("_cyExpandCollapse").parentData=d;var m=g.remove();v._private.data.collapsedChildren==null?v._private.data.collapsedChildren=m:v._private.data.collapsedChildren=v._private.data.collapsedChildren.union(m)}},isMetaEdge:function(f){return f.hasClass("cy-expand-collapse-meta-edge")},barrowEdgesOfcollapsedChildren:function(f){var v=f.descendants(),h=v.edgesWith(u.nodes().not(v.union(f))),c={};v.each(function(E,T){typeof E=="number"&&(E=T),c[E.id()]=!0});for(var g=0;g<h.length;g++){var d=h[g],m=d.source(),p=d.target();if(!this.isMetaEdge(d)){var y={source:m,target:p};d.addClass("cy-expand-collapse-meta-edge"),d.data("originalEnds",y)}d.move({target:c[p.id()]?f.id():p.id(),source:c[m.id()]?f.id():m.id()})}},findNewEnd:function(f){for(var v=f,h=u.scratch("_cyExpandCollapse").parentData,c=h[v.id()];!v.inside();)v=c,c=h[c.id()];return v},repairEdges:function(f){for(var v=f.connectedEdges(".cy-expand-collapse-meta-edge"),h=0;h<v.length;h++){var c=v[h],g=c.data("originalEnds"),d=c.data("source"),m=c.data("target");d===f.id()?c=c.move({source:this.findNewEnd(g.source).id()}):c=c.move({target:this.findNewEnd(g.target).id()}),c.data("source")===g.source.id()&&c.data("target")===g.target.id()&&(c.removeClass("cy-expand-collapse-meta-edge"),c.removeData("originalEnds"))}},isOuterNode:function(f,v){for(var h=f;h!=null;){if(h==v)return!1;h=h.parent()[0]}return!0},getCollapsedChildrenRecursively:function(f,v){var h=f.data("collapsedChildren")||[],c;for(c=0;c<h.length;c++)h[c].data("collapsedChildren")&&(v=v.union(this.getCollapsedChildrenRecursively(h[c],v))),v=v.union(h[c]);return v},collapseGivenEdges:function(f,v){f.unselect();var h=f.connectedNodes(),c={};if(v.groupEdgesOfSameTypeOnCollapse)f.forEach(function(w){var x="unknown";if(v.edgeTypeInfo!==void 0&&(x=v.edgeTypeInfo instanceof Function?v.edgeTypeInfo.call(w):w.data()[v.edgeTypeInfo]),c.hasOwnProperty(x))c[x].edges=c[x].edges.add(w),c[x].directionType=="unidirection"&&(c[x].source!=w.source().id()||c[x].target!=w.target().id())&&(c[x].directionType="bidirection");else{var D=u.collection();D=D.add(w),c[x]={edges:D,directionType:"unidirection",source:w.source().id(),target:w.target().id()}}});else{c.unknown={edges:f,directionType:"unidirection",source:f[0].source().id(),target:f[0].target().id()};for(var g=0;g<f.length;g++)if(c.unknown.directionType=="unidirection"&&(c.unknown.source!=f[g].source().id()||c.unknown.target!=f[g].target().id())){c.unknown.directionType="bidirection";break}}var d={edges:u.collection(),oldEdges:u.collection()},m=[];for(let w in c)if(!(c[w].edges.length<2)){f.trigger("expandcollapse.beforecollapseedge"),d.oldEdges=d.oldEdges.add(c[w].edges);var p={};p.group="edges",p.data={},p.data.source=c[w].source,p.data.target=c[w].target;var y=h[0].id(),E=y;h[1]&&(E=h[1].id()),p.data.id="collapsedEdge_"+y+"_"+E+"_"+w+"_"+Math.floor(Math.random()*Date.now()),p.data.collapsedEdges=u.collection(),c[w].edges.forEach(function(x){p.data.collapsedEdges=p.data.collapsedEdges.add(x)}),p.data.collapsedEdges=this.check4nestedCollapse(p.data.collapsedEdges,v);var T="edgeType";v.edgeTypeInfo!==void 0&&(T=v.edgeTypeInfo instanceof Function?edgeTypeField:v.edgeTypeInfo),p.data[T]=w,p.data.directionType=c[w].directionType,p.classes="cy-expand-collapse-collapsed-edge",m.push(p),u.remove(c[w].edges),f.trigger("expandcollapse.aftercollapseedge")}return d.edges=u.add(m),d},check4nestedCollapse:function(f,v){if(v.allowNestedEdgeCollapse)return f;let h=u.collection();for(let c=0;c<f.length;c++){let g=f[c],d=g.data("collapsedEdges");d&&d.length>0?h=h.add(d):h=h.add(g)}return h},expandEdge:function(f){f.unselect();var v={edges:u.collection(),oldEdges:u.collection()},h=f.data("collapsedEdges");return h!==void 0&&h.length>0&&(f.trigger("expandcollapse.beforeexpandedge"),v.oldEdges=v.oldEdges.add(f),u.remove(f),v.edges=u.add(h),f.trigger("expandcollapse.afterexpandedge")),v},isValidEdgesForCollapse:function(f){var v=this.getEdgesDistinctEndPoints(f);return v.length!=2?!1:v},getEdgesDistinctEndPoints:function(f){var v=[];return f.forEach(function(h){this.containsElement(v,h.source())||v.push(h.source()),this.containsElement(v,h.target())||v.push(h.target())}.bind(this)),v},containsElement:function(f,v){for(var h=!1,c=0;c<f.length;c++)if(f[c].id()==v.id()){h=!0;break}return h}}}n.exports=l},{"./boundingBoxUtilities":1,"./elementUtilities":5}],7:[function(a,n,o){(function(){"use strict";var i=function(l){if(!l)return;var u=a("./undoRedoUtilities"),s=a("./cueUtilities"),f=null;function v(m,p){var y={};for(var E in m)y[E]=m[E];for(var E in p)y.hasOwnProperty(E)&&(y[E]=p[E]);return y}function h(m){var p=typeof m.animate=="function"?m.animate.call():m.animate,y=typeof m.fisheye=="function"?m.fisheye.call():m.fisheye;m.animate=p,m.fisheye=y}function c(m,p){var y={};function E(w){var x=g(m,"options");w.cueEnabled&&!x.cueEnabled?y.enableCue():!w.cueEnabled&&x.cueEnabled&&y.disableCue()}function T(w){let x=[];for(let D=0;D<w.length;D++){let L=w[D].source().id(),N=w[D].target().id(),A={};A[L]=!0,A[N]=!0,x.push(A)}for(let D=0;D<x.length;D++)for(let L=D+1;L<x.length;L++){let N=Object.keys(x[D]),A=Object.keys(x[L]),P=new Set(N.concat(A));if(P.size!=N.length||P.size!=A.length)return!1}return!0}return y.setOptions=function(w){E(w),d(m,"options",w)},y.extendOptions=function(w){var x=g(m,"options"),D=v(x,w);E(D),d(m,"options",D)},y.setOption=function(w,x){var D={};D[w]=x;var L=g(m,"options"),N=v(L,D);E(N),d(m,"options",N)},y.collapse=function(w,x){var D=this.collapsibleNodes(w),L=g(m,"options"),N=v(L,x);return h(N),p.collapseGivenNodes(D,N)},y.collapseRecursively=function(w,x){var D=this.collapsibleNodes(w),L=g(m,"options"),N=v(L,x);return h(N),this.collapse(D.union(D.descendants()),N)},y.expand=function(w,x){var D=this.expandableNodes(w),L=g(m,"options"),N=v(L,x);return h(N),p.expandGivenNodes(D,N)},y.expandRecursively=function(w,x){var D=this.expandableNodes(w),L=g(m,"options"),N=v(L,x);return h(N),p.expandAllNodes(D,N)},y.collapseAll=function(w){var x=g(m,"options"),D=v(x,w);return h(D),this.collapseRecursively(this.collapsibleNodes(),D)},y.expandAll=function(w){var x=g(m,"options"),D=v(x,w);return h(D),this.expandRecursively(this.expandableNodes(),D)},y.isExpandable=function(w){return w.hasClass("cy-expand-collapse-collapsed-node")},y.isCollapsible=function(w){return!this.isExpandable(w)&&w.isParent()},y.collapsibleNodes=function(w){var x=this,D=w||m.nodes();return D.filter(function(L,N){return typeof L=="number"&&(L=N),x.isCollapsible(L)})},y.expandableNodes=function(w){var x=this,D=w||m.nodes();return D.filter(function(L,N){return typeof L=="number"&&(L=N),x.isExpandable(L)})},y.getCollapsedChildren=function(w){return w.data("collapsedChildren")},y.getCollapsedChildrenRecursively=function(w){var x=m.collection();return p.getCollapsedChildrenRecursively(w,x)},y.getAllCollapsedChildrenRecursively=function(){var w=m.collection(),x=m.nodes(".cy-expand-collapse-collapsed-node"),D;for(D=0;D<x.length;D++)w=w.union(this.getCollapsedChildrenRecursively(x[D]));return w},y.clearVisualCue=function(w){m.trigger("expandcollapse.clearvisualcue")},y.disableCue=function(){var w=g(m,"options");w.cueEnabled&&(s("unbind",m,y),w.cueEnabled=!1)},y.enableCue=function(){var w=g(m,"options");w.cueEnabled||(s("rebind",m,y),w.cueEnabled=!0)},y.getParent=function(w){if(m.getElementById(w)[0]===void 0){var x=g(m,"parentData");return x[w]}else return m.getElementById(w).parent()},y.collapseEdges=function(w,x){var D={edges:m.collection(),oldEdges:m.collection()};if(w.length<2||!T(w))return D;var L=g(m,"options"),N=v(L,x);return p.collapseGivenEdges(w,N)},y.expandEdges=function(w){var x={edges:m.collection(),oldEdges:m.collection()};return w===void 0||w.forEach(function(D){var L=p.expandEdge(D);x.edges=x.edges.add(L.edges),x.oldEdges=x.oldEdges.add(L.oldEdges)}),x},y.collapseEdgesBetweenNodes=function(w,x){var D=g(m,"options"),L=v(D,x);function N(b){var M=[];return b.slice(0,b.length-1).forEach(function(C,O){var S=b.slice(O+1,b.length);S.forEach(function(R){M.push([C,R])})}),M}var A=N(w);A.push(...w.map(b=>[b,b]));var P={edges:m.collection(),oldEdges:m.collection()};return A.forEach(function(b){let M=b[1].id();var C=b[0].connectedEdges('[source = "'+M+'"],[target = "'+M+'"]');if(b[0].id()===M&&(C=b[0].connectedEdges('[source = "'+M+'"][target = "'+M+'"]')),C.length>=2){var O=p.collapseGivenEdges(C,L);P.oldEdges=P.oldEdges.add(O.oldEdges),P.edges=P.edges.add(O.edges)}}.bind(this)),P},y.expandEdgesBetweenNodes=function(w){var x=m.collection();function D(N){var A=[];return N.slice(0,N.length-1).forEach(function(P,b){var M=N.slice(b+1,N.length);M.forEach(function(C){A.push([P,C])})}),A}var L=D(w);return L.push(...w.map(N=>[N,N])),L.forEach(function(N){let A=N[1].id();var P=N[0].connectedEdges('.cy-expand-collapse-collapsed-edge[source = "'+A+'"],[target = "'+A+'"]');N[0].id()===A&&(P=N[0].connectedEdges('[source = "'+A+'"][target = "'+A+'"]')),x=x.union(P)}.bind(this)),this.expandEdges(x)},y.collapseAllEdges=function(w){return this.collapseEdgesBetweenNodes(m.edges().connectedNodes(),w)},y.expandAllEdges=function(){var w=m.edges(".cy-expand-collapse-collapsed-edge"),x={edges:m.collection(),oldEdges:m.collection()},D=this.expandEdges(w);return x.oldEdges=x.oldEdges.add(D.oldEdges),x.edges=x.edges.add(D.edges),x},y.loadJson=function(w){f.loadJson(w)},y.saveJson=function(w,x){f.saveJson(w,x)},y}function g(m,p){m.scratch("_cyExpandCollapse")===void 0&&m.scratch("_cyExpandCollapse",{});var y=m.scratch("_cyExpandCollapse"),E=p===void 0?y:y[p];return E}function d(m,p,y){g(m)[p]=y}l("core","expandCollapse",function(m){var p=this,y=g(p,"options")||{layoutBy:null,fisheye:!0,animate:!0,animationDuration:1e3,ready:function(){},undoable:!0,cueEnabled:!0,expandCollapseCuePosition:"top-left",expandCollapseCueSize:12,expandCollapseCueLineSize:8,expandCueImage:void 0,collapseCueImage:void 0,expandCollapseCueSensitivity:1,edgeTypeInfo:"edgeType",groupEdgesOfSameTypeOnCollapse:!1,allowNestedEdgeCollapse:!0,zIndex:999};if(m!=="get"){y=v(y,m);var E=a("./expandCollapseUtilities")(p),T=c(p,E);f=a("./saveLoadUtilities")(p,T),d(p,"api",T),u(p,T),s(y,p,T),y.cueEnabled||s("unbind",p,T),y.ready&&y.ready(),d(p,"options",y);var w={};d(p,"parentData",w)}return g(p,"api")})};typeof n<"u"&&n.exports&&(n.exports=i),typeof t<"u"&&t.amd&&t("cytoscape-expand-collapse",function(){return i}),typeof cytoscape<"u"&&i(cytoscape)})()},{"./cueUtilities":2,"./expandCollapseUtilities":6,"./saveLoadUtilities":8,"./undoRedoUtilities":9}],8:[function(a,n,o){function i(l,u){function s(d,m,p,y){d.sort(T=>T.group==="edges"?1:-1);let E=l.collection();for(let T=0;T<d.length;T++){let w=d[T],x=w.data;x.parent&&(y[x.id]=x.parent);let D={x:w.position.x,y:w.position.y},L=l.add(w);if(L.isNode()&&m.merge(L),x.originalEnds){let N=m.$id(x.originalEnds.source.data.id);x.originalEnds.source.data.parent&&(y[x.originalEnds.source.data.id]=x.originalEnds.source.data.parent);let A=m.$id(x.originalEnds.target.data.id);x.originalEnds.target.data.parent&&(y[x.originalEnds.target.data.id]=x.originalEnds.target.data.parent),L.data("originalEnds",{source:N,target:A})}x.collapsedChildren?(p.merge(L),s(x.collapsedChildren,m,p,y),f(L)):x.collapsedEdges&&(L.data("collapsedEdges",s(x.collapsedEdges,m,p,y)),l.remove(L.data("collapsedEdges"))),L.position(D),E.merge(L)}return E}function f(d){d.data("collapsedChildren",null),d.removeClass("cy-expand-collapse-collapsed-node"),d.data("position-before-collapse",null),d.data("size-before-collapse",null),d.data("expandcollapseRenderedStartX",null),d.data("expandcollapseRenderedStartY",null),d.data("expandcollapseRenderedCueSize",null)}function v(d){let m=[];for(let p=0;p<d.length;p++){let y=d[p],E=null;if(!y.collapsedChildren&&!y.collapsedEdges?E=y.cy.json():y.collapsedChildren?(y.collapsedChildren=v(h(y.collapsedChildren)),E=y.cy.json(),E.data.collapsedChildren=y.collapsedChildren):y.collapsedEdges&&(y.collapsedEdges=v(h(y.collapsedEdges)),E=y.cy.json(),E.data.collapsedEdges=y.collapsedEdges),y.originalEnds){let T=y.originalEnds.source.json(),w=y.originalEnds.target.json();T.data.collapsedChildren&&(T.data.collapsedChildren=v(h(T.data.collapsedChildren))),w.data.collapsedChildren&&(w.data.collapsedChildren=v(h(w.data.collapsedChildren))),E.data.originalEnds={source:T,target:w}}m.push(E)}return m}function h(d){let m=[];for(let p=0;p<d.length;p++)m.push({cy:d[p],collapsedEdges:d[p].data("collapsedEdges"),collapsedChildren:d[p].data("collapsedChildren"),originalEnds:d[p].data("originalEnds")});return m}function c(d,m){let p=new Blob([d],{type:"text/plain"}),y=document.createElement("a");y.download=m,y.href=window.URL.createObjectURL(p),y.dataset.downloadurl=["text/plain",y.download,y.href].join(":"),y.click()}function g(d,m){let p=d.data("collapsedChildren"),y=d.data("collapsedEdges"),E=d.data("originalEnds");d.json(m),p&&d.data("collapsedChildren",p),y&&d.data("collapsedEdges",y),E&&d.data("originalEnds",E)}return{loadJson:function(d){let m=JSON.parse(d),p={},y=l.collection(),E=l.collection(),T={};for(let w of m.nodes){p[w.data.id]={x:w.position.x,y:w.position.y},w.data.parent&&(T[w.data.id]=w.data.parent);let x=l.add(w);y.merge(x),x.data("collapsedChildren")&&(s(x.data("collapsedChildren"),y,E,T),E.merge(x),f(x))}for(let w of m.edges){let x=l.add(w);if(x.data("collapsedEdges")&&(x.data("collapsedEdges",s(w.data.collapsedEdges,y,E,T)),l.remove(x.data("collapsedEdges"))),x.data("originalEnds")){let D=w.data.originalEnds.source.data.id,L=w.data.originalEnds.target.data.id;w.data.originalEnds={source:y.filter("#"+D),target:y.filter("#"+L)}}}for(let w in T){let x=y.$id(w);x.length===1&&x.move({parent:T[w]})}u.collapse(E,{layoutBy:null,fisheye:!1,animate:!1});for(let w of m.nodes)l.$id(w.data.id).isChildless()&&l.$id(w.data.id).position(p[w.data.id]);l.fit()},saveJson:function(d,m){d||(d=l.$());let p=h(d.nodes()),y=h(d.edges());if(y.length+p.length<1)return;let E={nodes:[],edges:[]};for(let T of y){if(T.collapsedEdges&&(T.collapsedEdges=v(h(T.collapsedEdges))),T.originalEnds){let x=T.originalEnds.source.json(),D=T.originalEnds.target.json();x.data.collapsedChildren&&(x.data.collapsedChildren=v(h(x.data.collapsedChildren))),D.data.collapsedChildren&&(D.data.collapsedChildren=v(h(D.data.collapsedChildren))),T.originalEnds={source:x,target:D}}let w=T.cy.json();w.data.collapsedEdges=T.collapsedEdges,w.data.originalEnds=T.originalEnds,E.edges.push(w)}for(let T of p){T.collapsedChildren&&(T.collapsedChildren=v(h(T.collapsedChildren)));let w=T.cy.json();w.data.collapsedChildren=T.collapsedChildren,E.nodes.push(w)}m||(m="expand-collapse-output.json"),c(JSON.stringify(E),m)}}}n.exports=i},{}],9:[function(a,n,o){n.exports=function(i,l){if(i.undoRedo==null)return;var u=i.undoRedo({},!0);function s(x){return typeof x=="string"?i.$(x):x}function f(){for(var x={},D=i.nodes(),L=0;L<D.length;L++){var N=D[L];x[N.id()]={x:N.position("x"),y:N.position("y")}}return x}function v(x){var D={};return i.nodes().not(":parent").positions(function(L,N){typeof L=="number"&&(L=N),D[L.id()]={x:L.position("x"),y:L.position("y")};var A=x[L.id()];return{x:A.x,y:A.y}}),D}var h={layoutBy:null,animate:!1,fisheye:!1};function c(x){return function(D){var L={},N=s(D.nodes);return D.firstTime?(L.oldData=f(),L.nodes=x.indexOf("All")>0?l[x](D.options):l[x](N,D.options)):(L.oldData=f(),L.nodes=x.indexOf("All")>0?l[x](h):l[x](i.collection(N),h),v(D.oldData)),L}}for(var g=["collapse","collapseRecursively","collapseAll","expand","expandRecursively","expandAll"],d=0;d<g.length;d++)d==2?u.action("collapseAll",c("collapseAll"),c("expandRecursively")):d==5?u.action("expandAll",c("expandAll"),c("collapseRecursively")):u.action(g[d],c(g[d]),c(g[(d+3)%6]));function m(x){var D=x.options,L=x.edges,N={};if(N.options=D,x.firstTime){var A=l.collapseEdges(L,D);N.edges=A.edges,N.oldEdges=A.oldEdges,N.firstTime=!1}else N.oldEdges=L,N.edges=x.oldEdges,x.edges.length>0&&x.oldEdges.length>0&&(i.remove(x.edges),i.add(x.oldEdges));return N}function p(x){var D=x.options,L={};if(L.options=D,x.firstTime){var N=l.collapseEdgesBetweenNodes(x.nodes,D);L.edges=N.edges,L.oldEdges=N.oldEdges,L.firstTime=!1}else L.edges=x.oldEdges,L.oldEdges=x.edges,x.edges.length>0&&x.oldEdges.length>0&&(i.remove(x.edges),i.add(x.oldEdges));return L}function y(x){var D=x.options,L={};if(L.options=D,x.firstTime){var N=l.collapseAllEdges(D);L.edges=N.edges,L.oldEdges=N.oldEdges,L.firstTime=!1}else L.edges=x.oldEdges,L.oldEdges=x.edges,x.edges.length>0&&x.oldEdges.length>0&&(i.remove(x.edges),i.add(x.oldEdges));return L}function E(x){var D=x.options,L={};if(L.options=D,x.firstTime){var N=l.expandEdges(x.edges);L.edges=N.edges,L.oldEdges=N.oldEdges,L.firstTime=!1}else L.oldEdges=x.edges,L.edges=x.oldEdges,x.edges.length>0&&x.oldEdges.length>0&&(i.remove(x.edges),i.add(x.oldEdges));return L}function T(x){var D=x.options,L={};if(L.options=D,x.firstTime){var N=l.expandEdgesBetweenNodes(x.nodes,D);L.edges=N.edges,L.oldEdges=N.oldEdges,L.firstTime=!1}else L.edges=x.oldEdges,L.oldEdges=x.edges,x.edges.length>0&&x.oldEdges.length>0&&(i.remove(x.edges),i.add(x.oldEdges));return L}function w(x){var D=x.options,L={};if(L.options=D,x.firstTime){var N=l.expandAllEdges(D);L.edges=N.edges,L.oldEdges=N.oldEdges,L.firstTime=!1}else L.edges=x.oldEdges,L.oldEdges=x.edges,x.edges.length>0&&x.oldEdges.length>0&&(i.remove(x.edges),i.add(x.oldEdges));return L}u.action("collapseEdges",m,E),u.action("expandEdges",E,m),u.action("collapseEdgesBetweenNodes",p,T),u.action("expandEdgesBetweenNodes",T,p),u.action("collapseAllEdges",y,w),u.action("expandAllEdges",w,y)}},{}]},{},[7])(7)})});var Vn=Un(ev()),iv=Un(tv()),ov=Un(av()),ia={name:"fcose",animate:!1,randomize:!1,quality:"proof",minEdgeLength:50},z0={layoutBy:{name:"fcose",animate:!0,animationDuration:sv,randomize:!1,fit:!1},animate:!1,fisheye:!0,undoable:!1,expandCueImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACOUlEQVRo3u1ZyU7CUBQlTguXDiuHnzAS2bEzhDZtSRqM7v0FjStW4B6NEv8A0yGpuHHhN0jwAxxWCq6pG70XaxQSwpvavmpvchNCoT3nDfeed5rJpJFGGtxhNs1pxTZyRVc7Uh3dKjr6veLob/D5HRM/w/XO4Br+xiptVSqVqdiBa662ptrGMYB7BpAflPmkuFqtYJVWIwdeaJrLMJoNAOEzAB9NH4icqZ66FAl41dV24aE9AcBHs1u0jZ3QgG809mdhqVyEAHwogcQ5PkvsqHvqPNz8Omzwv7KFzxQ38tGC/84bqG5z3ASiWDZjEzY3L/i92MD/kCgzgTdsYxFu8Bo7Aah4TCU2qPNMDx0XzJXJ0U/pGhV0R54mJZoAYoFZWCcffZQHHNMeAgHcCzUi8CiyBjpFNgKgt1A0klSeHO/GC4XAV2YnEkC5KysBWNqHJDNgSzsDtnFJQqDDA5I1iGbA0duTCRBK5TgIYGMlIeBLTKD/LwgkfAklfhMnvYzK3MgA28FkIQemk7Sd2Cptkoq5RwkJPBC7eShdJSRQTfKBpq94ygrdgR4cAYkI1KnPxNtNc0GSQ32X2TdFrzJuAoDB5PKG0KuM0RM6EfPywtGdqMGDC36Vv83PiDR3WxES8ISZu0MmL0dlolk2wkZ+THkth1SdXrg3LI1vinbfoMHwA8d71LFsR/6uDLtjIDtYtBP+p0rdYcOIQABm0bdBzY4Hj+Bk5wfZg+/v8BpKYlSVUrxmTSONPxCf9GPtiVNgCLQAAAAASUVORK5CYII=",collapseCueImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACNUlEQVRo3u1Zy07CQBQl6sadj5WPjzCRuQORBXZK2BsgfonPjQsfW40a/8FXDHyJhh9AXaj47kNwU+diTQiJ6dAO7aC9yQ1NSDvntHfu40wiEVtssQU2ZyMxYOs0ZTFYszR6ZjKomjo889/Pln9fVy1GTk1GV+35FMV7IgduZ+m0qdEdDu6Wu9Ol35iMbNtaeip04O8Mxg0djjiIpg/gnd6wGD18y6fHQgFvMLrIF32UALzT64ZOSr2L82x2yH3rTi+d75MDXEsu+HR6mD+80mvwbV7GNeWALxYHDQbnIYL/8YqULxFG2PwaTjrsy9iwTpTOMRR8gce0hpkhagKY8TBt91XoBA6lVoWVU6RkeaOriu22B45KzjPhlnBjxm+4Vo0A9luY0r3Dh3eVCoJvua0lwZOApcG6qgRMDZYFcn8kVVewT4IT7w2Mw4jAw2SbGAlyJULgSV0CUBch0FSYQONfEOj7EOrvTezKImqmUR2OvQlwbUfZQsZgybuV4KKTsl8gB8l+buZqwmoeKmbKtdM6bHY70DRUGmis3NxkV1MZyn3qEKB7/oZ6DR4UIHD/msmM+tSESCn62CcLgbQh1CqjI0B2pUiLEVXnijSR1xV3yyEqEBfSxN12eR0FpjAyjpD6EEAvLWBm6AH4u8AbVtQwrblfQ0ax+8C3/pKdGQn9rAyrIypmPnunGrYHVn52Qo1jVi46mTpZQekDBw93smu6jteXrf+4tsNTM1HimDW22P6AfQExbP9jIk1/vwAAAABJRU5ErkJggg=="},gr={layoutBy:null,fisheye:!1},sv=300,G0=[{selector:"node",style:{"overlay-opacity":0,"background-color":"#636fb1","background-opacity":.8,"border-color":"#636fb1",label:"data(label)",width:70,height:20,shape:"rectangle","font-size":4,"z-index-compare":"manual","z-index":t=>t.ancestors().length*10+1,"z-compound-depth":"orphan"}},{selector:"node:parent",style:{"background-opacity":.66,"background-color":"lightgray","text-margin-y":"10px","border-color":"green","font-size":8,"z-index":t=>t.ancestors().length*10+2}},{selector:"node.cy-expand-collapse-collapsed-node",style:{"background-color":"green","border-color":"green",shape:"rectangle","text-halign":"center","text-valign":"center"}},{selector:"[element]",style:{"text-halign":"center","text-valign":"center"}},{selector:"edge",style:{width:1,"line-color":"#6368b1","curve-style":"bezier","control-point-step-size":10,"target-arrow-shape":"triangle","target-arrow-color":"#6368b1","arrow-scale":"0.5","z-index":t=>Math.max(t.source().ancestors().length,t.target().ancestors().length)*10,"z-index-compare":"manual","z-compound-depth":"orphan","overlay-opacity":0}},{selector:"edge.meta",style:{width:2,"line-color":"red"}},{selector:":selected",style:{"border-style":"dashed","border-width":"1px"}}],nv=(t,e)=>{let r=t.extent();return e.every(a=>{let n=a.boundingBox();return n.x1>r.x1&&n.x2<r.x2&&n.y1>r.y1&&n.y2<r.y2})};function V0(t,e){let r;t.on("mousedown","node, edge",a=>{e(a)&&a.originalEvent.button===0&&(r=a.position)}),t.on("mouseup",a=>{a.originalEvent.button===0&&(r=null)}),t.on("mousemove",a=>{if(t.autoungrabify(e(a)),a.originalEvent.buttons!=1&&(r=null),r){let n=t.zoom(),o={x:(a.position.x-r.x)*n,y:(a.position.y-r.y)*n};t.panBy(o)}})}var Nr=t=>setTimeout(t,5),Ki=class{interactedItem=null;interactionTimeout=null;workInProgress=!1;layoutInProgress=!1;awaitingAnimation=null;awaitingAdd=[];awaitingRemove=[];constructor({container:e,onClick:r}){e.innerHTML=`
    <div style="width: 100%; height: 100%">
      <div class="menu-container" style="position: absolute;z-index: 1000;padding: 20px;">
        <svg id="expand" style="cursor:pointer;fill:#000;height:30px;width:30px;padding-right:2px;" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 469 469" xml:space="preserve" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #000000;"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M455.5,0h-442C6,0,0,6,0,13.5v211.9c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5V27h415v415H242.4c-7.5,0-13.5,6-13.5,13.5 s6,13.5,13.5,13.5h213.1c7.5,0,13.5-6,13.5-13.5v-442C469,6,463,0,455.5,0z"></path> <path d="M175.6,279.9H13.5c-7.5,0-13.5,6-13.5,13.5v162.1C0,463,6,469,13.5,469h162.1c7.5,0,13.5-6,13.5-13.5V293.4 C189.1,286,183,279.9,175.6,279.9z M162.1,442H27V306.9h135.1V442z"></path> <path d="M360.4,127.7v71.5c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5V95.1c0-7.5-6-13.5-13.5-13.5H269.8c-7.5,0-13.5,6-13.5,13.5 s6,13.5,13.5,13.5h71.5L212.5,237.4c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4L360.4,127.7z"></path> </g> </g> </g></svg>
        <svg id="collapse" style="cursor:pointer;fill:#000;height:32px;width:32px;" viewBox="0 0 512 512" data-name="Layer 1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #000000;"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><polygon points="364.52 199.26 333.95 199.26 408.52 124.69 387.31 103.48 312.74 178.05 312.74 147.48 282.74 147.48 282.74 229.26 364.52 229.26 364.52 199.26"></polygon><path d="M448,34H34V478H478V34Zm0,414H64V64H448Z"></path><polygon points="312.74 333.95 387.31 408.52 408.52 387.31 333.95 312.74 364.52 312.74 364.52 282.74 282.74 282.74 282.74 364.52 312.74 364.52 312.74 333.95"></polygon><polygon points="199.26 333.95 199.26 364.52 229.26 364.52 229.26 282.74 147.48 282.74 147.48 312.74 178.05 312.74 103.48 387.31 124.69 408.52 199.26 333.95"></polygon><polygon points="147.48 199.26 147.48 229.26 229.26 229.26 229.26 147.48 199.26 147.48 199.26 178.05 124.69 103.48 103.48 124.69 178.05 199.26 147.48 199.26"></polygon></g></svg>
        <svg id="refresh" style="cursor:pointer;fill:#000;height:32px;width:32px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 489.935 489.935" xml:space="preserve" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #000000; --darkreader-inline-stroke: #e8e6e3;" stroke="#000000" data-darkreader-inline-stroke=""><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M278.235,33.267c-116.7,0-211.6,95-211.6,211.7v0.7l-41.9-63.1c-4.1-6.2-12.5-7.9-18.7-3.8c-6.2,4.1-7.9,12.5-3.8,18.7 l60.8,91.5c2.2,3.3,5.7,5.4,9.6,5.9c0.6,0.1,1.1,0.1,1.7,0.1c3.3,0,6.5-1.2,9-3.5l84.5-76.1c5.5-5,6-13.5,1-19.1 c-5-5.5-13.5-6-19.1-1l-56.1,50.7v-1c0-101.9,82.8-184.7,184.6-184.7s184.7,82.8,184.7,184.7s-82.8,184.7-184.6,184.7 c-49.3,0-95.7-19.2-130.5-54.1c-5.3-5.3-13.8-5.3-19.1,0c-5.3,5.3-5.3,13.8,0,19.1c40,40,93.1,62,149.6,62 c116.6,0,211.6-94.9,211.6-211.7S394.935,33.267,278.235,33.267z"></path> </g> </g></svg>
      </div>

      <div id="cy" style="width: 100%; height: 100%"></div>
    </div>
    `,Vn.default.use(iv.default),(0,ov.default)(Vn.default);let a=(0,Vn.default)({container:document.getElementById("cy"),layout:ia,autoungrabify:!0,style:G0,userZoomingEnabled:!1,minZoom:1,wheelSensitivity:.5});V0(a,o=>!o.originalEvent.altKey);let n=a.expandCollapse(z0);return document.getElementById("collapse").addEventListener("click",()=>{n.collapseAll(),Nr(()=>this._animate({fit:{padding:50}}))}),document.getElementById("expand").addEventListener("click",()=>{n.expandAll(),Nr(()=>this._animate({fit:{padding:50}}))}),document.getElementById("refresh").addEventListener("click",()=>this.reLayout()),window.addEventListener("resize",()=>{Nr(()=>this._animate({fit:{padding:50}}))}),a.on("tap",o=>{let i=o.target;i.isNode&&i.isNode()&&r?.(i.data()),i.data("interaction","tap"),this.interactionTimeout&&clearTimeout(this.interactionTimeout),this.interactedItem===i?(i.data("interaction","doubleTap"),i.isNode&&i.isNode()&&n.expand(i),this.interactedItem=null):this.interactedItem=i,this.interactionTimeout=setTimeout(()=>{this.interactedItem=null,i.data("interaction",null)},300)}),a.on("expandcollapse.afterexpand",o=>{Nr(()=>{let i=o.target,l=i.parent(),u=i.data("interaction");if(i.data("interaction",null),u=="doubleTap")this._animate({fit:{eles:i,padding:50}});else if(u=="tap"){let s=l[0]?l:void 0;this._animate({fit:{eles:s,padding:50}})}})}),a.on("expandcollapse.aftercollapse",o=>{Nr(()=>{let i=o.target;if(i.data("interaction")){i.data("interaction",null);let l=i.parent();this._animate(()=>l[0]&&!nv(a,l)?{fit:{eles:l,padding:50}}:!l[0]||nv(a,a.nodes())?{fit:{padding:50}}:{center:{eles:l}})}})}),a.on("layoutstart",()=>{console.debug("layout start"),this.layoutInProgress=!0}),a.on("layoutstop",()=>{console.debug("layout stop"),this.layoutInProgress=!1,Nr(()=>{this._runAwaitingWork()})}),document.querySelector("body").addEventListener("click",()=>a.userZoomingEnabled(!0)),document.querySelector("body").addEventListener("mouseleave",()=>a.userZoomingEnabled(!1)),n.collapseRecursively(a.nodes().filter(o=>o.data().bin)),Nr(()=>this._animate({fit:{padding:50}},{duration:100})),this.cy=a,this.ec=n,this}reLayout(){let{ec:e,cy:r}=this,a=e.getAllCollapsedChildrenRecursively(),n=r.elements(".cy-expand-collapse-collapsed-node");e.expandAll(gr),r.layout(ia).run(),e.collapse(a,gr),e.collapse(n,gr),r.layout(ia).run()}update(e,r){this.awaitingAdd.push(...e),this.awaitingRemove.push(...r),this._apply_update()}_apply_update(){this._canWork()&&(this.awaitingAdd.length==0&&this.awaitingRemove.length==0||(this.workInProgress=!0,setTimeout(()=>{console.debug("add graph data");let{ec:e,cy:r,awaitingAdd:a,awaitingRemove:n}=this;this.awaitingAdd=[],this.awaitingRemove=[];let o=[...a,...n].some(({group:u,data:{parent:s,source:f,target:v}})=>u=="nodes"&&!s||u=="nodes"&&r.$id(s)[0]&&e.isCollapsible(r.$id(s)[0])||u=="edges"&&(r.$id(f)[0]||r.$id(v)[0]));o||r.nodes().lock();let i=e.getAllCollapsedChildrenRecursively(),l=r.elements(".cy-expand-collapse-collapsed-node");if(e.expandAll(gr),console.debug("expanded data"),o&&r.nodes().length+a.length<20){let u=a.map(s=>{let f=r.add([s]);return r.layout(ia).run(),f});n.forEach(({data:{id:s}})=>r.remove(r.$id(s))),console.debug("removed data"),u.forEach(s=>e.collapse(s,gr))}else{console.debug("adding data");let u=r.add(a);console.debug("added data"),n.forEach(({data:{id:s}})=>r.remove(r.$id(s))),console.debug("removed data"),o&&r.layout(ia).run(),console.debug("run layout"),e.collapse(u,gr)}e.collapse(i,gr),e.collapse(l,gr),console.debug("collapse"),o&&r.layout(ia).run(),console.debug("run layout again"),o||r.nodes().unlock(),this.workInProgress=!1,this._runAwaitingWork()},500)))}_animate(e,r){if(!this._canWork()){this.awaitingAnimation={animation:e,options:r};return}e=e instanceof Function?e():e,r=r||{},r.duration=r.duration||sv;let a=r.complete;this.workInProgress=!0,r.complete=n=>{a?.(),this.workInProgress=!1,this._runAwaitingWork()},console.debug("animating"),this.cy.animate(e,r)}_canWork(){return!this.layoutInProgress&&!this.workInProgress}_runAwaitingWork(){if(this._canWork()){if(this.awaitingAnimation){let{animation:e,options:r}=this.awaitingAnimation;this.awaitingAnimation=null,this._animate(e,r);return}this._apply_update()}}};export{Ki as default};
/*! Bundled license information:

cytoscape/dist/cytoscape.cjs.js:
  (*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  *)
  (*!
  Event object based on jQuery events, MIT license
  
  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  *)
  (*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
  (*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
*/
//# sourceMappingURL=bundle.js.map
